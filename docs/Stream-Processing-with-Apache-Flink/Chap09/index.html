<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.16">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kay Haw&#39;s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kay Haw&#39;s Blog Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-rh="true">éƒ¨ç½²Flinkç¯å¢ƒ | Kay Haw&#x27;s Blog</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kayhaw.github.io/docs/Stream-Processing-with-Apache-Flink/Chap09"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="éƒ¨ç½²Flinkç¯å¢ƒ | Kay Haw&#x27;s Blog"><meta data-rh="true" name="description" content="Stream Processing with Apache Flink ç¬¬9ç« è¯»ä¹¦ç¬”è®°"><meta data-rh="true" property="og:description" content="Stream Processing with Apache Flink ç¬¬9ç« è¯»ä¹¦ç¬”è®°"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kayhaw.github.io/docs/Stream-Processing-with-Apache-Flink/Chap09"><link data-rh="true" rel="alternate" href="https://kayhaw.github.io/docs/Stream-Processing-with-Apache-Flink/Chap09" hreflang="en"><link data-rh="true" rel="alternate" href="https://kayhaw.github.io/docs/Stream-Processing-with-Apache-Flink/Chap09" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4bafb564.css">
<link rel="preload" href="/assets/js/runtime~main.b8f66f99.js" as="script">
<link rel="preload" href="/assets/js/main.a8d1eeac.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Kay Haw&#x27;s Blog" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="Kay Haw&#x27;s Blog" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Kay Haw&#x27;s Blog</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">è¯»ä¹¦ç¬”è®°</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kayhaw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ğŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ğŸŒ</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">è¯»ä¹¦ç¬”è®°</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/C++PrimerPlus/C++PrimerPlus-Chap04">C++PrimerPlus</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/EffectiveC++/Effective-C++-Chap1">EffectiveC++</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜/Java-Concurrency-in-Practice-Chap02">Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/Learning Akka/LearningAkka-Chap01">Learning Akka</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/Stream-Processing-with-Apache-Flink/Chap01">Stream Processing with Apache Flink</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Stream-Processing-with-Apache-Flink/Chap01">çŠ¶æ€æµå¤„ç†ç®€ä»‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Stream-Processing-with-Apache-Flink/Chap02">æµå¤„ç†åŸºç¡€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Stream-Processing-with-Apache-Flink/Chap03">Apache Flinkæ¶æ„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Stream-Processing-with-Apache-Flink/Chap04">Apache Flinkå¼€å‘ç¯å¢ƒæ­å»º</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Stream-Processing-with-Apache-Flink/Chap05">DataStream API(v.14.0)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Stream-Processing-with-Apache-Flink/Chap06">Time-Based and Window Operators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Stream-Processing-with-Apache-Flink/Chap07">Stateful Operators and Applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Stream-Processing-with-Apache-Flink/Chap08">è¯»å†™å¤–éƒ¨ç³»ç»Ÿ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Stream-Processing-with-Apache-Flink/Chap09">éƒ¨ç½²Flinkç¯å¢ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Stream-Processing-with-Apache-Flink/Chap10">è¿ç»´Flinkå’Œæµåº”ç”¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Stream-Processing-with-Apache-Flink/Chap11">ä½•å»ä½•ä»</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº/UnderstandJVM-Chap07">æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/é«˜æ€§èƒ½MySQL/HighPerformanceMySQL-Chap04">é«˜æ€§èƒ½MySQL</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">ğŸ </a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Stream Processing with Apache Flink</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/Stream-Processing-with-Apache-Flink/Chap09">éƒ¨ç½²Flinkç¯å¢ƒ</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>éƒ¨ç½²Flinkç¯å¢ƒ</h1></header><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p><em>Stream Processing with Apache Flink</em> ç¬¬9ç« è¯»ä¹¦ç¬”è®°</p></div></div><p>æœ¬ç« ä»‹ç»éƒ¨ç½²Flinkçš„ä¸åŒæ–¹å¼ä»¥åŠå¦‚ä½•é…ç½®ï¼ŒåŒ…æ‹¬æœ€é‡è¦çš„JobManagerå’ŒTaskManageré…ç½®ã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="éƒ¨ç½²æ¨¡å¼">éƒ¨ç½²æ¨¡å¼<a class="hash-link" href="#éƒ¨ç½²æ¨¡å¼" title="Direct link to heading">â€‹</a></h2><p>æœ¬èŠ‚ä»‹ç»å¦‚ä½•åœ¨ä¸åŒç¯å¢ƒä¸‹é…ç½®å’Œå¯åŠ¨Flinkï¼ŒåŒ…æ‹¬standaloneé›†ç¾¤ã€Dockerã€Apache Hadoop YARNå’ŒKubernetesã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="standaloneé›†ç¾¤">Standaloneé›†ç¾¤<a class="hash-link" href="#standaloneé›†ç¾¤" title="Direct link to heading">â€‹</a></h3><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œstandaloneé›†ç¾¤è‡³å°‘åŒ…å«ä¸€ä¸ªmasterè¿›ç¨‹å’Œè‡³å°‘ä¸€ä¸ªTaskManagerè¿›ç¨‹ã€‚</p><img style="width:60%;height:60%" src="/img/doc/Stream-Processing-with-Apache-Flink/chap09/Starting-a-Standalone-Flink-Cluster.png" title="Starting a Standalone Flink Cluster"><p>masterè¿›ç¨‹ä»¥åˆ†éš”çš„çº¿ç¨‹è¿è¡ŒDispatcherå’ŒResourceManagerï¼ŒéšåTaskManagerå°†è‡ªå·±ç™»è®°åˆ°ResourceManagerã€‚ä¸‹å›¾å±•ç¤ºä¸€ä¸ªä½œä¸šæ˜¯å¦‚ä½•æäº¤åˆ°standaloneé›†ç¾¤ä¸Šçš„ï¼š</p><p>Submitting-an-Application-to-a-Flink-Standalone-Cluster</p><img style="width:60%;height:60%" src="/img/doc/Stream-Processing-with-Apache-Flink/chap09/Submitting-an-Application-to-a-Flink-Standalone-Cluster.png" title="Submitting an Application to a Flink Standalone Cluster"><p>å½“å®¢æˆ·ç«¯å‘Dispatcheræäº¤ä»»åŠ¡ï¼ŒDispatcheræ–°å»ºä¸€ä¸ªJobManagerçº¿ç¨‹å¹¶æä¾›è¿è¡Œæ‰§è¡Œçš„JobGraphã€‚JobManagerå‘ResourceManagerè¯·æ±‚åˆ°slotèµ„æºåæ‰§è¡Œä»»åŠ¡ã€‚</p><p><strong>åœ¨standaloneæ¨¡å¼ä¸‹ï¼Œmasterå’Œworkreä¸ä¼šåœ¨é‡åˆ°æ•…éšœæ—¶è‡ªåŠ¨é‡å¯</strong>ï¼Œå•ä¸€workeræ•…éšœå¯ä»¥é€šè¿‡å…¶ä»–slotæ¢å¤ï¼Œä½†æ˜¯masteræ•…éšœæ¢å¤éœ€è¦é…ç½®é«˜å¯ç”¨æ¨¡å¼ã€‚</p><p>é…ç½®standaloneååˆ†ç®€å•ï¼šåœ¨å®˜ç½‘ä¸‹è½½å‹ç¼©åŒ…<code>flink-${flinkç‰ˆæœ¬å·}-bin-scala_${scalaç‰ˆæœ¬å·}.tgz</code>å¹¶è§£å‹ï¼Œè®°è§£å‹åFlinkç›®å½•è·¯å¾„ä¸º<code>${FLINK_HOME}</code>ã€‚è¿›å…¥<code>${FLINK_HOME}/bin</code>ç›®å½•è¿è¡Œstart-cluster.shè„šæœ¬å³å¯åŠ¨é›†ç¾¤ï¼ŒFlinké¢„é…ç½®ä¸ºéƒ½åœ¨æœ¬æœºè¿è¡Œçš„ä¸€ä¸ªmasterå’Œä¸€ä¸ªTaskManagerï¼Œé€šè¿‡<code>http://localhost:8081</code>è®¿é—®Flink Web UIã€‚Javaç¯å¢ƒé€šè¿‡ç³»ç»Ÿç¯å¢ƒå˜é‡<code>JAVA_HOME</code>æˆ–è€…<code>${FLINK_HOME}/conf/flink-conf.yaml</code>æ–‡ä»¶ä¸­çš„<code>env.java.home</code>é…ç½®é¡¹è®¾ç½®ã€‚</p><p>è¦æƒ³å°†é…ç½®è¿è¡Œåœ¨å¤šä¸ªæœºå™¨ä¸Šçš„Flinké›†ç¾¤ï¼Œéœ€è¦æŒ‰å¦‚ä¸‹æ­¥éª¤è°ƒæ•´é»˜è®¤é…ç½®ï¼š</p><ul><li>å°†æ·»åŠ çš„TaskManagerè¿è¡Œæœºå™¨ipæ·»åŠ åˆ°<code>${FLINK_HOME}/conf/slaves</code>æ–‡ä»¶ï¼›</li><li>å¯¹æ‰€æœ‰TaskManageræœºå™¨é…ç½®å…å¯†SSH</li><li><strong>æ‰€æœ‰æœºå™¨çš„${FLINK_HOME}å¿…é¡»ç›¸åŒ</strong>ï¼Œä¸€ä¼šå¸¸è§å®ç°æ–¹å¼æ˜¯åœ¨æ¯ä¸ªæœºå™¨ä¸ŠæŒ‚è½½ç½‘ç»œå…±äº«çš„Flinkç›®å½•</li><li>é€šè¿‡flink-conf.yamlæ–‡ä»¶çš„<code>jobmanager.rpc.address</code>é¡¹é…ç½®è¿è¡Œmasterçš„æœºå™¨ip</li></ul><p>ä»¥ä¸Šæ­¥éª¤å®Œæˆåï¼Œé‡æ–°æ‰§è¡Œstart-cluster.shè„šæœ¬å¯åŠ¨é›†ç¾¤ï¼Œæ­¤æ—¶æœ¬åœ°ä¼šå¯åŠ¨ä¸€ä¸ªJobManagerè¿›ç¨‹ï¼Œå¹¶ä¸”slavesä¸­é…ç½®çš„æ¯ä¸ªæœºå™¨éƒ½ä¼šè¿è¡Œä¸€ä¸ªTaskManagerè¿›ç¨‹ã€‚é€šè¿‡<code>stop-cluster.sh</code>è„šæœ¬å…³é—­é›†ç¾¤ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="docker">Docker<a class="hash-link" href="#docker" title="Direct link to heading">â€‹</a></h3><p>Dockeræ˜¯ä¸€ç§ä»¥å®¹å™¨å½¢å¼æ‰“åŒ…å’Œè¿è¡Œåº”ç”¨çš„å¹³å°ï¼ŒFlinkç¤¾åŒºåœ¨Docker Hubä¸Šæä¾›äº†Flinkå„ç‰ˆæœ¬é•œåƒã€‚åœ¨Dockerä¸­è¿è¡ŒFlinkååˆ†ç®€å•ï¼Œåªéœ€è¦å¯åŠ¨2ç§å®¹å™¨ï¼šè¿è¡ŒDispatcherå’ŒResourceManagerçš„masterå®¹å™¨ã€è¿è¡ŒTaskManagerçš„workerå®¹å™¨ã€‚å¯¹åº”çš„å¯åŠ¨å‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// start master process</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d --name flink-jobmanager </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">JOB_MANAGER_RPC_ADDRESS</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">jobmanager </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p </span><span class="token number" style="color:#36acaa">8081</span><span class="token plain">:8081 flink:1.7 jobmanager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// start worker process </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">adjust the name to start </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> than one TM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d --name flink-taskmanager-1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --link flink-jobmanager:jobmanager </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">JOB_MANAGER_RPC_ADDRESS</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">jobmanager flink:1.7 taskmanager</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ä»¥ä¸Šå‘½ä»¤é€šè¿‡JOB_MANAGER_RPC_ADDRESSç¯å¢ƒå˜é‡è®¾ç½®JobManageråœ°å€ï¼Œé€šè¿‡<code>-p 8081:8081</code>å‚æ•°å°†masterå®¹å™¨8081ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„8081ç«¯å£ï¼Œè¿™æ ·å®¿ä¸»æœºå¯ä»¥è®¿é—®Flink Web UIæ¥ä¸Šä¼ åº”ç”¨JARåŒ…å¹¶æ‰§è¡Œåº”ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>${FLINK_HOME}/bin/flink</code>å‘½ä»¤æäº¤ç®¡ç†åº”ç”¨ã€‚</p><p>é™¤äº†æ‰‹åŠ¨çš„å¯åŠ¨å¤šä¸ªå®¹å™¨æ¥éƒ¨ç½²Flinké›†ç¾¤ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºDocker Composeé…ç½®æ–‡ä»¶æ¥è‡ªåŠ¨é…ç½®å’Œå¯åŠ¨Flinké›†ç¾¤ï¼Œä½†éœ€è¦æ³¨æ„æŒ‡å®šç½‘ç»œé…ç½®ï¼Œè¯¦è§Flinkæ–‡æ¡£ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="apache-hadoop-yarn">Apache Hadoop YARN<a class="hash-link" href="#apache-hadoop-yarn" title="Direct link to heading">â€‹</a></h3><p>YARNæ˜¯Apache Hadoopä½“ç³»çš„èµ„æºç®¡ç†ç»„ä»¶ï¼Œå®ƒä»¥å®¹å™¨çš„å½¢å¼åˆ†é…èµ„æºè¿è¡Œåº”ç”¨ã€‚Flinkåœ¨YARNä¸Šä»¥2ç§æ¨¡å¼è¿è¡Œï¼šjobæ¨¡å¼å’Œsessionæ¨¡å¼ã€‚</p><p>Jobæ¨¡å¼ä¸‹Flinkä½œä¸šæ‰§è¡Œæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚YARNå¯åŠ¨ä¸€ä¸ªFlinké›†ç¾¤æ¥è¿è¡Œä¸€ä¸ªä½œä¸šï¼Œå½“ä½œä¸šç»ˆæ­¢åï¼ŒYARNä¼šåœæ­¢Flinké›†ç¾¤å¹¶å›æ”¶æ‰€æœ‰èµ„æºã€‚</p><img style="width:80%;height:80%" src="/img/doc/Stream-Processing-with-Apache-Flink/chap09/Starting-a-Flink-Cluster-on-YARN-in-Job-Mode.png" title="Starting a Flink Cluster on YARN in Job Mode"><p>Sessionæ¨¡å¼åˆ™ä¼šå¯åŠ¨ä¸€ä¸ªé•¿æœŸè¿è¡Œçš„Flinké›†ç¾¤ï¼Œè¯¥é›†ç¾¤å¯ä»¥è¿è¡Œå¤šä¸ªä½œä¸šä¸”éœ€è¦æ‰‹åŠ¨åœæ­¢ã€‚ä¸‹å›¾æ‰€ç¤ºä¸ºç©ºé—²æ—¶çš„Flink Sessionæ¨¡å¼ï¼š</p><img style="width:50%;height:50%" src="/img/doc/Stream-Processing-with-Apache-Flink/chap09/Starting-a-Flink-Cluster-on-YARN-in-Session-Mode.png" title="Starting a Flink Cluster on YARN in Session Mode"><p>å¦‚ä¸‹å›¾æ‰€ç¤ºä¸ºSessionæ¨¡å¼ä¸‹Flinkä½œä¸šæ‰§è¡Œæµç¨‹ã€‚å½“slotæ•°é‡ä¸è¶³æ—¶ï¼ŒFlinkçš„ResourceManagerå‘YARN ResourceManagerè¯·æ±‚åˆ†é…å®¹å™¨èµ„æºæ¥å¯åŠ¨TaskManagerã€‚</p><img style="width:80%;height:80%" src="/img/doc/Stream-Processing-with-Apache-Flink/chap09/Submitting-a-Job-to-a-Flink-YARN-Session-Cluster.png" title="Submitting a Job to a Flink YARN Session Cluster"><p>æ— è®ºæ˜¯Jobæ¨¡å¼è¿˜æ˜¯Sessionæ¨¡å¼ï¼Œè¿è¡Œå¤±è´¥çš„TaskManageréƒ½ä¼šè¢«ResourceManageré‡å¯ï¼Œè€Œæ¢å¤masterè¿›ç¨‹å¤±è´¥éœ€è¦<a href="/docs/Stream-Processing-with-Apache-Flink/Chap03/#%E9%AB%98%E5%8F%AF%E7%94%A8%E8%AE%BE%E7%BD%AE">é…ç½®é«˜å¯ç”¨</a>ã€‚å¦å¤–ï¼Œéœ€è¦<a href="#%E9%9B%86%E6%88%90hadoop%E7%BB%84%E4%BB%B6">é…ç½®Hadoopä¾èµ–</a>ã€‚</p><p>å½“é…ç½®å¥½YARNå’ŒHDFSåï¼Œä½¿ç”¨å‘½ä»¤ä»¥jobæ¨¡å¼è¿è¡Œä½œä¸šï¼š</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/flink run -m yarn-cluster ./path/to/job.jar</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ä»¥sessionæ¨¡å¼è¿è¡Œä½œä¸šï¼Œé¦–å…ˆè¦æ‰§è¡Œ<code>./bin/yarn-session.sh</code>å‘½ä»¤å¼€å¯Flink YARN sessionï¼Œç„¶åé€šè¿‡<code>./bin/flink run ./path/to/job.jar</code>è¿è¡Œä½œä¸šã€‚æ³¨æ„æ­¤æ—¶ä¸éœ€è¦æä¾›è¿æ¥ä¿¡æ¯ï¼Œå› ä¸ºFlinkè®°ä½äº†åœ¨YARNä¸Šè¿è¡Œçš„Flinkä¼šè¯çš„è¿æ¥è¯¦æƒ…ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="kubernetes">Kubernetes<a class="hash-link" href="#kubernetes" title="Direct link to heading">â€‹</a></h3><p>Kubernetes(K8S)æ˜¯ç”¨äºè‡ªåŠ¨éƒ¨ç½²ã€ç¼©æ”¾åŠç®¡ç†å®¹å™¨åŒ–åº”ç”¨çš„å¹³å°ï¼Œå…ˆä»‹ç»å‡ ä¸ªK8Sæœ¯è¯­ï¼š</p><ul><li><strong>pod</strong>ï¼šProcess Domainçš„ç¼©å†™ï¼Œè¡¨ç¤ºK8Sç®¡ç†çš„å®¹å™¨</li><li><strong>deployment</strong>ï¼šæŒ‡å®šç‰¹å®šæ•°é‡podçš„é…ç½®ï¼ŒK8Sç¡®ä¿æ‰€æœ‰podä¿æŒè¿è¡Œå¹¶è‡ªåŠ¨é‡å¯å¤±è´¥podï¼Œdeploymentå¯ä»¥æ‰©å¤§æˆ–ç¼©å°podæ•°é‡</li><li><strong>service</strong>ï¼šå®šä¹‰ä¸€ç»„podçš„è®¿é—®ç­–ç•¥ï¼Œç»´æŠ¤podè·¯ç”±</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>å°è´´å£«</h5></div><div class="admonition-content"><p>å¯ä»¥ä½¿ç”¨Minikubeä»£æ›¿K8Sï¼Œä½†éƒ¨ç½²Flinkæ—¶éœ€è¦è¿è¡Œå‘½ä»¤<code>minikube ssh &#x27;sudo ip link set docker0 promisc on&#x27;</code></p></div></div><p>ä½¿ç”¨K8Séƒ¨ç½²Flinkéœ€è¦ä¸¤ä¸ªdeploymentï¼Œåˆ†åˆ«ç”¨äºè¿è¡Œmasterè¿›ç¨‹å’Œworkerè¿›ç¨‹ã€‚å…¶ä¸­master deploymenté…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">master-deployment.yaml</div><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> extensions/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flink</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">component</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flink</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1.7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> jobmanager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rpc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6124</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> blob</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6125</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8081</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JOB_MANAGER_RPC_ADDRESS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flink</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">master</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¯¥deploymentæŒ‡å®šè¿è¡Œä¸€ä¸ªmasterå®¹å™¨(<code>replicas: 1</code>)ï¼Œè¿è¡ŒFlinké•œåƒç‰ˆæœ¬ä¸º1.7(<code>image: flink:1.7</code>)ï¼Œé€šè¿‡å‚æ•°å¯åŠ¨masterè¿›ç¨‹(<code>args: - jobmanager</code>)ï¼Œå¹¶ä¸”é…ç½®äº†4ä¸ªç«¯å£åˆ†åˆ«ç”¨äºRPCé€šä¿¡ã€BLOBç®¡ç†(äº¤æ¢å¤§æ–‡ä»¶)ã€çŠ¶æ€æŸ¥è¯¢æœåŠ¡ã€Web UI RESTæ¥å£ã€‚è€Œworker podé…ç½®å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">worker-deployment.yaml</div><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> extensions/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flink</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">component</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flink</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1.7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> taskmanager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6121</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6122</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rpc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6125</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JOB_MANAGER_RPC_ADDRESS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flink</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">master</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å‚æ•°åŸºæœ¬å’Œmasterç±»ä¼¼ï¼Œåªä¸è¿‡éƒ¨ç½²2ä¸ªå‰¯æœ¬ï¼Œé•œåƒç›¸åŒä½†æ˜¯å¯åŠ¨å‚æ•°ä¸åŒï¼Œå¹¶ä¸”è®¾ç½®master deploymentçš„serviceåç§°ï¼Œè¯¥serviceé…ç½®å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_BvAR">master-service.yaml</div><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flink</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rpc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> blob</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6124</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6125</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8081</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">component</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> master</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å°†å¦‚ä¸Šé…ç½®åˆ†åˆ«ä¿å­˜ä¸ºmaster-deployment.yamlã€worker-deployment.yamlå’Œmaster-service.yamlæ–‡ä»¶ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤æ³¨å†Œåˆ°K8Så®¹å™¨ï¼š</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create -f master-deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create -f worker-deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create -f master-service.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>é€šè¿‡<code>kubectl get deployments</code>å‘½ä»¤è·å–æ‰€æœ‰deploymentçŠ¶æ€ã€‚ç”±äºä¸Šè¿°é…ç½®å¹¶æ²¡æœ‰å¯¹å¤–æš´éœ²ä»»ä½•ç«¯å£ï¼Œéœ€è¦é€šè¿‡<code>kubectl port-forward deployment/flink-master 8081:8081</code>å‘½ä»¤å¼€å¯ç«¯å£è½¬å‘ï¼Œç„¶åé€šè¿‡<a href="http://localhost:8081" target="_blank" rel="noopener noreferrer">http://localhost:8081</a>è®¿é—®Flink Web UIã€‚</p><p>ç”±äºK8Sä¼šè‡ªåŠ¨é‡å¯æ•…éšœçš„worker podï¼Œå†é…åˆæ£€æŸ¥ç‚¹å°±å¯ä»¥å®ç°åº”ç”¨æ•…éšœæ¢å¤ã€‚è€Œå½“master podå‘ç”Ÿæ•…éšœï¼Œéœ€è¦é…ç½®é«˜å¯ç”¨(è§ä¸‹ä¸€å°èŠ‚)æ¥æ¢å¤ã€‚é€šè¿‡å¦‚ä¸‹å‘½ä»¤å…³é—­Flinké›†ç¾¤ï¼š</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete -f master-deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete -f worker-deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete -f master-service.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>æ³¨æ„</h5></div><div class="admonition-content"><p>é€šè¿‡å®˜æ–¹æä¾›çš„Flink Dockeré•œåƒæ¥å®šåˆ¶Flinkéƒ¨ç½²é…ç½®æ˜¯ä¸å¯è¡Œçš„ï¼Œéœ€è¦è‡ªå®šä¹‰buildè„šæœ¬æ¥åˆ›å»ºæ‰€éœ€çš„Flink Dockeré•œåƒã€‚</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="é«˜å¯ç”¨è®¾ç½®">é«˜å¯ç”¨è®¾ç½®<a class="hash-link" href="#é«˜å¯ç”¨è®¾ç½®" title="Direct link to heading">â€‹</a></h2><p>å¤§å¤šæ•°æµåº”ç”¨åœ¨ç†æƒ³æƒ…å†µä¸‹ä¸€ç›´æ‰§è¡Œï¼Œå› æ­¤éœ€è¦èƒ½è‡ªåŠ¨åœ°ä»æ•…éšœä¸­æ¢å¤ã€‚Workeræ•…éšœç”±ResourceManagerå¤„ç†ï¼Œè€ŒJobManageræ•…éšœéœ€è¦é…ç½®é«˜å¯ç”¨(Highly Available, HA)ã€‚</p><p>JobManageræŒæœ‰åº”ç”¨çš„å…ƒæ•°æ®ï¼Œå¦‚åº”ç”¨JARåŒ…ã€JobGraphã€ä¿å­˜æ£€æŸ¥ç‚¹çš„æŒ‡é’ˆç­‰ï¼Œè¿™äº›ä¿¡æ¯éœ€è¦ä»masteræ•…éšœä¸­æ¢å¤ã€‚Flinkçš„HAæ¨¡å¼ä¾èµ–äºApache ZooKeeperå’ŒæŒä¹…åŒ–å­˜å‚¨æœåŠ¡(HDFSã€NFSã€æˆ–S3ç­‰)ï¼Œè¯¦è§<a href="/docs/Stream-Processing-with-Apache-Flink/Chap03/#%E9%AB%98%E5%8F%AF%E7%94%A8%E8%AE%BE%E7%BD%AE">é«˜å¯ç”¨é…ç½®</a>ã€‚ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·è°ƒè¯•ï¼ŒFlinkæä¾›<code>${FLINK_HOME}/bin/start-zookeeper-quorum.sh</code>è„šæœ¬å¿«é€Ÿå¯åŠ¨ZooKeeperé›†ç¾¤ï¼Œå‰ææ˜¯åœ¨<code>${FLINK_HOME}/conf/zoo.cfg</code>ä¸­é…ç½®å¥½ZooKeeperçš„åœ°å€å’Œç«¯å£å·ã€‚</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>æ³¨æ„</h5></div><div class="admonition-content"><p>åˆ«ç›´æ¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨Flinkæä¾›çš„ZooKeeperè„šæœ¬ï¼Œè€Œæ˜¯å¦å¤–ç»´æŠ¤ä¸€ä¸ªZooKeeperé›†ç¾¤ã€‚</p></div></div><p>åœ¨<code>${FLINK_HOME}/conf/flink-conf.yaml</code>é€šè¿‡å¦‚ä¸‹å‚æ•°é…ç½®é«˜å¯ç”¨æ¨¡å¼ï¼š</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># å¿…å¡«é¡¹ï¼Œä½¿ç”¨ZooKeeperå¼€å¯é«˜å¯ç”¨æ¨¡å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">high-availability</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> zookeeper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># å¿…å¡«é¡¹ï¼ŒZooKeeperä»²è£serveråœ°å€åˆ—è¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">high-availability.zookeeper.quorum</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> address1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">2181</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">addressX</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">2181</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># å¿…å¡«é¡¹ï¼Œå…ƒæ•°æ®å­˜æ”¾è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">high-availability.storageDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hdfs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">///flink/recovery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æ¨èé¡¹ï¼ŒZooKeeperä¸­Flinké›†ç¾¤åŸºç¡€è·¯å¾„ï¼Œå°†Flinkå’Œå…¶ä»–ä½¿ç”¨ZooKeeperçš„æ¡†æ¶éš”ç¦»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">high-availability.zookeeper.path.root</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /flink</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="é«˜å¯ç”¨standaloneæ¨¡å¼è®¾ç½®">é«˜å¯ç”¨Standaloneæ¨¡å¼è®¾ç½®<a class="hash-link" href="#é«˜å¯ç”¨standaloneæ¨¡å¼è®¾ç½®" title="Direct link to heading">â€‹</a></h3><p>Standaloneæ¨¡å¼ä¸ä¾èµ–èµ„æºæä¾›æ–¹å¦‚YARNæˆ–è€…K8Sï¼Œæ‰€æœ‰è¿›ç¨‹éƒ½æ˜¯æ‰‹åŠ¨å¼€å¯ä¸”æ²¡æœ‰ç›‘æ§ã€é‡å¯å®ƒä»¬çš„ç»„ä»¶ï¼Œå› æ­¤Flink standaloneé›†ç¾¤éœ€è¦å¤‡ç”¨çš„Dispatcherå’ŒTaskManagerè¿›ç¨‹æ¥æ¥ç®¡å¤±è´¥è¿›ç¨‹ã€‚</p><p>é™¤äº†å¯åŠ¨å¤‡ç”¨TaskManagerå¤–ï¼Œstandaloneéƒ¨ç½²ä¸éœ€è¦å…¶ä»–é¢å¤–é…ç½®æ¥è®©TaskManagerä»æ•…éšœä¸­æ¢å¤ã€‚æ‰€æœ‰å¯åŠ¨çš„TaskManagerç™»è®°åˆ°ResourceManagerï¼Œé€šè¿‡å¤‡ç”¨TaskManagerå¼¥è¡¥æ•…éšœTaskManageræ¥æ¢å¤åº”ç”¨ã€‚</p><p>å½“é…ç½®é«˜å¯ç”¨åï¼Œæ‰€æœ‰Dispatcherç™»è®°åˆ°ZooKeeperå¹¶ä¸”ç”±ZooKeeperé€‰ä¸¾leader Dispatcheræ¥è¿è¡Œåº”ç”¨ã€‚å½“masterè¿›ç¨‹å‘ç”Ÿæ•…éšœï¼Œç”±ZooKeeperé‡æ–°é€‰ä¸¾æ–°çš„leader Dispatcherè¿›è¡Œæ•…éšœæ¢å¤ã€‚</p><p>é™¤äº†ä¹‹å‰æåˆ°çš„é…ç½®å¤–ï¼Œå¼€å¯é«˜å¯ç”¨standaloneæ¨¡å¼é…ç½®éœ€è¦åœ¨<code>${FLINK_HOME}/conf/flink-conf.yaml</code>ä¸­è®¾ç½®å¦‚ä¸‹å‚æ•°ï¼š</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># æ¨èé¡¹ï¼Œè®¾ç½®ZooKeeperä¸­Flinké›†ç¾¤çš„è·¯å¾„ï¼ŒåŒºåˆ†ä¸åŒçš„Flinké›†ç¾¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœå¤šä¸ªFlinké›†ç¾¤ä½¿ç”¨åŒä¸€ä¸ªZooKeeperå®ä¾‹æ—¶å¿…é¡»è®¾ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">high-availability.cluster-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /cluster</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æ¥ç€åœ¨<code>${FLINK_HOME}/conf/master</code>æ–‡ä»¶ä¸­æ·»åŠ ä¸»æœºå’Œç«¯å£ï¼Œç„¶åä½¿ç”¨<code>start.sh</code>è„šæœ¬å¯åŠ¨é«˜å¯ç”¨standaloneé›†ç¾¤ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="é«˜å¯ç”¨yarnè®¾ç½®">é«˜å¯ç”¨YARNè®¾ç½®<a class="hash-link" href="#é«˜å¯ç”¨yarnè®¾ç½®" title="Direct link to heading">â€‹</a></h3><p>YARNæ˜¯ä¸€ç§é›†ç¾¤èµ„æºå’Œå®¹å™¨çš„ç®¡ç†å™¨ï¼Œé»˜è®¤é‡å¯å¤±è´¥çš„å®¹å™¨ï¼Œå› æ­¤ä¸éœ€è¦è¿è¡Œå¤‡ç”¨çš„è¿›ç¨‹æ¥å®ç°é«˜å¯ç”¨ã€‚Flinkçš„masterè¿›ç¨‹ä½œä¸ºYARN ApplicationMaterå¯åŠ¨ï¼ŒYARNè‡ªåŠ¨é‡å¯å¤±è´¥çš„ApplicationMaterä½†ä½†éœ€è¦é…ç½®é‡å¯çš„æœ€å¤§æ¬¡æ•°æ¥é˜²æ­¢æ— é™é‡å¯ï¼Œè¿™é€šè¿‡ä¿®æ”¹<code>yarn-site.xml</code>æ–‡ä»¶å®ç°ï¼š</p><div class="codeBlockContainer_I0IT language-xml theme-code-block"><div class="codeBlockContent_wNvx xml"><pre tabindex="0" class="prism-code language-xml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">yarn.resourcemanager.am.max-attempts</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">4</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">description</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The maximum number of application master execution attempts.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Default value is 2, i.e., an application is restarted at most once.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">description</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æ­¤å¤–ï¼Œè¿˜éœ€è¦ä¿®æ”¹flink-conf.yamlä¸­åº”ç”¨é‡å¯æ¬¡æ•°å‚æ•°ï¼Œè¯¥å‚æ•°å¿…é¡»å°äºç­‰äºyarn-site.xmlé…ç½®çš„é‡å¯æ¬¡æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># é‡å¯åº”ç”¨æœ€å¤š3æ¬¡(åŒ…å«åˆå§‹åŒ–å¯åŠ¨1æ¬¡)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">yarn.application-attempts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>YARNåªç»Ÿè®¡ç”±äºåº”ç”¨å¤±è´¥å¯¼è‡´çš„é‡å¯æ¬¡æ•°ï¼Œå…¶ä»–æƒ…å†µå¦‚æŠ¢å ã€ç¡¬ä»¶æ•…éšœæˆ–è€…ä¸»æœºé‡å¯å¯¼è‡´éƒ½ä¸ä¼šè®¡ç®—åˆ°é‡å¯æ¬¡æ•°ä¸­ã€‚å½“ä½¿ç”¨YARN 2.6+ç‰ˆæœ¬ï¼ŒFlinkè¿˜ä¼šè‡ªåŠ¨é…ç½®ä¸€ä¸ªæœ‰æ•ˆå°è¯•é—´éš”å‚æ•°ï¼šåªæœ‰åœ¨é—´éš”æ—¶é—´å†…è¾¾åˆ°é‡å¯æ¬¡æ•°æ‰ä¼šå®Œå…¨å–æ¶ˆåº”ç”¨ã€‚Flinkå°†é—´éš”å‚æ•°è®¾ç½®ä¸ºå’Œconf.yamlæ–‡ä»¶ä¸­çš„akka.ask.timeoutå‚æ•°ç›¸åŒï¼Œé»˜è®¤10sã€‚</p><p>åœ¨é…ç½®å¥½YARNå’ŒFlinkåï¼Œæ‰§è¡Œ<code>${FLINK_HOME}/bin/flink run -m yarn-cluster</code>å‘½ä»¤ä»¥jobæ¨¡å¼å¯åŠ¨Flinké›†ç¾¤ï¼Œæˆ–è€…é€šè¿‡<code>${FLINK_HOME}/bin/yarn-session.sh</code>ä»¥sessionæ¨¡å¼å¯åŠ¨Flinké›†ç¾¤ã€‚<strong>å½“ä»¥sessionæ¨¡å¼å¯åŠ¨Flinké›†ç¾¤ï¼Œéœ€è¦ä¸ºæ¯ä¸ªé›†ç¾¤æŒ‡å®šä¸åŒçš„idï¼Œè€Œjobæ¨¡å¼ä¸‹é›†ç¾¤idè‡ªåŠ¨è®¾ç½®ä¸ºåº”ç”¨idï¼Œå› æ­¤ä¸ä¼šé‡å¤ã€‚</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="é«˜å¯ç”¨k8sè®¾ç½®">é«˜å¯ç”¨K8Sè®¾ç½®<a class="hash-link" href="#é«˜å¯ç”¨k8sè®¾ç½®" title="Direct link to heading">â€‹</a></h3><p>åœ¨æŒ‰ç…§<a href="#kubernetes">Kubernetes</a>ä¸€èŠ‚éƒ¨ç½²è¿è¡ŒFlinké›†ç¾¤åï¼ŒK8Sä¼šè‡ªåŠ¨é‡å¯æ•…éšœå®¹å™¨ï¼Œè¿™è¶³ä»¥å¤„ç†workeræ•…éšœæ¢å¤ï¼Œè€Œå¤„ç†masteræ•…éšœéœ€è¦é¢å¤–é…ç½®ã€‚æ­£å¦‚ä¹‹å‰æåˆ°çš„ï¼Œéœ€è¦ä¿®æ”¹Flinkä¸€äº›é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚ZooKeeperèŠ‚ç‚¹åœ°å€ï¼ŒæŒä¹…åŒ–å­˜å‚¨è·¯å¾„å’Œé›†ç¾¤idã€‚å¹¶ä¸”å®˜æ–¹æä¾›çš„Flinké•œåƒä¸èƒ½è‡ªå®šä¹‰é…ç½®ï¼Œéœ€è¦è‡ªå·±æ„å»ºé•œåƒã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="é›†æˆhadoopç»„ä»¶">é›†æˆHadoopç»„ä»¶<a class="hash-link" href="#é›†æˆhadoopç»„ä»¶" title="Direct link to heading">â€‹</a></h2><p>Flinkå¯ä»¥è½»æ¾åœ°é›†æˆHadoopç»„ä»¶å¦‚YARNã€HDFSä»¥åŠHadoopç”Ÿæ€ç»„ä»¶å¦‚HBaseï¼Œæ­¤æ—¶Flinkéœ€è¦å…¶ç±»è·¯å¾„ä¸Šå­˜åœ¨è¿™äº›Hadoopä¾èµ–ï¼Œæœ‰3ç§æ–¹å¼å¯ä»¥ä¸ºFlinkæä¾›Hadoopä¾èµ–ï¼š</p><ol><li>ä½¿ç”¨Flinkå®˜æ–¹ä¸ºç‰¹å®šç‰ˆæœ¬Hadoopæ„å»ºçš„äºŒè¿›åˆ¶å‘è¡Œç‰ˆ</li><li>è‡ªè¡Œä¸ºç‰¹å®šç‰ˆæœ¬Hadoopæ„å»ºFlink</li></ol><p>å¯èƒ½å®˜æ–¹æä¾›çš„å‘è¡Œç‰ˆä¸èƒ½é€‚é…å½“å‰éƒ¨ç½²çš„Hadoopæ—¶ï¼Œæ¯”å¦‚Hadoopç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œæˆ–è€…å½“å‰ä½¿ç”¨å…¶ä»–å‘è¡Œå•†ç‰ˆæœ¬çš„Hadoop(ä¾‹å¦‚Clouderaçš„CDH)ã€‚æ­¤æ—¶éœ€è¦ä¸‹è½½æºç è‡ªè¡Œç¼–è¯‘Flinkè‡ªè¡Œç¼–è¯‘ï¼Œç„¶åè¿›å…¥æºç ç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä¹‹ä¸€ï¼š</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// ä¸ºç‰¹å®šç‰ˆæœ¬çš„Apache Hadoopæ„å»ºFlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn clean </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -DskipTests -Dhadoop.version</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.6</span><span class="token plain">.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä¸ºç‰¹å®šç‰ˆæœ¬çš„å…¶ä»–å‘è¡Œå•†Hadoopæ„å»ºFlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn clean </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -DskipTests -Pvendor-repos -Dhadoop.version</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.6</span><span class="token plain">.1-cdh5.0.0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æ„å»ºå¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶åœ¨<code>build-target</code>ç›®å½•ä¸‹ã€‚</p><ol start="3"><li>ä½¿ç”¨Hadoopæ— å…³çš„Flinkå‘è¡Œç‰ˆï¼Œç„¶åæ‰‹åŠ¨é…ç½®<code>HADOOP_CLASSPATH</code>ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚<code>export HADOOP_CLASSPATH=`hadoop classpath` </code></li></ol><p>å¤„ç†é…ç½®Hadoopä¾èµ–è·¯å¾„å¤–ï¼Œ<strong>è¿˜éœ€è¦æä¾›Hadoopé…ç½®æ–‡ä»¶è·¯å¾„</strong>ï¼Œé€šè¿‡<code>HADOOP_CONF_DIR</code>(â¤ï¸ä¼˜å…ˆ)æˆ–è€…<code>HADOOP_CONF_PATH</code>ç¯å¢ƒå˜é‡æŒ‡å®šï¼Œè¿™æ ·Flinkå¯ä»¥è¿æ¥åˆ°YARNå’ŒHDFSæœåŠ¡ã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="æ–‡ä»¶ç³»ç»Ÿè®¾ç½®">æ–‡ä»¶ç³»ç»Ÿè®¾ç½®<a class="hash-link" href="#æ–‡ä»¶ç³»ç»Ÿè®¾ç½®" title="Direct link to heading">â€‹</a></h2><p>Flinkåœ¨è®¸å¤šæƒ…å†µä¸‹éƒ½ç”¨åˆ°æ–‡ä»¶ç³»ç»Ÿï¼šæ¯”å¦‚æ–‡ä»¶ç³»ç»Ÿsourceè¿æ¥å™¨ã€åº”ç”¨æ£€æŸ¥ç‚¹ä¿å­˜ã€åˆ†å‘åº”ç”¨JARåŒ…ç­‰ã€‚ç”±äºå…¶åˆ†å¸ƒå¼ç‰¹æ€§ï¼ŒFlinkä¹Ÿè¦æ±‚æ–‡ä»¶ç³»ç»Ÿèƒ½å¤Ÿå…¨å±€è®¿é—®ï¼Œå¸¸ç”¨çš„æœ‰HDFSã€S3å’ŒNFSã€‚Flinkä½¿ç”¨<code>org.apache.flink.core.fs.FileSystem</code>ç±»è¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæä¾›é€šç”¨çš„æ–‡ä»¶æ“ä½œï¼šè¯»å†™æ–‡ä»¶ã€åˆ›å»ºæ–‡ä»¶å¤¹ã€åˆ—å‡ºæ–‡ä»¶å¤¹å†…å®¹åˆ—è¡¨ç­‰ã€‚æ¯ä¸ªJobManageræˆ–TaskMangerå®ä¾‹åŒ–ä¸€ä¸ªFileSystemå¯¹è±¡ç„¶åå…±äº«ç»™æœ¬åœ°æ‰€æœ‰ä»»åŠ¡ï¼Œä»¥æ­¤ç¡®ä¿çº¦æŸé…ç½®(å¦‚å¯¹æ‰“å¼€è¿æ¥æ•°é‡çš„é™åˆ¶)ç”Ÿæ•ˆã€‚</p><p>Flinkæä¾›äº†å¦‚ä¸‹å¸¸ç”¨æ–‡ä»¶ç³»ç»Ÿçš„å®ç°ï¼š</p><ol><li><strong>æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</strong>ï¼šFlinkå†…ç½®æ”¯æŒæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬æœ¬åœ°æŒ‚è½½çš„ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ(NFSæˆ–SANç­‰)ï¼Œä¸éœ€è¦é¢å¤–é…ç½®ï¼Œè®¿é—®è·¯å¾„æ ¼å¼ä¸º<code>file://&lt;URI&gt;</code>ï¼›</li><li><strong>Hadoop HDFS</strong>ï¼šéœ€è¦é…ç½®Hadoopä¾èµ–ï¼Œè§ä¸Šä¸€å°èŠ‚ï¼Œè®¿é—®è·¯å¾„æ ¼å¼ä¸º<code>hdfs://&lt;URI&gt;</code>;</li><li><strong>Amazon S3</strong>ï¼šFlinkåŸºäºApache Hadoopå’ŒPrestoå®ç°äº†2ç§è®¿é—®S3çš„è¿æ¥å™¨ï¼Œéœ€è¦å°†ä½äºoptæ–‡ä»¶å¤¹ä¸‹çš„<code>flink-s3-fs-hadoop-${version}.jar</code>å’Œ<code>flink-s3-fs-presto-${version}.jar</code>ç§»åˆ°libæ–‡ä»¶å¤¹ä¸­ï¼Œè®¿é—®æ ¼å¼ä¸º<code>s3://&lt;URI&gt;</code>ï¼›</li><li><strong>OpenStack Swift FS</strong>ï¼šFlinkåŸºäºApache Hadoopå®ç°Swift FSè¿æ¥å™¨ï¼Œéœ€è¦å°†optæ–‡ä»¶å¤¹ä¸‹çš„<code>flink-swift-fs-hadoop-${version}.jar</code>ç§»åˆ°libæ–‡ä»¶å¤¹ä¸­ï¼Œè®¿é—®æ ¼å¼ä¸º<code>swift://&lt;URI&gt;</code>ã€‚</li></ol><p>å¯¹äºå…¶ä»–æœªåˆ—å‡ºçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé€šè¿‡æ­£ç¡®é…ç½®ï¼ŒFlinkå¯ä»¥å§”æ‰˜HDFSè¿æ¥å™¨æ¥è®¿é—®ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆFlinkèƒ½æ”¯æŒæ‰€æœ‰HCFS(Hadoop-compatible file systems)ã€‚åœ¨conf.yamlä¸­å¯é…ç½®çš„æ–‡ä»¶ç³»ç»Ÿç›¸å…³å‚æ•°å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>fs.default-scheme</code></td><td><code>file://</code></td><td>é»˜è®¤æ–‡ä»¶ç³»ç»Ÿå‰ç¼€</td></tr><tr><td><code>fs.&lt;scheme&gt;.limit.total</code></td><td>æ— </td><td>ç‰¹å®šschemeæ–‡ä»¶ç³»ç»Ÿçš„è¿æ¥æ€»æ•°é™åˆ¶ï¼Œ0æˆ–-1è¡¨ç¤ºæ— é™åˆ¶</td></tr><tr><td><code>fs.&lt;scheme&gt;.limit.input</code></td><td>æ— </td><td>ç‰¹å®šschemeæ–‡ä»¶ç³»ç»Ÿçš„è¯»è¿æ¥æ•°é™åˆ¶ï¼Œ0æˆ–-1è¡¨ç¤ºæ— é™åˆ¶</td></tr><tr><td><code>fs.&lt;scheme&gt;.limit.output</code></td><td>æ— </td><td>ç‰¹å®šschemeæ–‡ä»¶ç³»ç»Ÿçš„å†™è¿æ¥æ•°é™åˆ¶ï¼Œ0æˆ–-1è¡¨ç¤ºæ— é™åˆ¶</td></tr><tr><td><code>fs.&lt;scheme&gt;.limit.timeout</code></td><td>æ— </td><td>ç‰¹å®šschemeæ–‡ä»¶ç³»ç»Ÿçš„è¿æ¥è¶…æ—¶é™åˆ¶ï¼Œå•ä½æ¯«ç§’ï¼Œ0è¡¨ç¤ºæ— é™åˆ¶</td></tr><tr><td><code>fs.&lt;scheme&gt;.limit.stream-timeout</code></td><td>æ— </td><td>ç‰¹å®šschemeæ–‡ä»¶ç³»ç»Ÿçš„é™åˆ¶æ—¶é—´é™åˆ¶ï¼Œå•ä½æ¯«ç§’ï¼Œ0è¡¨ç¤ºæ— é™åˆ¶</td></tr></tbody></table><p>è‡ªå®šä¹‰æ–‡ä»¶ç³»ç»Ÿå®ç°è¯¦è§å®˜æ–¹æ–‡æ¡£<a href="https://nightlies.apache.org/flink/flink-docs-stable/docs/deployment/filesystems/overview/#adding-a-new-pluggable-file-system-implementation" target="_blank" rel="noopener noreferrer">Adding a new pluggable File System implementation</a>ã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="ç³»ç»Ÿé…ç½®">ç³»ç»Ÿé…ç½®<a class="hash-link" href="#ç³»ç»Ÿé…ç½®" title="Direct link to heading">â€‹</a></h2><p>Flinkæä¾›äº†è®¸å¤šå‚æ•°æ¥é…ç½®è¡Œä¸ºå’Œè°ƒæ•´æ€§èƒ½ï¼Œæ‰€æœ‰å‚æ•°åœ¨<code>${FLINK_HOME}/conf/flink-conf.yaml</code>ä¸­ä»¥é”®å€¼å¯¹çš„å½¢å¼è®¾ç½®ã€‚è¯¥é…ç½®æ–‡ä»¶ä¼šè¢«ä¸åŒç»„ä»¶ä½¿ç”¨ï¼Œæ¯”å¦‚é›†ç¾¤å¯åŠ¨è„šæœ¬<code>/bin/start-cluster.sh</code>ä¼šè¯»å–JVMå‚æ•°é…ç½®ï¼ŒCLIå®¢æˆ·ç«¯<code>/bin/flink</code>ä¼šè¯»å–è¿æ¥åˆ°masterè¿›ç¨‹çš„è¿æ¥ä¿¡æ¯ï¼Œ<strong>ä¿®æ”¹é…ç½®æ–‡ä»¶éœ€è¦é‡å¯Flinké›†ç¾¤</strong>ã€‚</p><p>ä¸ºäº†è®©Flinkå¼€ç®±å³ç”¨ï¼Œflink-conf.yamlæ–‡ä»¶é¢„é…ç½®ä¸ºæœ¬åœ°å¯åŠ¨Flinkï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹éœ€è¦è°ƒæ•´é…ç½®ã€‚æœ¬èŠ‚ä»‹ç»æ­å»ºFlinké›†ç¾¤éœ€è¦çš„é…ç½®ï¼Œæ›´å¤šé…ç½®è§<a href="https://nightlies.apache.org/flink/flink-docs-stable/docs/deployment/config/" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="javaç¯å¢ƒå’Œç±»åŠ è½½">Javaç¯å¢ƒå’Œç±»åŠ è½½<a class="hash-link" href="#javaç¯å¢ƒå’Œç±»åŠ è½½" title="Direct link to heading">â€‹</a></h3><p>Flinké»˜è®¤ä»<code>PATH</code>ç¯å¢ƒå˜é‡ä¸­æ‰¾åˆ°javaç¨‹åºæ¥å¯åŠ¨è¿›ç¨‹ï¼Œå¦‚æœ<code>PATH</code>ç¯å¢ƒå˜é‡ä¸­ä¸å­˜åœ¨Javaæˆ–è€…æƒ³è¦æ¢ä¸ªJavaç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡<code>JAVA_HOME</code>ç¯å¢ƒå˜é‡æˆ–è€…flink-conf.yamlä¸­çš„<code>env.java.home</code>å‚æ•°æŒ‡å®šã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¯ä»¥é€šè¿‡<code>env.java.opts</code>ã€<code>env.java.opts.jobmanager</code>ä»¥åŠ<code>env.java.opts.taskmanager</code>è®¾ç½®å¯åŠ¨è¿›ç¨‹çš„JVMå‚æ•°ã€‚</p><p>å½“è¿è¡Œå¸¦æœ‰å¤–éƒ¨ä¾èµ–çš„ä½œä¸šæ—¶ï¼Œç±»åŠ è½½é—®é¢˜å¹¶ä¸å°‘è§ã€‚Flinkå°†æ¯ä¸ªä½œä¸šçš„ä¾èµ–ç±»ç™»è®°åˆ°åˆ†éš”çš„ç”¨æˆ·åŠ è½½å™¨ä¸­ï¼Œç¡®ä¿ä½œä¸šä¹‹é—´çš„ä¾èµ–äº’ä¸å½±å“ï¼Œä¹Ÿä¸å½±å“Flinkè¿è¡Œæ—¶ï¼Œå½“ä½œä¸šç»“æŸåç”¨æˆ·åŠ è½½å™¨ä¹Ÿä¼šè¢«é”€æ¯ã€‚Flinkç³»ç»ŸåŠ è½½å™¨ä»<code>${FLINK_HOME}/lib</code>æ–‡ä»¶å¤¹ä¸­åŠ è½½æ‰€æœ‰JARåŒ…ï¼Œè€Œç”¨æˆ·ç±»åŠ è½½å™¨æ´¾ç”Ÿè‡ªç³»ç»ŸåŠ è½½å™¨ã€‚</p><p>FlinkåŠ è½½ç±»é¡ºåºç”±å‚æ•°<code>classloader.resolve-order</code>æŒ‡å®šï¼Œé»˜è®¤ä¸º<code>child-first</code> ï¼Œå³Flinkå…ˆé€šè¿‡ç”¨æˆ·ç±»åŠ è½½å™¨è§£æä¾èµ–ç±»ç„¶åé€šè¿‡ç³»ç»ŸåŠ è½½å™¨è§£æï¼Œé¿å…åº”ç”¨ä½¿ç”¨å’ŒFlinkç›¸åŒçš„ä¾èµ–ä½†æ˜¯ç‰ˆæœ¬ä¸åŒçš„å†²çªã€‚å°†è¯¥å‚æ•°è®¾ç½®ä¸º<code>parent-first</code>ï¼Œåˆ™é¡ºåºç›¸åã€‚</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>æ³¨æ„</h5></div><div class="admonition-content"><p>ç”±<code>classloader.parent-first-patterns.default</code>æŒ‡å®šçš„ç±»æ€»æ˜¯ç”±ç³»ç»Ÿç±»åŠ è½½å™¨è§£æï¼Œé€šè¿‡<code>classloader.parent-first-patterns.additional</code>æ¥æ·»åŠ æ›´å¤šè¿™æ ·çš„ç±»</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="cpu">CPU<a class="hash-link" href="#cpu" title="Direct link to heading">â€‹</a></h3><p>Flinkå¹¶ä¸ä¼šä¸»åŠ¨é™åˆ¶å…¶CPUèµ„æºä½¿ç”¨ï¼Œä½†ä¼šé€šè¿‡slotæ¥æ§åˆ¶ä»»åŠ¡æ•°é‡ã€‚æ¯ä¸ªæ§½å¯ä»¥æ‰§è¡Œåº”ç”¨ç®—å­çš„ä¸€ä¸ªå¹¶è¡Œä»»åŠ¡ï¼Œå› æ­¤ä¸€ä¸ªåº”ç”¨æ‰€éœ€è¦çš„slotæ•°é‡è‡³å°‘ç­‰äºå…¶æ‰€æœ‰ç®—å­çš„æœ€å¤§å¹¶è¡Œåº¦ã€‚ä»»åŠ¡åœ¨TaskManagerè¿›ç¨‹å†…ä»¥çº¿ç¨‹å½¢å¼æ‰§è¡Œï¼Œå¹¶ä¸”å°½é‡å ç”¨å…¶æ‰€è·å¾—çš„èµ„æºã€‚</p><p>é€šè¿‡å‚æ•°<code>taskmanager.numberOfTaskSlots</code>è®¾ç½®æ¯ä¸ªTaskManageræä¾›çš„slotæ•°é‡ï¼Œé»˜è®¤ä¸º1ã€‚<strong>slotæ•°é‡é€šå¸¸åªéœ€è¦åœ¨standaloneæ¨¡å¼ä¸‹é…ç½®ï¼Œåœ¨é›†ç¾¤èµ„æºç®¡ç†å™¨ä¸Šè¿è¡ŒFlinkæ—¶å¯ä»¥å¯åŠ¨å¾ˆå®¹æ˜“åœ°åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šç©¹é¡¶å¤šä¸ªTaskManager(slotæ•°é‡ä¸º1)ã€‚</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="å†…å­˜å’Œç½‘ç»œç¼“å†²">å†…å­˜å’Œç½‘ç»œç¼“å†²<a class="hash-link" href="#å†…å­˜å’Œç½‘ç»œç¼“å†²" title="Direct link to heading">â€‹</a></h3><p>Flinkçš„masterå’Œworkerè¿›ç¨‹æœ‰ç€ä¸åŒçš„å†…å­˜éœ€æ±‚ï¼Œå‰è€…ç®¡ç†è®¡ç®—èµ„æºå¹¶åè°ƒåº”ç”¨æ‰§è¡Œï¼Œè€Œåè€…å¤„ç†æ½œåœ¨çš„å¤§é‡æ•°æ®ã€‚å› æ­¤ï¼Œmasterè¿›ç¨‹çš„å†…å­˜æ¶ˆè€—å¤„äºä¸­ç­‰ï¼Œé€šè¿‡<code>jobmanager.heap.size</code>é…ç½®å…¶å †å†…å­˜(é»˜è®¤1GB)ã€‚</p><p>Workerè¿›ç¨‹çš„å†…å­˜è®¾ç½®æ›´åŠ å¤æ‚ï¼Œæœ€é‡è¦çš„å †å¤§å°é€šè¿‡<code>taskmanager.heap.size</code>å‚æ•°è®¾ç½®ã€‚ä½¿ç”¨å †çš„å¯¹è±¡åŒ…æ‹¬TaskManagerè¿è¡Œæ—¶ã€ç®—å­å’Œå‡½æ•°ä»¥åŠä¼ è¾“çš„æ•°æ®ã€‚æ³¨æ„ä¸€ä¸ªtaskå¯èƒ½å°±è€—å…‰æ•´ä¸ªJVMå †å†…å­˜ï¼Œå¦‚æœåº”ç”¨ä¾èµ–è®¸å¤šåŒ…ä¹Ÿä¼šé€ æˆéå †å†…å­˜çš„æ˜¾è‘—æ¶ˆè€—ã€‚</p><p>é™¤äº†JVMå¤–ï¼ŒFlinkçš„ç½‘ç»œæ ˆä¹Ÿæ˜¯å†…å­˜æ¶ˆè€—å¤§æˆ·ã€‚Flinkçš„ç½‘ç»œæ ˆåŸºäºNettyï¼Œå®ƒä½¿ç”¨æœ¬åœ°å†…å­˜ä½œä¸ºç½‘ç»œç¼“å†²åŒºã€‚ç¼“å†²åŒºçš„æ•°é‡ä¾èµ–äºç®—å­ä»»åŠ¡çš„è¿æ¥æ–¹å¼å’Œå¹¶å‘åº¦ï¼Œå½“ç¼“å†²åŒºæ•°é‡ä¸å¤Ÿæ—¶ä½œä¸šæäº¤åä¼šæŠ›å‡º<code>java.io.IOException: Insufficient number of network buffers</code>å¼‚å¸¸ã€‚é€šè¿‡å‚æ•°<code>taskmanager.network.memory.segment-size</code>æŒ‡å®šç½‘ç»œç¼“å†²åŒºå¤§å°ã€‚</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>æ³¨æ„</h5></div><div class="admonition-content"><p>åŸä¹¦æåˆ°çš„<code>taskmanager.network.memory.fraction</code>ã€<code>taskmanager.network.memory.min</code>å’Œ<code>taskmanager.network.memory.max</code>å‚æ•°å·²ç»åˆ é™¤ï¼Œè¯¦è§<a href="https://nightlies.apache.org/flink/flink-docs-release-1.14/docs/deployment/config/#full-taskmanageroptions" target="_blank" rel="noopener noreferrer">Full TaskManagerOptions</a></p></div></div><p>å½“ä½¿ç”¨RocksDBä½œä¸ºçŠ¶æ€åç«¯æ—¶ï¼Œ<strong>Flinkä¼šä¸ºæ¯ä¸ªtaskçš„é”®æ§ç®—å­åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„RocksDBå®ä¾‹</strong>ï¼Œé»˜è®¤é…ç½®ä¸‹æ¯ä¸ªcolumnæ—ä¼šæ¶ˆè€—200MBåˆ°240MBçš„å †å¤–å†…å­˜ï¼Œå¯ä»¥é€šè¿‡RocksDBçš„é…ç½®è°ƒæ•´æ€§èƒ½ã€‚</p><p>å½“é…ç½®TaskManagerçš„å†…å­˜æ—¶ï¼Œéœ€è¦è°ƒæ•´å †å†…å­˜å¤§å°ä»¥ä¾¿ç•™æœ‰å……è¶³çš„å †å¤–å†…å­˜ã€‚<strong>æ³¨æ„ï¼Œä¸€äº›èµ„æºç®¡ç†å™¨(å¦‚YARN)ä¼šåœ¨å®¹å™¨è¶…å‡ºå†…å­˜åˆ†é…æ—¶ç«‹å³ç»ˆæ­¢å®¹å™¨ã€‚</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ç£ç›˜å­˜å‚¨">ç£ç›˜å­˜å‚¨<a class="hash-link" href="#ç£ç›˜å­˜å‚¨" title="Direct link to heading">â€‹</a></h3><p>Flink workerè¿›ç¨‹åœ¨å¾ˆå¤šæƒ…å†µä¸‹ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨æ•°æ®ï¼Œæ¯”å¦‚æ¥æ”¶åº”ç”¨JARåŒ…ã€å†™æ—¥å¿—ã€çŠ¶æ€ç»´æŠ¤ç­‰ï¼Œç›¸å…³çš„æ–‡ä»¶è·¯å¾„å‚æ•°å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><table><thead><tr><th>å‚æ•°</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>io.tmp.dirs</code></td><td><code>java.io.tmpdir</code>ç³»ç»Ÿå˜é‡</td><td>åœ¨Linuxå’ŒMacOSç³»ç»Ÿä¸Šé»˜è®¤ä¸º<code>/tmp</code>ï¼Œè¯¥ç›®å½•ä¼šè¢«å®šæ—¶æ¸…ç†ï¼Œå»ºè®®é‡æ–°ç¤¾ä¼š</td></tr><tr><td><code>env.log.dir</code></td><td><code>${FLINK_HOME}/log</code></td><td>TaskManagerå­˜å‚¨æ—¥å¿—è·¯å¾„</td></tr><tr><td><code>blob.storage.directory</code></td><td>æ— </td><td>Blob serverå­˜å‚¨è·¯å¾„ï¼Œç”¨äºäº¤æ¢å¤§æ–‡ä»¶</td></tr><tr><td><code>state.backend.rocksdb.localdir</code></td><td><code>io.tmp.dirs</code></td><td>RocksDBå­˜å‚¨çŠ¶æ€è·¯å¾„</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="æ£€æŸ¥ç‚¹å’ŒçŠ¶æ€åç«¯">æ£€æŸ¥ç‚¹å’ŒçŠ¶æ€åç«¯<a class="hash-link" href="#æ£€æŸ¥ç‚¹å’ŒçŠ¶æ€åç«¯" title="Direct link to heading">â€‹</a></h3><p>æ‰€æœ‰æ£€æŸ¥ç‚¹å’ŒçŠ¶æ€åç«¯çš„é…ç½®éƒ½å¯ä»¥é€šè¿‡ä»£ç æ‰§è¡Œï¼Œè¯¦è§<a href="/docs/Stream-Processing-with-Apache-Flink/Chap10/#%E8%B0%83%E6%95%B4%E6%A3%80%E6%9F%A5%E7%82%B9%E5%92%8C%E6%95%85%E9%9A%9C%E6%81%A2%E5%A4%8D">è°ƒæ•´æ£€æŸ¥ç‚¹å’Œæ•…éšœæ¢å¤</a>ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å¯è®¾ç½®çš„ç›¸å…³å‚æ•°å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><table><thead><tr><th>å‚æ•°</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>state.backend</code></td><td>æ— </td><td>çŠ¶æ€åç«¯ç±»å‹ï¼Œå¯é€‰jobmanagerï¼Œfilesystemï¼Œrocksdbæˆ–è€…CheckpointStorageFactoryå·¥å‚ç±»å</td></tr><tr><td><code>state.backend.async</code></td><td><code>${FLINK_HOME}/log</code></td><td>TaskManagerå­˜å‚¨æ—¥å¿—è·¯å¾„</td></tr><tr><td><code>state.backend.incremental</code></td><td>false</td><td>æ˜¯å¦å¼€å¯å¢é‡æ£€æŸ¥ç‚¹ï¼Œä¸æ”¯æŒå¢é‡æ£€æŸ¥ç‚¹çš„çŠ¶æ€åç«¯ä¼šå¿½ç•¥è¯¥é…ç½®</td></tr><tr><td><code>state.checkpoints.dir</code></td><td>æ— </td><td>æ£€æŸ¥ç‚¹æ•°æ®ä¿å­˜ç›®å½•</td></tr><tr><td><code>state.savepoints.dir</code></td><td>æ— </td><td>ä¿å­˜ç‚¹æ•°æ®ä¿å­˜ç›®å½•</td></tr><tr><td><code>state.backend.local-recovery</code></td><td>false</td><td>æ˜¯å¦å¼€å¯æœ¬åœ°çŠ¶æ€æ¢å¤ï¼Œæœ¬åœ°æ¢å¤ç›®å‰åªè¦†ç›–é”®æ§çŠ¶æ€åç«¯</td></tr><tr><td><code>taskmanager.state.local.root-dirs</code></td><td>æ— </td><td>æœ¬åœ°çŠ¶æ€å‰¯æœ¬æ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œç”¨äºæœ¬åœ°çŠ¶æ€æ¢å¤</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="å®‰å…¨">å®‰å…¨<a class="hash-link" href="#å®‰å…¨" title="Direct link to heading">â€‹</a></h3><p>åœ¨å®‰å…¨æ–¹é¢ï¼ŒFlinkæ”¯æŒKerberosè®¤è¯ä»¥åŠé€šè¿‡SSLåŠ å¯†æ‰€æœ‰ç½‘ç»œé€šä¿¡ã€‚Flinkå°†Kerberosè®¤è¯é›†æˆåˆ°HadoopåŠå…¶ç”Ÿæ€ç»„ä»¶ï¼Œå¦‚YARNã€HDFSã€HBaseç­‰ï¼Œå¹¶æ”¯æŒ2ç§è®¤è¯æ¨¡å¼ï¼škeytabså’ŒHadoopæˆæƒtokenã€‚æ¨èä½¿ç”¨keytabsï¼Œå› ä¸ºtokenæœ‰æ—¶æ•ˆä¼šå¯¼è‡´ä½œä¸šè¿è¡Œå¤±è´¥ã€‚<strong>æ³¨æ„è¯ä¹¦æ˜¯å’ŒFlinké›†ç¾¤ç»‘å®šè€Œä¸æ˜¯æŸä¸ªè¿è¡Œä½œä¸š</strong>ï¼Œæƒ³è¦ä½¿ç”¨ä¸åŒçš„è¯ä¹¦åº”è¯¥æ–°å¼€ä¸€ä¸ªFlinké›†ç¾¤ï¼Œè¯¦è§<a href="https://nightlies.apache.org/flink/flink-docs-release-1.14/docs/deployment/security/security-kerberos/" target="_blank" rel="noopener noreferrer">Kerberos Authentication Setup and Configuration</a>ã€‚</p><p>Flinkå†…éƒ¨ç»„ä»¶ä¹‹é—´ä½¿ç”¨SSLäº’ç›¸è®¤è¯é€šä¿¡ï¼Œè€ŒFlinkä¸å¤–éƒ¨ç³»ç»Ÿçš„é€šä¿¡é€šè¿‡REST/HTTPç«¯ç‚¹å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨SSLåŠ å¯†å¯¹å¤–é€šä¿¡ï¼Œä½†æ¨èè®¾ç½®ä¸€ä¸ªä¸“é—¨çš„ä»£ç†æœåŠ¡ã€‚ç›®å‰è¿˜ä¸æ”¯æŒçŠ¶æ€æŸ¥è¯¢æœåŠ¡çš„åŠ å¯†å’Œè®¤è¯ã€‚é»˜è®¤SSLè®¤è¯æœªå¼€å¯ï¼Œå¼€å¯æ­¥éª¤è¯¦è§<a href="https://nightlies.apache.org/flink/flink-docs-release-1.14/docs/deployment/security/security-ssl/#configuring-ssl" target="_blank" rel="noopener noreferrer">Configuring SSL </a>ã€‚</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="æ€»ç»“">æ€»ç»“<a class="hash-link" href="#æ€»ç»“" title="Direct link to heading">â€‹</a></h2><ol><li>Flinkéƒ¨ç½²æ¨¡å¼åˆ†ä¸ºStandaloneã€K8Så’ŒYARNè¿™3ç§ï¼›</li><li>Workeræ•…éšœç”±Flinkè‡ªè¡Œå¤„ç†ï¼Œä½†masteræ•…éšœæ¢å¤éœ€è¦é…ç½®é«˜å¯ç”¨ï¼›</li><li>é›†æˆHadoopç»„ä»¶æœ‰ç›´æ¥ä¸‹è½½å®˜æ–¹åŒ…ã€è‡ªè¡Œç¼–è¯‘æˆ–è€…æ‰‹åŠ¨å¼•å…¥ä¾èµ–3ç§æ–¹æ³•ï¼›</li><li>ä½¿ç”¨HDFSç­‰æ–‡ä»¶ç³»ç»Ÿéœ€è¦å°†optç›®å½•ä¸‹å¯¹åº”jaråŒ…ç§»åˆ°libç›®å½•å¼€å¯ä½¿ç”¨ï¼›</li><li>Flinkè¯¦ç»†çš„ç³»ç»Ÿé…ç½®è§<a href="https://nightlies.apache.org/flink/flink-docs-stable/docs/deployment/config/" target="_blank" rel="noopener noreferrer">Configuration</a>ã€‚</li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/docs/tags/stream-processing">Stream Processing</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/docs/tags/apache-flink">Apache Flink</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/docs/tags/reading-notes">ReadingNotes</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/kayhaw/kayhaw.github.io/edit/master/website/docs/Stream Processing with Apache Flink/Stream-Processing-with-Apache-Flink-Chap09.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Stream-Processing-with-Apache-Flink/Chap08"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">è¯»å†™å¤–éƒ¨ç³»ç»Ÿ</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Stream-Processing-with-Apache-Flink/Chap10"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">è¿ç»´Flinkå’Œæµåº”ç”¨</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#éƒ¨ç½²æ¨¡å¼" class="table-of-contents__link toc-highlight">éƒ¨ç½²æ¨¡å¼</a><ul><li><a href="#standaloneé›†ç¾¤" class="table-of-contents__link toc-highlight">Standaloneé›†ç¾¤</a></li><li><a href="#docker" class="table-of-contents__link toc-highlight">Docker</a></li><li><a href="#apache-hadoop-yarn" class="table-of-contents__link toc-highlight">Apache Hadoop YARN</a></li><li><a href="#kubernetes" class="table-of-contents__link toc-highlight">Kubernetes</a></li></ul></li><li><a href="#é«˜å¯ç”¨è®¾ç½®" class="table-of-contents__link toc-highlight">é«˜å¯ç”¨è®¾ç½®</a><ul><li><a href="#é«˜å¯ç”¨standaloneæ¨¡å¼è®¾ç½®" class="table-of-contents__link toc-highlight">é«˜å¯ç”¨Standaloneæ¨¡å¼è®¾ç½®</a></li><li><a href="#é«˜å¯ç”¨yarnè®¾ç½®" class="table-of-contents__link toc-highlight">é«˜å¯ç”¨YARNè®¾ç½®</a></li><li><a href="#é«˜å¯ç”¨k8sè®¾ç½®" class="table-of-contents__link toc-highlight">é«˜å¯ç”¨K8Sè®¾ç½®</a></li></ul></li><li><a href="#é›†æˆhadoopç»„ä»¶" class="table-of-contents__link toc-highlight">é›†æˆHadoopç»„ä»¶</a></li><li><a href="#æ–‡ä»¶ç³»ç»Ÿè®¾ç½®" class="table-of-contents__link toc-highlight">æ–‡ä»¶ç³»ç»Ÿè®¾ç½®</a></li><li><a href="#ç³»ç»Ÿé…ç½®" class="table-of-contents__link toc-highlight">ç³»ç»Ÿé…ç½®</a><ul><li><a href="#javaç¯å¢ƒå’Œç±»åŠ è½½" class="table-of-contents__link toc-highlight">Javaç¯å¢ƒå’Œç±»åŠ è½½</a></li><li><a href="#cpu" class="table-of-contents__link toc-highlight">CPU</a></li><li><a href="#å†…å­˜å’Œç½‘ç»œç¼“å†²" class="table-of-contents__link toc-highlight">å†…å­˜å’Œç½‘ç»œç¼“å†²</a></li><li><a href="#ç£ç›˜å­˜å‚¨" class="table-of-contents__link toc-highlight">ç£ç›˜å­˜å‚¨</a></li><li><a href="#æ£€æŸ¥ç‚¹å’ŒçŠ¶æ€åç«¯" class="table-of-contents__link toc-highlight">æ£€æŸ¥ç‚¹å’ŒçŠ¶æ€åç«¯</a></li><li><a href="#å®‰å…¨" class="table-of-contents__link toc-highlight">å®‰å…¨</a></li></ul></li><li><a href="#æ€»ç»“" class="table-of-contents__link toc-highlight">æ€»ç»“</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">è¯»ä¹¦ç¬”è®°</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://www.zhihu.com/people/xiao-ke-dou-7" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>çŸ¥ä¹<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kayhaw" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://gitee.com/kayhaw" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 ä½•è½²(Kay Haw). Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b8f66f99.js"></script>
<script src="/assets/js/main.a8d1eeac.js"></script>
</body>
</html>