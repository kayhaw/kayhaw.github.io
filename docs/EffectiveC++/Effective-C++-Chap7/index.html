<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.16">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kay Haw&#39;s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kay Haw&#39;s Blog Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-rh="true">æ¨¡æ¿å’Œæ³›å‹ç¼–ç¨‹ | Kay Haw&#x27;s Blog</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kayhaw.github.io/docs/EffectiveC++/Effective-C++-Chap7"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="æ¨¡æ¿å’Œæ³›å‹ç¼–ç¨‹ | Kay Haw&#x27;s Blog"><meta data-rh="true" name="description" content="ã€ŠEffective C++ã€‹è‹±æ–‡ç¬¬ä¸‰ç‰ˆè¯»ä¹¦ç¬”è®°ç¬¬ä¸ƒç« "><meta data-rh="true" property="og:description" content="ã€ŠEffective C++ã€‹è‹±æ–‡ç¬¬ä¸‰ç‰ˆè¯»ä¹¦ç¬”è®°ç¬¬ä¸ƒç« "><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kayhaw.github.io/docs/EffectiveC++/Effective-C++-Chap7"><link data-rh="true" rel="alternate" href="https://kayhaw.github.io/docs/EffectiveC++/Effective-C++-Chap7" hreflang="en"><link data-rh="true" rel="alternate" href="https://kayhaw.github.io/docs/EffectiveC++/Effective-C++-Chap7" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4bafb564.css">
<link rel="preload" href="/assets/js/runtime~main.b8f66f99.js" as="script">
<link rel="preload" href="/assets/js/main.a8d1eeac.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Kay Haw&#x27;s Blog" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="Kay Haw&#x27;s Blog" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Kay Haw&#x27;s Blog</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">è¯»ä¹¦ç¬”è®°</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kayhaw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ğŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ğŸŒ</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">è¯»ä¹¦ç¬”è®°</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/C++PrimerPlus/C++PrimerPlus-Chap04">C++PrimerPlus</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/EffectiveC++/Effective-C++-Chap1">EffectiveC++</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/EffectiveC++/Effective-C++-Chap1">å…»æˆC++å¥½ä¹ æƒ¯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/EffectiveC++/Effective-C++-Chap2">æ„é€ å‡½æ•°,ææ„å‡½æ•°å’Œèµ‹å€¼æ“ä½œç¬¦</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/EffectiveC++/Effective-C++-Chap3">èµ„æºç®¡ç†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/EffectiveC++/Effective-C++-Chap4">è®¾è®¡å’Œå£°æ˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/EffectiveC++/Effective-C++-Chap5">ä»£ç å®ç°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/EffectiveC++/Effective-C++-Chap6">ç»§æ‰¿å’Œé¢å‘å¯¹è±¡è®¾è®¡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/EffectiveC++/Effective-C++-Chap7">æ¨¡æ¿å’Œæ³›å‹ç¼–ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/EffectiveC++/Effective-C++-Chap8">è‡ªå®šä¹‰newå’Œdelete</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/EffectiveC++/Effective-C++-Chap9">æ‚å½•</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜/Java-Concurrency-in-Practice-Chap02">Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/Learning Akka/LearningAkka-Chap01">Learning Akka</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/Stream-Processing-with-Apache-Flink/Chap01">Stream Processing with Apache Flink</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº/UnderstandJVM-Chap07">æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/é«˜æ€§èƒ½MySQL/HighPerformanceMySQL-Chap04">é«˜æ€§èƒ½MySQL</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">ğŸ </a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">EffectiveC++</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/EffectiveC++/Effective-C++-Chap7">æ¨¡æ¿å’Œæ³›å‹ç¼–ç¨‹</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>æ¨¡æ¿å’Œæ³›å‹ç¼–ç¨‹</h1></header><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>ã€ŠEffective C++ã€‹è‹±æ–‡ç¬¬ä¸‰ç‰ˆè¯»ä¹¦ç¬”è®°ç¬¬ä¸ƒç« </p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="item41ç†è§£éšå¼æ¥å£å’Œç¼–è¯‘æ—¶å¤šæ€">Item41:ç†è§£éšå¼æ¥å£å’Œç¼–è¯‘æ—¶å¤šæ€<a class="hash-link" href="#item41ç†è§£éšå¼æ¥å£å’Œç¼–è¯‘æ—¶å¤šæ€" title="Direct link to heading">â€‹</a></h2><p>é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸–ç•Œä»¥æ˜¾å¼æ¥å£å’Œè¿è¡Œæ—¶å¤šæ€ä¸ºä¸­å¿ƒï¼Œæ¯”å¦‚ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class Widget {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Widget();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        virtual ~Widget();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        virtual std::size_t size() const;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        virtual void normalize();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void swap(Widget&amp; other);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void doProcessing(Widget&amp; w) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(w.size() &gt; 10 &amp;&amp; w != someNastyWidget) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Widget temp(w);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        temp.normalize();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        temp.swap(w);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å…³äºdoProcessingå‡½æ•°ï¼š</p><ul><li>wå£°æ˜ä¸ºWidgetç±»å‹çš„ï¼Œå› æ­¤å¿…é¡»æ”¯æŒWidgetçš„æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æºä»£ç ä¸­æŸ¥çœ‹æ¥å£è¯¦æƒ…ï¼Œæˆ‘æŠŠè¿™å«åš<strong>æ˜¾å¼æ¥å£</strong></li><li>ç”±äºWidgetç±»çš„æ–¹æ³•æœ‰äº›æ˜¯è™šå‡½æ•°ï¼Œwè°ƒç”¨è¿™äº›æ–¹æ³•æ˜¯<strong>è¿è¡Œæ—¶å¤šæ€</strong>ï¼šåŸºäºwçš„åŠ¨æ€ç±»å‹(è§Item37)åœ¨è¿è¡Œæ—¶å†³å®šè°ƒç”¨çš„å‡½æ•°</li></ul><p>ç„¶è€Œæ¨¡æ¿å’Œæ³›å‹ç¼–ç¨‹çš„ä¸–ç•Œæˆªç„¶ä¸åŒï¼Œåœ¨è¿™é‡Œï¼Œæ˜¾å¼æ¥å£å’Œè¿è¡Œæ—¶å¤šæ€ä»å­˜åœ¨ï¼Œä½†æ˜¯ä½œç”¨æ›´ä½ï¼Œç›¸åï¼Œéšå¼æ¥å£å’Œç¼–è¯‘æ—¶å¤šæ€è„±é¢–è€Œå‡ºã€‚ç»§ç»­ä»¥ä¸Šè¿°ä»£ç ä¸ºä¾‹ï¼Œæˆ‘ä»¬æŠŠdoProcessingä»å‡½æ•°æ¢æˆå‡½æ•°æ¨¡æ¿ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void doProcessing(T&amp; w) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(w.size() &gt; 10 &amp;&amp; w != someNastyWidget) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T temp(w);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        temp.normalize();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        temp.swap(w);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ç°åœ¨å…³äºdoProcessingçš„è¯´æ³•ï¼š</p><ul><li>wå¿…é¡»æ”¯æŒçš„æ¥å£ç°åœ¨ç”±æ¨¡æ¿å†³å®šï¼Œæ˜¾ç„¶wçš„ç±»å‹(T)å¿…é¡»è¦æ”¯æŒsizeï¼Œnormalizeå’Œswapæ–¹æ³•ï¼Œå¤åˆ¶æ„é€ å‡½æ•°å’Œoperator!=æ“ä½œç¬¦å‡½æ•°ï¼Œèƒ½å¤Ÿè®©æ¨¡æ¿é¡ºåˆ©ç¼–è¯‘çš„æ¥å£ç§°ä¸º<strong>éšå¼æ¥å£</strong></li><li>æ¶‰åŠwçš„å‡½æ•°è°ƒç”¨å¦‚operator&gt;å’Œoperator!=éœ€è¦æ¨¡æ¿çš„å®ä¾‹åŒ–æ‰èƒ½æˆåŠŸï¼Œæ¨¡æ¿å®ä¾‹åŒ–å‡ºç°åœ¨ç¼–è¯‘æœŸï¼Œå› ä¸ºä½¿ç”¨ä¸åŒæ¨¡æ¿å‚æ•°å®ä¾‹åŒ–å¯¼è‡´è°ƒç”¨çš„å‡½æ•°ä¸åŒï¼Œè¿™è¢«ç§°ä¸º<strong>ç¼–è¯‘æ—¶å¤šæ€</strong></li></ul><p>ç¼–è¯‘æ—¶å¤šæ€å’Œè¿è¡Œæ—¶å¤šæ€çš„åŒºåˆ«ç±»ä¼¼è°ƒç”¨å“ªä¸ªé‡è½½å‡½æ•°(ç¼–è¯‘æ—¶ç¡®å®š)å’Œè™šå‡½æ•°è°ƒç”¨çš„åŠ¨æ€ç»‘å®š(è¿è¡Œæ—¶ç¡®å®š)çš„åŒºåˆ«ã€‚è€Œæ˜¾å¼æ¥å£é€šå¸¸ç”±å„ç§å‡½æ•°ç­¾åç»„æˆï¼Œå³å‡½æ•°åï¼Œå‚æ•°ç±»å‹ï¼Œè¿”å›ç±»å‹ã€‚ä»¥ä¸Šé¢çš„Widgetç±»ä¸ºä¾‹ï¼Œå®ƒçš„å‡½æ•°ç­¾åæœ‰æ„é€ å‡½æ•°ï¼Œææ„å‡½æ•°ï¼Œsizeï¼Œnormalizeå’Œswapå‡½æ•°ï¼Œä»¥åŠç¼–è¯‘å™¨ç”Ÿæˆçš„æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼æ“ä½œç¬¦å‡½æ•°ã€‚è€Œéšå¼æ¥å£ä¸åŸºäºå‡½æ•°ç­¾åï¼Œå®ƒç”±æœ‰æ•ˆçš„<strong>è¡¨è¾¾å¼</strong>ç»„æˆï¼Œä»¥ä¸Šé¢çš„doProcessingå‡½æ•°æ¨¡æ¿ä¸ºä¾‹ï¼Œ<code>w.size() &gt; 10 &amp;&amp; w != someNastyWidget</code>æ˜¯æœ‰æ•ˆè¡¨è¾¾å¼ï¼Œå¯¹åº”çš„éšå¼æ¥å£åº”è¯¥æœ‰ä»¥ä¸‹é™åˆ¶ï¼š</p><ul><li>Tç±»å‹å¿…é¡»æä¾›æ–¹æ³•sizeï¼Œè¯¥æ–¹æ³•è¿”å›æ•´å‹æ•°å€¼</li><li>Tç±»å‹å¿…é¡»æä¾›æ–¹æ³•operator!=ï¼Œè¯¥æ–¹æ³•æ¯”è¾ƒä¸¤ä¸ªTç±»å¯¹è±¡(è¿™é‡Œå‡è®¾someNastyWidgetä¹Ÿæ˜¯Tç±»å‹)</li></ul><p>ä½†ç”±äº<strong>æ“ä½œç¬¦é‡è½½çš„å­˜åœ¨</strong>ï¼Œä»¥ä¸Šçš„é™åˆ¶ä¸ä¸€å®šéƒ½è¦æ»¡è¶³ï¼Œé¦–å…ˆTçš„ç¡®éœ€è¦æä¾›æ–¹æ³•sizeï¼Œä½†æ˜¯sizeçš„è¿”å›ç±»å‹ä¸ä¸€å®šè¦æ˜¯æ•´å‹çš„ï¼Œç”šè‡³è¿”å›ç±»å‹éƒ½ä¸ä¸€å®šè¦é‡è½½<code>&lt;</code>æ“ä½œç¬¦ï¼Œåªè¦ç¡®ä¿è¿”å›ç±»å‹Xå’Œintç±»å‹ä¹‹é—´æœ‰åˆæ³•çš„operator&gt;å¯ä»¥è°ƒç”¨ï¼Œæ¯”å¦‚Xå¯ä»¥éšå¼è½¬æ¢ä¸ºYç±»ï¼Œè€ŒYç±»é‡è½½äº†å’Œintç±»å‹æ¯”è¾ƒçš„operator&gt;æ“ä½œç¬¦,åŒç†ç¬¬äºŒæ¡é™åˆ¶ä¹Ÿä¸ä¸€å®šå­˜åœ¨ï¼Œå¤§å¤šæ•°äººå› ä¸ºå¼€å§‹è¿™ä¹ˆæ€è€ƒéšå¼æ¥å£è€Œå¤´ç—›ï¼Œä½†å®é™…ä¸Šæ²¡æœ‰å¿…è¦ï¼Œéšå¼æ¥å£å°±æ˜¯ç”±è¡¨è¾¾å¼ç»„æˆï¼Œè¡¨è¾¾å¼çœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œä½†æ˜¯å®ƒä»¬çš„é™åˆ¶é€šå¸¸æ˜¯ç›´è§‚çš„</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ€»ç»“</h5></div><div class="admonition-content"><p>ç±»å’Œæ¨¡æ¿å‚æ•°éƒ½æ”¯æŒæ¥å£å’Œå¤šæ€ï¼›å¯¹äºç±»æ¥è¯´ï¼Œæ¥å£æ˜¯æ˜¾å¼çš„ï¼Œç”±å‡½æ•°ç­¾åè¡¨ç°ï¼Œå¤šæ€é€šè¿‡è™šå‡½æ•°åœ¨è¿è¡Œæ—¶ä½“ç°ï¼›å¯¹äºæ¨¡æ¿å‚æ•°ï¼Œæ¥å£æ˜¯éšå¼çš„ï¼ŒåŸºäºæœ‰æ•ˆè¡¨è¾¾å¼ä½“ç°ï¼Œå¤šæ€é€šè¿‡ç¼–è¯‘æ—¶çš„æ¨¡æ¿å®ä¾‹åŒ–å’Œå‡½æ•°é‡è½½ä½“ç°</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="item42ç†è§£typenameçš„ä¸¤ç§å«ä¹‰">Item42:ç†è§£typenameçš„ä¸¤ç§å«ä¹‰<a class="hash-link" href="#item42ç†è§£typenameçš„ä¸¤ç§å«ä¹‰" title="Direct link to heading">â€‹</a></h2><p>åœ¨ä¸‹é¢æ¨¡æ¿å£°æ˜ä¸­çš„<code>class</code>å’Œ<code>typename</code>æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;class T&gt; class Widget;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt; class Widget;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ç­”æ¡ˆæ˜¯æ²¡æœ‰åŒºåˆ«ï¼åœ¨å£°æ˜æ¨¡æ¿ç±»å‹å‚æ•°æ—¶ï¼Œä»C++çš„è§‚ç‚¹æ¥çœ‹ï¼Œclasså’Œtypenameå«ä¹‰æ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯C++å¹¶ä¸æ€»æ˜¯å°†classå’Œtypenameè§†ä¸ºç­‰ä»·ç‰©ï¼Œæœ‰äº›æ—¶å€™å¿…é¡»ä½¿ç”¨typenameã€‚å‡è®¾æœ‰æ¨¡æ¿å‡½æ•°æ‰“å°å®¹å™¨ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename C&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void print2nd(const C&amp; container) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(container.size() &gt;= 2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        C::const_iterator iter(container.begin());      // ä¸æ˜¯æœ‰æ•ˆçš„C++ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ++iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int value = *iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        std::cout&lt;&lt;value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¿™é‡Œæ¶‰åŠåˆ°äº†ä¸¤ä¸ªå±€éƒ¨å˜é‡iterå’Œvalueï¼Œå…¶ä¸­iterçš„ç±»å‹ä¸ºC::const_iteratorï¼Œè¯¥ç±»å‹ä¾èµ–äºæ¨¡æ¿å‚æ•°Cï¼Œè¿™ç§ä¾èµ–äºæ¨¡æ¿å‚æ•°çš„åç§°ç§°ä¸º<em>ä¾èµ–åç§°</em>ï¼Œå½“ä¾èµ–åç§°åµŒå¥—åœ¨ç±»åé‡Œé¢ï¼Œæˆ‘å«å®ƒ<em>åµŒå¥—ä¾èµ–åç§°</em>ï¼ŒC::const_iteratorå°±æ˜¯åµŒå¥—ä¾èµ–åç§°ï¼Œå®é™…ä¸Šå®ƒæ˜¯<em>åµŒå¥—ä¾èµ–ç±»å‹åç§°</em>ï¼ŒæŒ‡å‘ä¸€ä¸ªç±»å‹ï¼›è€Œvalueçš„ç±»å‹ä¸ºintï¼Œå¹¶ä¸ä¾èµ–äºä»»ä½•æ¨¡æ¿å‚æ•°ï¼Œç§°ä¹‹ä¸º<em>éä¾èµ–åç§°</em>ã€‚ä¾èµ–åç§°ä¼šä½¿æ¨¡æ¿è§£æå›°éš¾ï¼Œæ¯”å¦‚ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename C&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void print2nd(const C&amp; container) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C::const_iterator *x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¡¨é¢ä¸Šçœ‹èµ·æ¥å£°æ˜xä¸ºC::const_iteratoræŒ‡é’ˆï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è®¤ä¸ºC::const_iteratoræ˜¯ä¸€ç§ç±»å‹ï¼Œä½†å¦‚æœCæ°å¥½æœ‰ä¸ªé™æ€æ•°æ®æˆå‘˜åä¸ºconst_iteratorï¼Œè€Œxæ°å¥½æ˜¯å…¨å±€å˜é‡åï¼Œæ­¤æ—¶<code>C::const_iterator *x</code>çš„å«ä¹‰æ˜¯C::const_iteratorå’Œxç›¸ä¹˜ï¼é™¤éç¡®å®šCçš„ç±»å‹ï¼Œå¦åˆ™æ— æ³•çŸ¥é“C::const_iteratoråˆ°åº•æ˜¯ä¸æ˜¯ä¸€ç§ç±»å‹åï¼Œä½†æ˜¯æ¨¡æ¿è§£ææ—¶Cçš„ç±»å‹æ˜¯ä¸ç¡®å®šçš„ï¼Œå¯¹æ­¤ï¼ŒC++çš„è§„åˆ™æ˜¯ï¼šå¦‚æœæ¨¡æ¿è§£æé‡åˆ°åµŒå¥—ä¾èµ–åç§°ï¼ŒC++ä¼š<strong>å‡è®¾è¯¥åç§°ä¸æ˜¯ä¸€ç§ç±»å‹</strong>ï¼Œé™¤éä½ å‘Šè¯‰å®ƒã€‚é»˜è®¤æƒ…å†µä¸‹åµŒå¥—ä¾èµ–åç§°<strong>ä¸æ˜¯</strong>ç±»å‹åç§°(ä¹‹åä¼šæåˆ°ä¾‹å¤–æƒ…å†µ)ï¼Œå›åˆ°print2dï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename C&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void print2nd(const C&amp; container) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(container.size() &gt;= 2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        C::const_iterator iter(container.begin());      // C::const_iteratorä¸æ˜¯ç±»å‹å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æ ¹æ®ä¸Šè¿°è§„åˆ™ï¼ŒC++é»˜è®¤ä¸æŠŠ<code>C::const_iterator</code>è§†ä¸ºç±»å‹åç§°ï¼Œè€Œiterçš„å£°æ˜åªåœ¨<code>C::const_iterator</code>ä¸ºç±»å‹åç§°æ—¶æ‰æœ‰æ„ä¹‰ï¼Œä¸ºäº†çº æ­£è¿™ä¸ªé”™è¯¯ï¼Œé€šè¿‡åœ¨å‰é¢åŠ ä¸Š<code>typename</code>æ¥å‘Šè¯‰C++<code>C::const_iterator</code>æ˜¯ä¸ªç±»å‹åç§°ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename C&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void print2nd(const C&amp; container) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(container.size() &gt;= 2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        typename C::const_iterator iter(container.begin());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ç”±æ­¤ï¼Œé€šç”¨çš„è§„åˆ™å¾ˆç®€å•ï¼šæ— è®ºä½•æ—¶åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨åµŒå¥—ä¾èµ–åï¼Œéƒ½åœ¨å…¶å‰é¢åŠ ä¸Šå…³é”®å­—<code>typename</code>(å†æ¬¡å£°æ˜ï¼Œä¹Ÿæœ‰ä¾‹å¤–)ã€‚<code>typename</code>åº”è¯¥åªç”¨äºåµŒå¥—ä¾èµ–åç§°è€Œä¸èƒ½æ˜¯å…¶ä»–åç§°ï¼Œæ¯”å¦‚ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename C&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void f(const C&amp; container,              // ä¸è¦ä½¿ç”¨typenameï¼ŒéåµŒå¥—ä¾èµ–åç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        typename C::iterator iter);     // éœ€è¦ä½¿ç”¨typename</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å”¯ä¸€çš„ä¾‹å¤–æ˜¯å½“åµŒå¥—ä¾èµ–ç±»å‹åç§°ä½äºåŸºç±»åˆ—è¡¨æˆ–è€…æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨æ—¶ï¼Œä¸éœ€è¦åœ¨å‰é¢åŠ ä¸Štypenameï¼Œæ¯”å¦‚ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Derived: public Base&lt;T&gt;::Nested {     // åŸºç±»åˆ—è¡¨ï¼Œä¸è¦åŠ typename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        explicit Derived(int x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        : Base&lt;T&gt;::Nested(x) {              // æˆå‘˜åˆå§‹åŒ–æˆå‘˜åˆ—è¡¨ä¸­çš„åŸºç±»ï¼Œä¸è¦åŠ typename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            typename Base&lt;T&gt;::Nested temp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¿™ç§ä¾‹å¤–æƒ…å†µä»¤äººåŒçƒ¦ï¼Œä½†æ˜¯æœ‰äº†ç»éªŒä¹‹åå°±å¾ˆéš¾å†å¿˜è®°å®ƒã€‚æœ€åå†çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå®ƒä»£è¡¨äº†ä½ ä¼šçœ‹åˆ°çš„å®é™…ä»£ç ï¼Œå‡è®¾æˆ‘ä»¬åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼Œå®ƒæ¥å—ä¸€ä¸ªè¿­ä»£å™¨å¹¶å¤åˆ¶è¿­ä»£å™¨æ‰€æŒ‡å¯¹è±¡ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void workWithIterator(IterT iter) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typename std::iterator_traits&lt;IterT&gt;::value_type temp(*iter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>åˆ«è¢«<code>std::iterator_traits&lt;IterT&gt;</code>å“åˆ°ï¼Œå®ƒçš„å«ä¹‰æ˜¯IterTç±»å‹è¿­ä»£å™¨æ‰€æŒ‡å‘çš„ç±»å‹ï¼Œå¦‚æœIterTæ˜¯<code>vector&lt;int&gt;::iterator</code>ï¼Œé‚£ä¹ˆtempå°±æ˜¯intç±»å‹ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå› ä¸º<code>std::iterator_traits&lt;IterT&gt;</code>æ˜¯åµŒå¥—ä¾èµ–ç±»å‹åç§°ï¼Œæ‰€ä»¥å¿…é¡»åŠ ä¸Štypenameã€‚å¦‚æœè§‰å¾—<code>std::iterator_traits&lt;IterT&gt;</code>å¤ªé•¿ï¼Œå¯ä»¥ä½¿ç”¨typedefæ¥é‡å‘½åï¼Œå¯¹äºç±»ä¼¼value_typeçš„ç‰¹æ€§ç±»(è§Item47)æˆå‘˜ï¼Œé€šå¸¸å–çš„åˆ«åå°±æ˜¯æˆå‘˜åï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void workWithIterator(IterT iter) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typedef typename std::iterator_traits&lt;IterT&gt;::value_type value_type;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value_type temp(*iter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ç¼–è¯‘å™¨å¯¹æœ‰å…³typenameçš„è§„åˆ™å®ç°æ˜¯äº’ä¸ç›¸åŒçš„ï¼Œæœ‰çš„ç¼–è¯‘å™¨æ¥å—æœ¬æ¥è¦åŠ typenameå´æ²¡æœ‰åŠ çš„ä»£ç ï¼Œæœ‰çš„ç¼–è¯‘å™¨æ¥å—ä¸è¯¥åŠ typenameä½†å´åŠ äº†çš„ä»£ç ï¼Œç”šè‡³æœ‰çš„è€å¼ç¼–è¯‘å™¨æ‹’ç»typenameçš„å‡ºç°ï¼Œè¿™æ„å‘³ç€typenameå’ŒåµŒå¥—ä¾èµ–ç±»å‹åç§°ä¼šå¸¦æ¥è½»å¾®çš„ç§»æ¤é—®é¢˜</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ€»ç»“</h5></div><div class="admonition-content"><p>å£°æ˜æ¨¡æ¿ç±»å‹å‚æ•°æ—¶ï¼Œclasså’Œtypenameæ˜¯ç­‰æ•ˆçš„ï¼›ä½¿ç”¨typenameæ¥æ ‡è®°åµŒå¥—ä¾èµ–ç±»å‹åç§°ï¼Œé™¤äº†åœ¨åŸºç±»åˆ—è¡¨ä¸­å’Œåˆå§‹åŒ–æˆå‘˜åˆ—è¡¨ä¸­çš„åŸºç±»æ ‡è¯†ç¬¦</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="item43çŸ¥é“å¦‚ä½•è®¿é—®æ¨¡æ¿åŸºç±»çš„åç§°">Item43:çŸ¥é“å¦‚ä½•è®¿é—®æ¨¡æ¿åŸºç±»çš„åç§°<a class="hash-link" href="#item43çŸ¥é“å¦‚ä½•è®¿é—®æ¨¡æ¿åŸºç±»çš„åç§°" title="Direct link to heading">â€‹</a></h2><p>å‡è®¾éœ€è¦ç¼–å†™ä¸€ä¸ªå‘é€æ¶ˆæ¯åˆ°å‡ ä¸ªä¸åŒå…¬å¸çš„åº”ç”¨ï¼Œæ¶ˆæ¯å¯ä»¥æ˜æ–‡ä¼ é€ä¹Ÿå¯ä»¥åŠ å¯†ä¼ é€ï¼Œå¦‚æœåœ¨ç¼–è¯‘æ—¶å°±å¯ä»¥ç¡®å®šæ¶ˆæ¯å»å¾€å“ªä¸ªå…¬å¸ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿ç¼–ç¨‹ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class CompanyA {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendClearText(const std::string&amp; msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendEncrypted(const std::string&amp; msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class CompanyB {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendClearText(const std::string&amp; msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendEncrypted(const std::string&amp; msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class MsgInfo { ... };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename Company&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class MsgSender {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendClear(const MsfInfo&amp; info) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            std::string msg;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // ç¼–å†™æ¶ˆæ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Company c;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            c.sendCleartext(msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendSecret(const MsgInfo&amp; info) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            std::string msg;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // ç¼–å†™æ¶ˆæ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Company c;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            c.sendEncrypted(msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ä¸Šè¿°ä»£ç å¯ä»¥æœ‰æ•ˆå·¥ä½œï¼Œå‡è®¾è¿˜è¦åœ¨æ¯æ¬¡å‘é€æ¶ˆæ¯æ—¶ç™»è®°æ—¥å¿—ï¼Œä½¿ç”¨æ´¾ç”Ÿç±»å¯ä»¥è½»æ¾åœ°æ·»åŠ è¿™ä¸ªåŠŸèƒ½ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename Company&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class LoggingMsgSender: public MsgSender&lt;Company&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendClearMsg(const MsgInfo&amp; info) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // å‘é€å‰å†™å…¥æ—¥å¿—ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sendClear(info);        // è°ƒç”¨åŸºç±»æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // å‘é€åå†™å…¥æ—¥å¿—ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><strong>æ³¨æ„æ´¾ç”Ÿç±»ä¸­çš„å‘é€ä¿¡æ¯æ–¹æ³•å(sendClearMsg)å’ŒåŸºç±»çš„(sendClear)æ˜¯ä¸åŒçš„ï¼Œè¿™æ˜¯ä¸ªè®¾è®¡ç‚¹ï¼Œå› ä¸ºå®ƒé¿å…äº†è¦†ç›–ç»§æ‰¿ç±»åç§°(è§Item33)ï¼Œå¹¶ä¸”é¿å…é‡æ–°å®šä¹‰ç»§æ‰¿çš„éè™šå‡½æ•°(è§Item36)</strong>ï¼Œä½†æ˜¯è¿™ä»½ä»£ç å¹¶ä¸ä¼šç¼–è¯‘é€šè¿‡ï¼Œç¼–è¯‘å™¨ä¼šæŠ±æ€¨sendClearæ–¹æ³•ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“sendClearåœ¨åŸºç±»ä¸­ï¼Œä½†æ˜¯ç¼–è¯‘å™¨å°±æ˜¯æ‰¾ä¸åˆ°å®ƒï¼Œè¿™éœ€è¦ç†è§£å…¶ä¸­åŸå› ï¼šå½“ç¼–è¯‘å™¨é‡åˆ°æ¨¡æ¿ç±»LoggingMsgSenderï¼Œå¹¶ä¸çŸ¥é“æ¨¡æ¿ç±»ç»§æ‰¿çš„åŸºç±»ï¼Œå½“ç„¶ï¼Œä»£ç æŒ‡å‡ºæ˜¯<code>MsgSender&lt;Company&gt;</code>ï¼Œä½†Companyæ˜¯æ¨¡æ¿ç±»å‹å‚æ•°ï¼Œåªæœ‰å½“å®ä¾‹åŒ–LoggingMsgSenderæ—¶æ‰çŸ¥é“Companyçš„å…·ä½“ç±»å‹ï¼Œä¸çŸ¥é“Companyç±»å‹å°±ä¸å¯èƒ½çŸ¥é“<code>MsgSender&lt;Company&gt;</code>é•¿ä»€ä¹ˆæ ·ï¼Œå½“ç„¶ä¹Ÿå°±ä¸çŸ¥é“å®ƒæœ‰æ²¡æœ‰åŒ…å«sendClearæ–¹æ³•ã€‚ä¸ºäº†æ›´åŠ å…·ä½“åœ°è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œå†ä¸¾ä¸ªä¾‹å­ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class CompanyZ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendEncrypted(const std::string&amp; msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>CompanyZç±»åªæ”¯æŒåŠ å¯†æ¶ˆæ¯ä¼ é€’è€Œæ²¡æœ‰sendClearæ–¹æ³•ï¼Œå› æ­¤å¹¶ä¸é€‚åˆMsgSenderç±»æ¨¡æ¿ã€‚ä¸ºäº†å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºCompanyZç±»åˆ›å»ºä¸€ä¸ªä¸“é—¨çš„MsgSenderç±»æ¨¡æ¿ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class MsgSender&lt;CompanyZ&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendSecret(const MsgInfo&amp; info) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><strong>æ³¨æ„ç±»å®šä¹‰èµ·å§‹å¤„<code>template&lt;&gt;</code>ï¼Œå®ƒè¯´æ˜ä»¥ä¸‹çš„ä»£ç æ—¢ä¸æ˜¯ç±»æ¨¡æ¿ä¹Ÿä¸æ˜¯ç‹¬ç«‹çš„ç±»å®šä¹‰ï¼Œå®ƒè¡¨ç¤ºå½“æ¨¡æ¿å‚æ•°ä¸ºCompanyZæ—¶ï¼Œè¿™æ˜¯å¯¹åº”çš„ä¸“ç”¨ç‰ˆæœ¬çš„MsgSenderæ¨¡æ¿</strong>ï¼Œè¿™è¢«ç§°ä¸º<em>å®Œå…¨æ¨¡æ¿ç‰¹å‹åŒ–(total template specilaization)</em>ï¼šç‰¹å‹åŒ–æ„å‘³ç€è¿™æ˜¯ä¸“é—¨ä¸ºCompanyZè®¾è®¡çš„MsgSenderæ¨¡æ¿ç±»ï¼Œå®Œå…¨æ„å‘³ç€ä¸€æ—¦æ¨¡æ¿ç±»å‹å‚æ•°æ˜¯CompanyZï¼Œæ¨¡æ¿å‚æ•°çš„å…¶ä»–éƒ¨åˆ†ä¸èƒ½å†å˜åŒ–ã€‚ç°åœ¨æœ‰äº†ä¸ºCompanyZç‰¹å‹åŒ–çš„MsgSenderæ¨¡æ¿ï¼Œå†çœ‹æ´¾ç”Ÿç±»LoggingMsgSenderï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename Company&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class LoggingMsgSender: public MsgSender&lt;Company&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendClearMsg(const MsgInfo&amp; info) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // å‘é€å‰å†™å…¥æ—¥å¿—ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sendClear(info);        // å¦‚æœç±»å‹å‚æ•°Companyæ˜¯CompanyZï¼Œè¯¥å‡½æ•°è°ƒç”¨æ˜¯æ— æ•ˆçš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // å‘é€åå†™å…¥æ—¥å¿—ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æ­£å¦‚æ³¨é‡Šä¸­æ‰€æŒ‡å‡ºçš„ï¼Œå› ä¸ºåŸºç±»<code>MsgSender&lt;CompanyZ&gt;</code>æ²¡æœ‰æä¾›sendClearæ–¹æ³•ï¼Œæ‰€ä»¥C++æ‹’ç»è°ƒç”¨ï¼šç¼–è¯‘å™¨è®¤è¯†åˆ°åŸºç±»æ¨¡æ¿æ˜¯ç‰¹å‹åŒ–çš„ï¼Œè€Œä¸”ç‰¹å‹åŒ–çš„ç±»æ¨¡æ¿å¹¶æ²¡æœ‰æä¾›å’Œé€šç”¨æ¨¡æ¿ç›¸åŒçš„æ¥å£ã€‚å› æ­¤ç¼–è¯‘å™¨é€šå¸¸æ‹’ç»åœ¨æ¨¡æ¿åŸºç±»ä¸­å¯»æ‰¾ç»§æ‰¿åç§°ï¼Œä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œä»é¢å‘å¯¹è±¡çš„C++è·¨è¶Šåˆ°C++æ¨¡æ¿æ—¶(è§Item1)ç»§æ‰¿å¤±æ•ˆã€‚ä¸ºäº†é˜»æ­¢C++è¿™ç§â€œä¸åœ¨æ¨¡æ¿åŸºç±»ä¸­æœç´¢åç§°â€çš„è¡Œä¸ºï¼Œè¿™é‡Œæœ‰ä¸‰ç§æ–¹æ³•ï¼š</p><ul><li>è°ƒç”¨åŸºç±»æ–¹æ³•å‰é¢åŠ ä¸Š<code>this-&gt;</code></li></ul><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename Company&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class LoggingMsgSender: public MsgSender&lt;Company&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendClearMsg(const MsgInfo&amp; info) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // å‘é€å‰å†™å…¥æ—¥å¿—ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this-&gt;sendClear(info);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // å‘é€åå†™å…¥æ—¥å¿—ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>ä½¿ç”¨usingå£°æ˜ï¼Œåœ¨Item33ä¸­æåˆ°è¿‡</li></ul><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename Company&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class LoggingMsgSender: public MsgSender&lt;Company&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        using MsgSender&lt;Company&gt;::sendClear;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendClearMsg(const MsgInfo&amp; info) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // å‘é€å‰å†™å…¥æ—¥å¿—ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sendClear(info);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // å‘é€åå†™å…¥æ—¥å¿—ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å°½ç®¡usingå£°æ˜éƒ½èƒ½èµ·ä½œç”¨ï¼Œä½†å¤„ç†çš„æƒ…å†µæ˜¯ä¸åŒçš„ï¼ŒItem33ä¸­æ˜¯ç»§æ‰¿çš„åŸºç±»åç§°è¢«åŒåæ´¾ç”Ÿç±»è¦†ç›–ï¼Œè€Œè¿™é‡Œæ˜¯ç¼–è¯‘å™¨å¹¶æ²¡æœ‰æœç´¢åŸºç±»åç§°</p><ul><li>è°ƒç”¨åŸºç±»æ–¹æ³•å‰é¢åŠ ä¸ŠåŸºç±»åç§°</li></ul><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename Company&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class LoggingMsgSender: public MsgSender&lt;Company&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void sendClearMsg(const MsgInfo&amp; info) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // å‘é€å‰å†™å…¥æ—¥å¿—ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MsgSender&lt;Company&gt;::sendClear(info);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...     // å‘é€åå†™å…¥æ—¥å¿—ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¿™ç§æ–¹æ³•æ˜¯è§£å†³é—®é¢˜æœ€ä¸å¯å–çš„ï¼Œå› ä¸ºå¦‚æœè°ƒç”¨çš„æ˜¯è™šå‡½æ•°ï¼Œå°±ç›¸å½“äºå…³é—­äº†è™šå‡½æ•°çš„åŠ¨æ€ç»‘å®šã€‚</p><p>ä»åç§°å¯è§æ€§çš„è§’åº¦æ¥çœ‹ï¼Œä»¥ä¸Šä¸‰ç§æ–¹æ³•éƒ½åœ¨åšç›¸åŒçš„äº‹ï¼šå‘ç¼–è¯‘å™¨æ‰¿è¯ºä»»ä½•ç‰¹å‹åŒ–çš„åŸºç±»æ¨¡æ¿éƒ½æ”¯æŒé€šç”¨æ¨¡æ¿çš„æ¥å£ã€‚è¿™ç§æ‰¿è¯ºæ˜¯ç¼–è¯‘å™¨åœ¨å¤„ç†ç±»ä¼¼LoggingMsgSenderçš„æ´¾ç”Ÿç±»æ¨¡æ¿æ‰€éœ€è¦çš„ï¼Œä½†æ˜¯å¦‚æœæ‰¿è¯ºæ²¡å®ç°ï¼Œå°±ä¼šå¯¼è‡´åç»­çš„ç¼–è¯‘å‡ºé”™ï¼Œæ¯”å¦‚ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">LoggingMsgSender&lt;CompanyZ&gt; zMsgSender;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MsgInfo msgData;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zMsgSender.sendClearMsg(msgData);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ä»¥ä¸Šå¯¹sendClearMsgçš„è°ƒç”¨å¹¶ä¸ä¼šç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºç¼–è¯‘å™¨çŸ¥é“åŸºç±»æ˜¯<code>MsgSender&lt;CompanyZ&gt;</code>ç‰¹å‹åŒ–æ¨¡æ¿ç±»ï¼Œä½†æ˜¯è¿™ä¸ªç±»æ²¡æœ‰æä¾›sendClearMsgæ–¹æ³•è°ƒç”¨ã€‚æœ€æ ¹æœ¬çš„é—®é¢˜åœ¨äºç¼–è¯‘å™¨å¯¹åŸºç±»åç§°çš„æ— æ•ˆå¼•ç”¨çš„åˆ¤æ–­æ˜¯æå‰(åœ¨æ´¾ç”Ÿç±»æ¨¡æ¿å®šä¹‰è§£ææ—¶)è¿˜æ˜¯ç¨æ™šäº›(åœ¨å®ä¾‹åŒ–æ¨¡æ¿æ—¶)ï¼ŒC++çš„ç­–ç•¥æ˜¯åå‘æ—©æœŸè¯Šæ–­ï¼Œå› æ­¤å‡è®¾å¯¹æ¨¡æ¿åŸºç±»çš„å†…å®¹ä¸€æ— æ‰€çŸ¥</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ€»ç»“</h5></div><div class="admonition-content"><p>åœ¨æ´¾ç”Ÿç±»æ¨¡æ¿ä¸­ï¼Œé€šè¿‡<code>this-&gt;</code>å‰ç¼€ï¼Œusingè¯­å¥å’ŒåŸºç±»åç§°å‰ç¼€æ¥å¼•ç”¨åŸºç±»æ¨¡æ¿ä¸­çš„åç§°</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="item44å°†ç±»å‹å‚æ•°æ— å…³çš„ä»£ç ä»æ¨¡æ¿ä¸­åˆ†ç¦»">Item44:å°†ç±»å‹å‚æ•°æ— å…³çš„ä»£ç ä»æ¨¡æ¿ä¸­åˆ†ç¦»<a class="hash-link" href="#item44å°†ç±»å‹å‚æ•°æ— å…³çš„ä»£ç ä»æ¨¡æ¿ä¸­åˆ†ç¦»" title="Direct link to heading">â€‹</a></h2><p>æ¨¡æ¿æ˜¯ä¸€ç§èŠ‚çœæ—¶é—´å’Œä»£ç é‡å¤çš„ç¥å¥‡æ–¹æ³•ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨ä¸å½“ä¼šé€ æˆ<em>ä»£ç è†¨èƒ€(code bloat)</em>ï¼šç¨‹åºå«æœ‰é‡å¤çš„ä»£ç å’Œæ•°æ®ã€‚è¡¨é¢ä¸Šæºä»£ç å¾ˆå°‘ï¼Œä½†æ˜¯ç›®æ ‡ä»£ç å´å¾ˆå¤šï¼Œéœ€è¦äº†è§£å¦‚ä½•é¿å…è¿™ç§é—®é¢˜ã€‚ä¸»è¦çš„æ–¹æ³•æ˜¯<em>å…¬å…±åˆ†æ</em>å’Œ<em>å·®å¼‚åˆ†æ</em>ï¼Œå½“ä½ åœ¨å†™ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‘ç°è¯¥å‡½æ•°çš„éƒ¨åˆ†å®ç°ä»£ç å’Œå¦ä¸€ä¸ªå‡½æ•°çš„å®ç°ä»£ç åŸºæœ¬ç›¸åŒï¼Œä½ ä¼šé€‰æ‹©æŠŠå…¬å…±ä»£ç ä»è¿™ä¸¤ä¸ªå‡½æ•°ä¸­ç§»å‡ºåˆ°ç¬¬ä¸‰ä¸ªå‡½æ•°ï¼Œå¹¶è®©è¿™ä¸¤ä¸ªå‡½æ•°è°ƒç”¨ç¬¬ä¸‰ä¸ªå‡½æ•°ï¼Œè¿™å°±æ˜¯å…¬å…±åˆ†æå’Œå·®å¼‚åˆ†æï¼šæŠŠå…¬å…±éƒ¨åˆ†å–å‡ºæ”¾åˆ°æ–°å‡½æ•°ï¼Œä¿ç•™åŸå‡½æ•°çš„å·®å¼‚éƒ¨åˆ†ã€‚ç±»ä¼¼åœ°ï¼Œåœ¨ç¼–å†™ç±»æ—¶å‘ç°å’Œå¦ä¸€ä¸ªç±»éƒ¨åˆ†é‡å ï¼Œä½ é€‰æ‹©æŠŠå…¬å…±éƒ¨åˆ†æ•´ç†ä¸ºå¦ä¸€ä¸ªç±»ï¼Œç„¶åä½¿ç”¨ç»§æ‰¿æˆ–ç»„åˆæ¥è®©åŸæ¥çš„ç±»èƒ½å¤Ÿä¿ç•™å·®å¼‚éƒ¨åˆ†è€Œä½¿ç”¨å…¬å…±éƒ¨åˆ†ã€‚åœ¨ç¼–å†™æ¨¡æ¿æ—¶ï¼Œä½ ä¹Ÿåœ¨åšç›¸åŒçš„åˆ†æï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œéæ¨¡æ¿ä¸­çš„ä»£ç é‡å¤æ˜¯æ˜æ˜¾çš„ï¼Œä½ å¯ä»¥åœ¨ä¸¤ä¸ªå‡½æ•°æˆ–ç±»ä¸­çœ‹å‡ºæ¥ï¼Œè€Œæ¨¡æ¿ä¸­çš„ä»£ç é‡å¤å¹¶ä¸æ˜¯ï¼Œå› ä¸ºæ¨¡æ¿åªæœ‰ä¸€ä»½ï¼Œæ‰€ä»¥éœ€è¦è®­ç»ƒå¯¹æ¨¡æ¿å®ä¾‹åŒ–æ—¶ä»£ç é‡å¤çš„æ„ŸçŸ¥ã€‚æ¯”å¦‚ï¼Œä½ è¦ä¸ºå›ºå®šå¤§å°çš„çŸ©é˜µå†™ä¸ªæ”¯æŒæ±‚é€†çš„æ¨¡æ¿ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T, std::size_t n&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SquareMatrix {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void invert();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¯¥æ¨¡æ¿ä½¿ç”¨ç±»å‹å‚æ•°Tå’Œéç±»å‹å‚æ•°nï¼Œéç±»å‹å‚æ•°æ²¡æœ‰ç±»å‹å‚æ•°é€šç”¨ï¼Œä½†éƒ½æ˜¯åˆæ³•çš„ã€‚ç°åœ¨è€ƒè™‘å¦‚ä¸‹ä»£ç ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">SquareMatrix&lt;double, 5&gt; sm1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sm1.invert();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SquareMatrix&lt;double, 10&gt; sm2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sm2.invert();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¿™é‡Œä¼šå®ä¾‹åŒ–ä¸¤ä»½invertå‡½æ•°ï¼Œè™½ç„¶å®ƒä»¬æ²¡æœ‰å®Œå…¨ä¸€æ¨¡ä¸€æ ·ï¼Œä½†åªæ˜¯é™¤äº†å¸¸æ•°5å’Œ10ä¸åŒï¼Œè¿™æ˜¯å…¸å‹çš„æ¨¡æ¿ä»£ç è†¨èƒ€ã€‚ä½ çš„ç›´è§‰æ˜¯ä½¿ç”¨å‚æ•°æ¥æ›¿ä»£5å’Œ10ï¼Œè¿™æ˜¯æ­£ç¡®çš„ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SquareMatrixBase {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void invert(std::size_t maxtrixSize);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T, std::size_t n&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SquareMatrix: private SquareMatrixBase&lt;T&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        using SquareMatrixBase&lt;T&gt;::invert;      // usingå£°æ˜é¿å…è¦†ç›–åŸºç±»åç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void invert() { this-&gt;invert(n); }      // è°ƒç”¨æ¨¡æ¿åŸºç±»åç§°è¦åŠ ä¸Šé™å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ä½†æ˜¯ï¼Œinverå‡½æ•°è¿˜éœ€è¦çŸ¥é“æ•°æ®æ‰èƒ½æ±‚é€†ï¼Œåªæœ‰å¤§å°æ˜¯ä¸å¤Ÿçš„ï¼Œä¸ºæ­¤åœ¨SquareMatrixBaseä¸­æ·»åŠ æˆå‘˜æŒ‡é’ˆæ¥æŒ‡å‘çŸ©é˜µæ•°æ®çš„åœ°å€ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SquareMatrixBase {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void invert(std::size_t n, T* pMem)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        :size(n), pData(pMem) {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        void setDataPtr(T *ptr) { pData = ptr; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        std::size_t size;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T* pData;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T, std::size_t n&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SquareMatrix: private SquareMatrixBase&lt;T&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SquareMatrix()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        :SquareMatrixBase&lt;T&gt;(n, data) {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T data[n*n];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ä»¥ä¸Šä»£ç å¹¶æ²¡æœ‰ä½¿ç”¨åŠ¨æ€å†…å­˜åˆ†é…ï¼Œå†æ¬¡æ”¹è¿›ä¸‹ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T, std::size_t n&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SquareMatrix: private SquareMatrixBase&lt;T&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SquareMatrix()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        :SquareMatrixBase&lt;T&gt;(n, 0), pData(new T[n*n]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this-&gt;setDataPtr(pData.get());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        boost::scoped_array&lt;T&gt; pData;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å…ˆä¸ç®¡æ•°æ®å­˜å‚¨åœ¨å“ªé‡Œï¼Œç°åœ¨å¯èƒ½å¼•èµ·ä»£ç è†¨èƒ€çš„åŸå› æ˜¯SquareMatrixçš„æ–¹æ³•éƒ½æ˜¯å†…è”çš„ï¼ŒåŒæ—¶SquareMatrixä¸åŒä½“ç§¯çš„å¯¹è±¡æ˜¯åŒºåˆ†å¼€æ¥çš„ï¼Œå³ä¾¿<code>SquareMatrix&lt;double, 5&gt;</code>å’Œ<code>SquareMatrix&lt;double, 10&gt;</code>ä½¿ç”¨<code>SquareMatrixBase&lt;double&gt;</code>ä¸­çš„ç›¸åŒæ–¹æ³•ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•ç»™æ¥å—<code>SquareMatrix&lt;double, 10&gt;</code>å‚æ•°çš„å‡½æ•°ä¼ é€’ä¸€ä¸ª<code>SquareMatrix&lt;double, 5&gt;</code>å¯¹è±¡ã€‚ä½†æ˜¯æ²¡æœ‰å…è´¹çš„åˆé¤ï¼Œä¸€å¼€å§‹çŸ©é˜µå¤§å°ç¡¬ç¼–ç çš„invertå‡½æ•°å¯èƒ½æ¯”åè€…ä½“ç§¯ä½œä¸ºå‡½æ•°å‚æ•°çš„invertç‰ˆæœ¬ç”Ÿæˆæ›´å¥½çš„ä»£ç ï¼Œæ¯”å¦‚ä½“ç§¯æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå¯ä»¥è¿›è¡Œä¼˜åŒ–å¦‚ä½œä¸ºæŒ‡ä»¤çš„ç«‹å³æ•°ï¼Œè€Œåè€…ä¸èƒ½è¿›è¡Œè¿™æ ·çš„ä¼˜åŒ–ã€‚è€Œåœ¨å¦ä¸€æ–¹é¢ï¼Œä¸åŒä½“ç§¯çŸ©é˜µåªæœ‰ä¸€ä¸ªç‰ˆæœ¬invertæ–¹æ³•å‡å°‘ç¨‹åºä½“ç§¯ï¼Œæé«˜æŒ‡ä»¤cacheçš„å‘½ä¸­ç‡ï¼Œè®©ç¨‹åºè·‘å¾—æ›´å¿«ã€‚é‚£åˆ°åº•å“ªç§æ›´å¥½ï¼Ÿéƒ½è¯•ä¸€ä¸‹æ¯”è¾ƒæ‰èƒ½å¾—å‡ºç»“è®º</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>æ¨¡æ¿ç”Ÿæˆå¤šä»½ç±»å’Œå‡½æ•°ï¼Œä»»ä½•ä¸ä¾èµ–æ¨¡æ¿ç±»å‹å‚æ•°çš„ä»£ç éƒ½ä¼šå¼•èµ·ä»£ç è†¨èƒ€ï¼›ç”±éç±»å‹å‚æ•°å¼•èµ·çš„ä»£ç è†¨èƒ€å¯ä»¥é€šè¿‡æŠŠè¯¥å‚æ•°æ›¿æ¢ä¸ºå‡½æ•°å‚æ•°æˆ–è€…ç±»æ•°æ®æˆå‘˜æ¥æ¶ˆé™¤ï¼›ç”±ç±»å‹å‚æ•°å¼•èµ·çš„ä»£ç è†¨èƒ€å¯ä»¥é€šè¿‡å…±äº«åº•å±‚è¡¨ç¤ºç±»å‹(æŒ‡é’ˆ)æ¥æ¶ˆé™¤</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="item45ä½¿ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥æ¥å—æ‰€æœ‰çš„å…¼å®¹ç±»å‹">Item45:ä½¿ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥æ¥å—æ‰€æœ‰çš„â€œå…¼å®¹ç±»å‹â€<a class="hash-link" href="#item45ä½¿ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥æ¥å—æ‰€æœ‰çš„å…¼å®¹ç±»å‹" title="Direct link to heading">â€‹</a></h2><p><em>æ™ºèƒ½æŒ‡é’ˆ</em>è¡¨ç°å¾—åƒæŒ‡é’ˆä½†æ˜¯æ·»åŠ äº†é¢å¤–çš„åŠŸèƒ½ï¼Œåœ¨STLä¸­çš„è¿­ä»£å™¨å‡ ä¹å°±æ˜¯æ™ºèƒ½æŒ‡é’ˆå®ç°çš„ï¼Œå¯¹äºé“¾è¡¨æ¥è¯´ï¼Œæ™®é€šæŒ‡é’ˆä¸èƒ½é€šè¿‡<code>++</code>æ“ä½œç¬¦æ¥ç§»åŠ¨è‡³ä¸‹ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯list::iteratorå´å¯ä»¥åšåˆ°ã€‚æ™®é€šæŒ‡é’ˆè¡¨ç°è¾ƒå¥½çš„å°±æ˜¯æ”¯æŒéšå¼è½¬æ¢ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class Top { ... };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Middle: public Top { ... };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Bottom: public Middle { ... };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Top *pt1 = new Middle;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Top *pt2 = new Bottom;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const Top *pct2 = pt1;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è€Œç”¨æˆ·å®šä¹‰çš„æ™ºèƒ½æŒ‡é’ˆç±»æ¨¡æ‹Ÿè¿™ç§è½¬æ¢éœ€è¦æŠ€å·§ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SmartPtr {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        explicit SmartPtr(T *realPtr);      // æ™ºèƒ½æŒ‡é’ˆé€šå¸¸ç”¨æ™®é€šæŒ‡é’ˆåˆå§‹åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Smart&lt;Top&gt; pt1 = SmartPtr&lt;Middle&gt;(new Middle);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Smart&lt;Top&gt; pt2 = SmartPtr&lt;Bottom&gt;(new Bottom);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Smart&lt;const Top&gt; pct2 = pt1;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ç›¸åŒæ¨¡æ¿çš„ä¸åŒå®ä¾‹åŒ–ä¹‹é—´æ˜¯æ²¡æœ‰ç»§æ‰¿å…³ç³»çš„ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨æŠŠ<code>SmartPtr&lt;Middle&gt;</code>å’Œ<code>SmartPtr&lt;Top&gt;</code>è§†ä¸ºä¸ç›¸å¹²çš„ç±»ï¼Œä¸ºäº†å®Œæˆè½¬æ¢ï¼Œéœ€è¦ç¼–å†™ä»£ç ã€‚è§‚å¯Ÿä»¥ä¸Šçš„æ ·ä¾‹ä»£ç ï¼Œæ¯è¡Œè¯­å¥åˆ›å»ºä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ï¼Œæ‰€ä»¥åªè¦å…³æ³¨äºæ„é€ å‡½æ•°ï¼Œä½†æ³¨æ„ä¸å¯èƒ½å†™å‡ºæ‰€æœ‰æ‰€éœ€è¦çš„æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®<code>SmartPtr&lt;Middle&gt;</code>æ„é€ <code>SmartPtr&lt;Top&gt;</code>ï¼Œä½†æ˜¯å¦‚æœå°†æ¥åˆæ·»åŠ äº†æ–°çš„æ´¾ç”Ÿç±»ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class BelowBottom: public Bottom { ... };</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æ­¤æ—¶éœ€è¦æ”¯æŒæ ¹æ®<code>SmartPtr&lt;BlowBottom&gt;</code>åˆ›å»º<code>SmartPtr&lt;Top&gt;</code>å¯¹è±¡ï¼Œåˆä¸å¾—ä¸ä¿®æ”¹SmartPtræ¨¡æ¿ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸æƒ³è¦çš„ã€‚åŸåˆ™ä¸Šæ„é€ å‡½æ•°çš„æ•°é‡æ˜¯æ— é™çš„ï¼Œå› ä¸ºæ¨¡æ¿å¯ä»¥ç”Ÿæˆæ— é™é‡çš„å‡½æ•°ï¼Œä¼¼ä¹å¯ä»¥å†™ä¸€ä¸ªæ„é€ å‡½æ•°æ¨¡æ¿æ¥ç”Ÿæˆç±»æˆå‘˜å‡½æ•°ï¼Œè¿™ç§æ¨¡æ¿è¢«ç§°ä¸º<em>æˆå‘˜å‡½æ•°æ¨¡æ¿</em>(æˆ–è€…æˆå‘˜æ¨¡æ¿)ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SmartPtr {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template&lt;typename U&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SmartPtr(const SmartPtr&lt;U&gt;&amp; other);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ä»¥ä¸Šä»£ç è¯´æ˜å¯¹äºæ¯ä¸ªç±»å‹Tå’ŒUï¼Œ<code>SmartPtr&lt;T&gt;</code>å¯¹è±¡å¯ä»¥æ ¹æ®<code>SmartPtr&lt;U&gt;</code>å¯¹è±¡åˆ›å»ºï¼Œåƒè¿™ç§ä»å¦ä¸€ç§æ¨¡æ¿å®ä¾‹åŒ–å‡ºæ¥çš„ç±»å‹åˆ›å»ºå¯¹è±¡çš„æ„é€ å‡½æ•°è¢«ç§°ä¸º<em>é€šç”¨æ‹·è´æ„é€ å‡½æ•°</em>ï¼Œæ³¨æ„æ„é€ å‡½æ•°æ•…æ„æ²¡æœ‰å£°æ˜ä¸ºexplicitçš„ï¼Œè¿™æ ·æ™ºèƒ½æŒ‡é’ˆç±»èƒ½æ¨¡æ‹Ÿæ™®é€šæŒ‡é’ˆçš„éšå¼ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯é€šç”¨æ‹·è´æ„é€ å‡½æ•°è¿‡äºâ€œé€šç”¨â€ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code>SmartPtr&lt;Top&gt;</code>å¯¹è±¡åˆ›å»º<code>SmartPtr&lt;Bottom&gt;</code>å¯¹è±¡ï¼Œä½†è¿™ä¸æ˜¯å…¬æœ‰ç»§æ‰¿çš„å«ä¹‰(æ´¾ç”Ÿç±»æ˜¯ä¸€ç§åŸºç±»ï¼Œåä¹‹ä¸æˆç«‹)ï¼Œç”¨<code>SmartPtr&lt;int&gt;</code>å¯¹è±¡åˆ›å»º<code>SmartPtr&lt;double&gt;</code>å¯¹è±¡ï¼Œä½†æ²¡æœ‰<code>int*</code>åˆ°<code>double*</code>çš„éšå¼è½¬æ¢ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŒ‘é€‰é€šç”¨å‡½æ•°æ¨¡æ¿ç”Ÿæˆçš„å‡½æ•°ã€‚å‡è®¾SmartPtråƒauto_pträ¸€æ ·æä¾›getæ–¹æ³•è¿”å›å…¶åŒ…å«çš„æ™®é€šæŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ„é€ å‡½æ•°æ¨¡æ¿çš„å®ç°æ¥é™åˆ¶ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SmartPtr {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template&lt;typename U&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SmartPtr(const SmartPtr&lt;U&gt;&amp; other)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        :heldPtr(other.get()) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T* get() const { return heldPtr; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        T *heldPtr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¿™æ ·ï¼Œåªæœ‰å½“<code>U*</code>æŒ‡é’ˆèƒ½å¤Ÿè¢«éšå¼è½¬æ¢ä¸º<code>T*</code>æŒ‡é’ˆæ—¶æ‰èƒ½ç¼–è¯‘é€šè¿‡ï¼Œç°åœ¨<code>SmartPtr&lt;T&gt;</code>æ‹¥æœ‰é€šç”¨æ¨¡æ¿å‡½æ•°ï¼ŒåŒæ—¶åˆå¯¹å…¼å®¹ç±»å‹æœ‰é™åˆ¶ã€‚æˆå‘˜å‡½æ•°æ¨¡æ¿ä¸ä»…é€‚ç”¨äºæ„é€ å‡½æ•°ï¼Œå¦ä¸€ä¸ªå¸¸ç”¨åœºæ™¯æ˜¯èµ‹å€¼ã€‚æ¯”å¦‚std::shared_ptræ”¯æŒä»æ‰€æœ‰å…¶ä»–æ™®é€šæŒ‡é’ˆå’Œæ™ºèƒ½æŒ‡é’ˆæ„é€ ï¼Œä»¥åŠé™¤std::weak_ptrå¤–çš„æ‰€æœ‰æŒ‡é’ˆçš„èµ‹å€¼ï¼Œä»¥ä¸‹æ˜¯å…¶éƒ¨åˆ†ä»£ç æ‘˜å½•ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;class T&gt; class shared_ptr {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template&lt;class Y&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        explicit shared_ptr(Y *p);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template&lt;class Y&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shared_ptr(shared_ptr&lt;Y&gt; const&amp; r);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template&lt;class Y&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        explicit shared_ptr(weak_ptr&lt;Y&gt; const&amp; r);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template&lt;class Y&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        explicit shared_ptr(auto_ptr&lt;Y&gt;&amp; r);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template&lt;class Y&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shared_ptr&amp; operator=(shared_ptr&lt;Y&gt; const&amp; r);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template&lt;class Y&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shared_ptr&amp; operator=(auto_ptr&lt;Y&gt;&amp; r);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ä»¥ä¸Šæ‰€æœ‰æ„é€ å‡½æ•°é™¤äº†é€šç”¨æ‹·è´æ„é€ æ¨¡æ¿å‡½æ•°éƒ½å£°æ˜ä¸ºexplicitï¼Œè¿™æ„å‘³ç€ä»<code>shared_ptr&lt;Y&gt;</code>åˆ°<code>shared_ptr&lt;T&gt;</code>çš„éšå¼è½¬åŒ–å¯è¡Œï¼Œä½†æ˜¯ä»æ™®é€šæŒ‡é’ˆæˆ–è€…å…¶ä»–æŒ‡é’ˆæŒ‡é’ˆåˆ°<code>shared_ptr&lt;T&gt;</code>çš„éšå¼è½¬æ¢æ˜¯ä¸å¯è¡Œçš„(é™¤äº†æ˜¾å¼çš„å¼ºåˆ¶ç±»å‹è½¬æ¢)ï¼Œå¦å¤–å€¼å¾—æ³¨æ„çš„æ˜¯auto_ptrsä½œä¸ºå‚æ•°çš„æ„é€ å‡½æ•°æ˜¯æ²¡æœ‰åŠ constçš„ï¼Œå› ä¸ºå®ƒä»¬è¢«æ‹·è´æ—¶ä¼šè¢«ä¿®æ”¹(è§Item13)ã€‚æˆå‘˜æ¨¡æ¿å‡½æ•°ä¸ä¼šä¿®æ”¹è¯­è¨€çš„åŸºæœ¬ç‰¹æ€§ï¼Œåœ¨Item5ä¸­æåˆ°ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼æ“ä½œç¬¦å‡½æ•°ï¼Œå½“shared_ptrçš„é€šç”¨æ„é€ æ¨¡æ¿å‡½æ•°çš„Tå’ŒYç›¸åŒæ—¶ï¼Œé‚£ç¼–è¯‘å™¨æ˜¯è‡ªåŠ¨ç”Ÿæˆä»£ç è¿˜æ˜¯å®ä¾‹åŒ–æ„é€ å‡½æ•°æ¨¡æ¿å‘¢ï¼Ÿå› ä¸ºåœ¨ç±»ä¸­å£°æ˜é€šç”¨æ‹·è´æ„é€ å‡½æ•°(æˆå‘˜æ¨¡æ¿)å¹¶ä¸å¦¨ç¢ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°(éæ¨¡æ¿)ï¼Œå¦‚æœæƒ³è¦æ§åˆ¶å…¨å±€ï¼Œå¿…é¡»åŒæ—¶å£°æ˜é€šç”¨æ‹·è´æ„é€ å‡½æ•°å’Œâ€œæ­£å¸¸â€æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹äºèµ‹å€¼æ“ä½œç¬¦å‡½æ•°ä¹Ÿä¸€æ ·ï¼Œä»¥ä¸‹æ˜¯shared_ptrçš„ä»£ç æ‘˜å½•ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;class T&gt; class shared_ptr {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shared_ptr(shared_ptr const&amp; r);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template&lt;class Y&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shared_ptr(shared_ptr&lt;Y&gt; const&amp; r);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shared_ptr&amp; operator=(shared_ptr const&amp; r);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template&lt;class Y&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shared_ptr&amp; operator=(shared_ptr&lt;Y&gt; const&amp; r);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ€»ç»“</h5></div><div class="admonition-content"><p>ä½¿ç”¨æˆå‘˜æ¨¡æ¿å‡½æ•°æ¥ç”Ÿæˆæ¥å—æ‰€æœ‰å…¼å®¹ç±»å‹çš„å‡½æ•°ï¼›å£°æ˜äº†é€šç”¨æ‹·è´æ„é€ å‡½æ•°å’Œé€šç”¨èµ‹å€¼æ“ä½œç¬¦å‡½æ•°(éƒ½æ˜¯æˆå‘˜æ¨¡æ¿)ï¼Œè¿˜éœ€è¦å£°æ˜å®ƒä»¬çš„æ™®é€šç‰ˆæœ¬</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="item46å½“éœ€è¦ç±»å‹è½¬æ¢æ—¶åœ¨æ¨¡æ¿å†…å®šä¹‰å‹å…ƒå‡½æ•°">Item46:å½“éœ€è¦ç±»å‹è½¬æ¢æ—¶åœ¨æ¨¡æ¿å†…å®šä¹‰å‹å…ƒå‡½æ•°<a class="hash-link" href="#item46å½“éœ€è¦ç±»å‹è½¬æ¢æ—¶åœ¨æ¨¡æ¿å†…å®šä¹‰å‹å…ƒå‡½æ•°" title="Direct link to heading">â€‹</a></h2><p>Item24æ”¯å‡ºå½“æ‰€æœ‰å‚æ•°éœ€è¦ç±»å‹è½¬æ¢æ—¶ä½¿ç”¨éæˆå‘˜å‡½æ•°æ˜¯åˆé€‚çš„ï¼Œé€šè¿‡Rationalç±»çš„<code>operator*</code>æ“ä½œç¬¦é‡è½½å‡½æ•°è¯´æ˜ï¼Œåœ¨ç»§ç»­é˜…è¯»ä¹‹å‰æœ€å¥½å›é¡¾ä¸€ä¸‹ï¼Œå› ä¸ºæœ¬èŠ‚å°†ç»§ç»­æ‰©å±•è¯¥ä¾‹å­ï¼Œå¯¹Rationç±»å’Œ<code>operating*</code>éƒ½æ¨¡æ¿åŒ–ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Rational {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Rational (const T&amp; numerator = 0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  const T&amp; denominator = 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const T numerator() const;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const T denominator() const;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const Rational&lt;T&gt; operator*(const Rational&lt;T&gt;&amp; lhs,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            const Rational&lt;T&gt;&amp; rhs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rational&lt;int&gt; oneHalf(1, 2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rational&lt;int&gt; result = oneHalf * 2;     // é”™è¯¯ï¼Œä¸èƒ½è¿›è¡Œç¼–è¯‘ï¼</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æ­£å¦‚Item24ä¸€æ ·ï¼Œæˆ‘ä»¬æƒ³è¦å†…å»ºç±»å‹intèƒ½å’ŒRationalå¯¹è±¡è¿›è¡Œè¿ç®—ï¼Œä½†å’Œéæ¨¡æ¿ç‰ˆæœ¬çš„<code>operator*</code>å‡½æ•°ä¸ä¸€æ ·ï¼Œè¿™é‡Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚ç¼–è¯‘å™¨å°è¯•å®ä¾‹åŒ–<code>operator*&lt;&gt;</code>å‡½æ•°æ¨¡æ¿ï¼Œå‡½æ•°å‚æ•°éƒ½æ˜¯<code>Rational&lt;T&gt;</code>ç±»å‹ï¼Œæ‰€ä»¥éœ€è¦æ ¹æ®ä¼ å…¥çš„å®å‚æ¨å¯¼å‡ºTï¼Œåœ¨è¿™é‡Œï¼Œä¸¤ä¸ªå®å‚åˆ†åˆ«æ˜¯<code>Rational&lt;int&gt;</code>å’Œintï¼Œç”±ç¬¬ä¸€ä¸ªå®å‚å¾ˆå®¹æ˜“æ¨å¯¼å‡ºTä¸ºintï¼Œä½†æ˜¯ä»intæ¨å¯¼å‡ºTè¡¨ç¤ºä»€ä¹ˆç±»å‹å´å¾ˆéš¾ã€‚ä½ å¯èƒ½æœŸæœ›<code>Rational&lt;int&gt;</code>çš„éæ˜¾å¼çš„æ„é€ å‡½æ•°æŠŠintè½¬æ¢ä¸º<code>Rational&lt;int&gt;</code>ï¼Œç„¶åå°±å¯ä»¥æ¨å¯¼å‡ºTæ˜¯intï¼Œè¿™æ ·çš„ç±»å‹è½¬æ¢åœ¨å‡½æ•°è°ƒç”¨æœŸå‘ç”Ÿï¼Œä½†æ˜¯åœ¨è°ƒç”¨å‡½æ•°ä¹‹å‰ï¼Œä½ å¿…é¡»ç¡®å®šå­˜åœ¨å“ªäº›å‡½æ•°ï¼Œå› æ­¤ä½ éœ€è¦æ¨å¯¼å‚æ•°ç±»å‹(ä¹Ÿå°±æ˜¯å®ä¾‹åŒ–æ¨¡æ¿å‡½æ•°)ï¼Œä½†æ˜¯<strong>éšå¼çš„ç±»å‹è½¬æ¢åœ¨æ¨¡æ¿ç±»å‹å‚æ•°æ¨å¯¼æ˜¯ä»æ¥ä¸ä¼šè¢«è€ƒè™‘çš„</strong>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‹å…ƒå‡½æ•°å£°æ˜æ¥å‡ç¼“æ¨¡æ¿çš„ç±»å‹æ¨å¯¼ï¼Œ<strong>ç±»æ¨¡æ¿å¹¶ä¸éœ€è¦æ¨å¯¼æ¨¡æ¿å‚æ•°(åªæœ‰å‡½æ•°æ¨¡æ¿éœ€è¦)</strong>ï¼Œå› ä¸º<code>Rational&lt;T&gt;</code>æ¨¡æ¿ç±»å®ä¾‹åŒ–æ—¶Tçš„ç±»å‹æ€»æ˜¯å·²çŸ¥çš„ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Rational {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    friend const Rational operator*(const Rational&amp; lhs,    // æ³¨æ„è¿™é‡Œå‚æ•°ç±»å‹å†™æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    const Rational&amp; rhs);   // å’Œæ¨¡æ¿å‡½æ•°ç‰ˆæœ¬çš„ä¸åŒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const Rational&lt;T&gt; operator*(const Rational&lt;T&gt;&amp; lhs, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            const Rational&lt;T&gt;&amp; rhs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            { ... }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ç°åœ¨æ··åˆæ¨¡å¼è°ƒç”¨<code>operator*</code>å°†é€šè¿‡ç¼–è¯‘ï¼Œå› ä¸ºå½“å¯¹è±¡oneHalfè¢«å£°æ˜ä¸º<code>Rational&lt;int&gt;</code>æ—¶ï¼Œå®ä¾‹åŒ–å‡º<code>Rational&lt;int&gt;</code>ç±»ï¼ŒåŒæ—¶å®ä¾‹åŒ–å¾—åˆ°å‹å…ƒå‡½æ•°<code>const Rational&lt;int&gt; operator*(const Rational&lt;int&gt;&amp; lhs, const Rational&lt;int&gt;&amp; rhs)</code>ï¼Œä½œä¸ºå£°æ˜çš„å‡½æ•°(è€Œä¸æ˜¯å‡½æ•°æ¨¡æ¿)ï¼Œç¼–è¯‘å™¨å¯ä»¥åœ¨è¯¥è¯¥å‡½æ•°è¢«è°ƒç”¨æ—¶ä½¿ç”¨éšå¼ç±»å‹è½¬æ¢ã€‚ä½†æ˜¯ï¼Œæ‰€è°“çš„â€œæˆåŠŸâ€åœ¨è¿™é‡Œæ˜¯å‡çš„ï¼Œä»£ç è™½ç„¶é€šè¿‡ç¼–è¯‘ä½†æ˜¯åœ¨å¹¶ä¸ä¼šé“¾æ¥ï¼Œè¿™ä¸ªç¨åå†çœ‹ï¼Œé¦–å…ˆæˆ‘æƒ³å†å¼ºè°ƒä¸‹è¿™é‡Œä½¿ç”¨çš„ä¸€ç‚¹è¯­æ³•æŠ€å·§ï¼šåœ¨ç±»æ¨¡æ¿å†…éƒ¨ï¼Œæ¨¡æ¿çš„åç§°å¯ä»¥ç”¨äºæ¨¡æ¿åŠ å‚æ•°çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯<code>Rational</code>ç”¨äºè¡¨ç¤º<code>Rational&lt;T&gt;</code>ï¼Œä¹Ÿå¯ä»¥å±•å¼€å†™ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Rational {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    friend const Rational&lt;T&gt; operator*(const Rational&lt;T&gt;&amp; lhs,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       const Rational&lt;T&gt;&amp; rhs);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ä¸¤è€…æ˜¯ç­‰æ•ˆçš„ï¼Œä½†æ˜¯ç¼©å†™è®©ä»£ç æ›´åŠ ç®€æ´ï¼Œå›åˆ°ä¹‹å‰çš„é“¾æ¥é—®é¢˜ï¼Œå› ä¸ºæ²¡æœ‰åªæä¾›äº†å£°æ˜ä½†æ²¡æœ‰å®šä¹‰ï¼Œå‡½æ•°æ¨¡æ¿å®ä¾‹åŒ–åä¼šæœ‰å®šä¹‰ï¼Œå’Œè¿™é‡Œçš„å‹å…ƒå‡½æ•°æ¨¡æ¿ä¸åŒï¼Œç®€å•çš„æ–¹å¼å°±æ˜¯åœ¨å£°æ˜çš„åŒæ—¶å†™ä¸Šå‡½æ•°ä½“ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Rational {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    friend const Rational&lt;T&gt; operator*(const Rational&lt;T&gt;&amp; lhs,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       const Rational&lt;T&gt;&amp; rhs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Rational(lhs.numerator() * rhs.numerator(), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        lhs.denominator() * rhs.denominator());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ç°åœ¨ä¸€åˆ‡æ­£å¸¸ç¼–è¯‘è¿è¡Œã€‚æœ‰è¶£çš„æ˜¯ä½¿ç”¨å‹å…ƒå’Œè®¿é—®ç±»çš„éå…¬æœ‰éƒ¨åˆ†æ²¡æœ‰å…³ç³»ï¼šä¸ºäº†ä¿è¯ä¸åŒç±»å‹éƒ½èƒ½è°ƒç”¨<code>operator*</code>ï¼Œéœ€è¦å£°æ˜å®ƒä¸ºéç±»æˆå‘˜å‡½æ•°ï¼Œä¸ºäº†è®©å‡½æ•°è‡ªåŠ¨å®Œæˆå®ä¾‹åŒ–ï¼Œéœ€è¦æŠŠå®ƒçš„å£°æ˜æ”¾åœ¨ç±»é‡Œé¢ï¼Œè¿™æ ·ä¸€æ¥å”¯ä¸€çš„æ–¹å¼å°±æ˜¯å£°æ˜ä¸ºå‹å…ƒå‡½æ•°ã€‚æ­£å¦‚Item30æ‰€è§£é‡Šçš„ï¼Œå®šä¹‰åœ¨ç±»ä¸­çš„å‡½æ•°é»˜è®¤ä¸ºå†…è”çš„ï¼Œä½ å¯ä»¥é€šè¿‡è®©å†…è”å‡½æ•°åªè°ƒç”¨ä¸€ä¸ªhelperå‡½æ•°æ¥æœ€å°åŒ–å†…è”çš„å½±å“ï¼Œä½†åœ¨è¿™é‡Œæ²¡æœ‰å¿…è¦å› ä¸ºå®ƒçš„å®ç°å·²ç»æ˜¯æœ€ç®€å•çš„äº†ï¼Œåªæœ‰ä¸€è¡Œã€‚å®é™…ä¸ŠRationalæ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»æ„å‘³ç€helperå‡½æ•°é€šå¸¸ä¹Ÿéœ€è¦æ˜¯ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œæ‰€ä»¥å®šä¹‰Rationalçš„å¤´æ–‡ä»¶çš„å†…å®¹å¯èƒ½æ˜¯ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt; class Rational;        // å‘å‰å£°æ˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const Rational&lt;T&gt; doMultiply(const Rational&lt;T&gt;&amp; lhs,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             const Rational&lt;T&gt;&amp; rhs);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Rational {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    friend const Rational&lt;T&gt; operator*(const Rational&lt;T&gt;&amp; lhs,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       const Rational&lt;T&gt;&amp; rhs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { return doMultiply(lhs, rhs); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è®¸å¤šç¼–è¯‘å™¨è¦æ±‚æŠŠæ¨¡æ¿å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶é‡Œé¢ï¼Œæ‰€ä»¥éœ€è¦åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰doMutiplyï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const Rational&lt;T&gt; doMultiply(const Rational&lt;T&gt;&amp; lhs,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             const Rational&lt;T&gt;&amp; rhs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Rational&lt;T&gt;(lhs.numerator() * rhs.numerator(), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       lhs.denominator() * rhs.denominator());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ä½œä¸ºæ¨¡æ¿å‡½æ•°ï¼ŒdoMultiplyä¸èƒ½æ”¯æŒæ··åˆæ¨¡å¼çš„ä¹˜æ³•ï¼Œä½†æ˜¯å®ƒä¸éœ€è¦æ”¯æŒï¼Œå› æ­¤å®ƒåªä¼šè¢«<code>operator*</code>ï¼Œè€Œ<code>operator*</code>æ”¯æŒæ··åˆæ¨¡å¼æ“ä½œ</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>å½“ç¼–å†™åŒ…å«æ”¯æŒæ‰€æœ‰å‚æ•°éšå¼è½¬æ¢çš„å‡½æ•°çš„æ¨¡æ¿ç±»æ—¶ï¼Œå°†å‡½æ•°æ”¾åœ¨æ¨¡æ¿ç±»ä¸­å¹¶å®šä¹‰ä¸ºå‹å…ƒ</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="item47éœ€è¦ç±»å‹ä¿¡æ¯æ—¶ä½¿ç”¨ç‰¹æ€§ç±»">Item47:éœ€è¦ç±»å‹ä¿¡æ¯æ—¶ä½¿ç”¨ç‰¹æ€§ç±»<a class="hash-link" href="#item47éœ€è¦ç±»å‹ä¿¡æ¯æ—¶ä½¿ç”¨ç‰¹æ€§ç±»" title="Direct link to heading">â€‹</a></h2><p>STLä¸»è¦ç”±å®¹å™¨ï¼Œè¿­ä»£å™¨å’Œç®—æ³•çš„æ¨¡æ¿ç»„æˆï¼Œä½†ä¹ŸåŒ…å«ä¸€äº›å·¥å…·ç±»ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯advanceå‡½æ•°ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT, typename DistT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void advance(IterT&amp; iter, DistT d);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ä»æ¦‚å¿µä¸Šè®²ï¼Œadvanceå°±æ˜¯å®ç°<code>iter += d</code>ï¼Œä½†å®é™…ä¸Šæ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºåªæœ‰éšæœºè®¿é—®è¿­ä»£å™¨æ‰æ”¯æŒ<code>+=</code>æ“ä½œç¬¦ï¼Œæ›´å¼±ç‚¹çš„è¿­ä»£å™¨åªèƒ½ç”¨é‡å¤<code>++</code>å’Œ<code>--</code>æ“ä½œç¬¦dæ¬¡æ¥å®ç°ã€‚(âŠ™oâŠ™)â€¦ä¸è®°å¾—STLè¿­ä»£å™¨çš„åˆ†ç±»äº†ï¼Œè¿™é‡Œæˆ‘ä»¬ç¨ç¨å›é¡¾ä¸€ä¸‹ï¼Œä¸€å…±åˆ†ä¸º5ç§ï¼š</p><ul><li>è¾“å…¥è¿­ä»£å™¨ï¼šåªèƒ½å‘å‰ç§»åŠ¨ï¼Œå¹¶ä¸”æ¯æ¬¡åªèƒ½ç§»åŠ¨ä¸€æ­¥ï¼Œåªèƒ½è¯»å–æ‰€æŒ‡æ•°æ®ï¼Œå¹¶ä¸”åªèƒ½è¯»å–ä¸€æ¬¡ï¼Œè¿™ç±»è¿­ä»£å™¨å»ºæ¨¡åœ¨æŒ‡å‘è¾“å…¥æ–‡ä»¶çš„è¯»æŒ‡é’ˆä¸Šï¼Œä»¥std::istream_iteratorä¸ºä»£è¡¨</li><li>è¾“å‡ºè¿­ä»£å™¨ï¼šåªèƒ½å‘å‰ç§»åŠ¨ï¼Œå¹¶ä¸”æ¯æ¬¡åªèƒ½ç§»åŠ¨ä¸€æ­¥ï¼Œåªèƒ½å†™å…¥æ‰€æŒ‡æ•°æ®ï¼Œå¹¶ä¸”åªèƒ½å†™å…¥ä¸€æ¬¡ï¼Œè¿™ç±»è¿­ä»£å™¨å»ºæ¨¡åœ¨æŒ‡å‘è¾“å‡ºæ–‡ä»¶çš„å†™æŒ‡é’ˆä¸Šï¼Œä»¥std::ostream_iteratorä¸ºä»£è¡¨</li><li>å‘å‰è¿­ä»£å™¨ï¼šä»¥ä¸Šä¸¤ç§è¿­ä»£å™¨çš„æ‰€æœ‰åŠŸèƒ½çš„å¹¶é›†ï¼Œä½†è¯»å†™æ¬¡æ•°ä¸æ­¢ä¸€æ¬¡ï¼Œé€‚ç”¨äºå¤šéå†ç®—æ³•</li><li>åŒå‘è¿­ä»£å™¨ï¼šåœ¨å‘å‰è¿­ä»£å™¨çš„åŸºç¡€ä¸Šæ”¯æŒå‘åç§»åŠ¨ï¼Œæ¯”å¦‚STLä¸­listï¼Œsetï¼Œmultisetï¼Œmapå’Œmultimapçš„è¿­ä»£å™¨</li><li>éšæœºè¿­ä»£å™¨ï¼šåœ¨åŒå‘è¿­ä»£å™¨çš„åŸºç¡€ä¸Šæ”¯æŒä»»æ„ç§»åŠ¨æ­¥æ•°ï¼Œæ¯”å¦‚STLä¸­vectorï¼Œdequeå’Œstringçš„è¿­ä»£å™¨</li></ul><p>å¯¹äºæ¯ç§è¿­ä»£å™¨ï¼ŒC++æ ‡å‡†åº“ä¸­éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„<em>æ ‡è®°ç»“æ„ä½“</em>ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">struct input_iterator_tag {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct output_iterator_tag {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct forward_iterator_tag: public input_iterator_tag {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct bidirectional_iterator_tag: public forward_iterator_tag {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct random_access_iterator_tag: public bidirectional_iterator_tag {};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¿™äº›ç»“æ„ä¹‹é—´çš„ç»§æ‰¿è¡¨ç¤ºå®ƒä»¬æ˜¯â€œis-aâ€å…³ç³»(è§Item32)ï¼šæ¯”å¦‚å‘å‰è¿­ä»£å™¨æ˜¯ä¸€ç§è¾“å…¥è¿­ä»£å™¨ã€‚å›åˆ°advanceå‡½æ•°ï¼ŒåŸºäºä¸åŒè¿­ä»£å™¨åŠŸèƒ½ï¼Œå¯ä»¥é€‰æ‹©æœ€åˆé€‚çš„éšæœºè¿­ä»£å™¨ï¼ŒåŸºæœ¬çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT, typename DistT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void advance(IterT&amp; iter, DistT d) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(iter is a random access itertor) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        iter += d;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(d &gt;= 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while(d--) ++iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while(d++) --iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¿™éœ€è¦åˆ¤æ–­iteræ˜¯å¦ä¸ºéšæœºè¿­ä»£å™¨ï¼Œä¹Ÿå°±æ˜¯éœ€è¦çŸ¥é“iterçš„ç±»å‹ï¼Œè¿™æ—¶å°±éœ€è¦ç‰¹æ€§ç±»ï¼šä½¿ç”¨å®ƒèƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶è·å–ç±»å‹ä¿¡æ¯ã€‚traitsæ—¢ä¸æ˜¯å…³é”®å­—ä¹Ÿä¸æ˜¯c++ä¸­é¢„å…ˆå®šä¹‰å¥½çš„ç»“æ„ä½“ï¼Œè¯¥é¡¹æŠ€æœ¯æ”¯æŒå†…å»ºç±»å‹å’Œç”¨æˆ·å®šä¹‰ç±»å‹ã€‚ç‰¹æ€§ç±»ä¿å­˜ç±»å‹ä¿¡æ¯ï¼Œå¿…é¡»å’Œç±»å‹æ— å…³ï¼Œæ‰€ä»¥æ ‡å‡†æŠ€æœ¯æ˜¯ç”¨æ¨¡æ¿æˆ–è€…ç‰¹å‹åŒ–æ¨¡æ¿å®ç°ï¼Œå¯¹äºè¿­ä»£å™¨æ¥è¯´ï¼Œå¯¹åº”çš„æ ‡å‡†åº“æ¨¡æ¿æ˜¯<code>iterator_traits</code>ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct iterator_traits;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æ­£å¦‚ä½ æ‰€è§ï¼Œiterator_traitsæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œä¸€èˆ¬æ¥è¯´éƒ½æ˜¯ç”¨ç»“æ„ä½“å®ç°çš„ï¼Œä½†è¿˜æ˜¯ç§°è¿™ä¸ªç»“æ„ä½“ä¸º<strong>ç‰¹æ€§ç±»</strong>ã€‚å¯¹äºæ¯ä¸€ç§ç±»å‹IterTï¼Œåœ¨<code>iterator_traits&lt;IterT&gt;</code>ç»“æ„ä½“å†…éƒ½ä¼šå¯¹åº”å£°æ˜ä¸€ä¸ªiterator_categoryé‡å‘½åï¼Œè¯¥é‡å‘½åæ ‡è®°IterTæ‰€å±çš„è¿­ä»£å™¨ç±»åˆ«ã€‚iterator_traitsçš„å®ç°æ–¹å¼åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€æ˜¯å®ƒå¼ºåˆ¶è¦æ±‚æ‰€æœ‰ç”¨æˆ·å®šä¹‰çš„è¿­ä»£å™¨ç±»å‹éƒ½å¿…é¡»åŒ…å«ä¸€ä¸ªåç§°ä¸ºiterator_categoryçš„é‡å‘½åï¼Œå¯¹åº”æ­£ç¡®çš„æ ‡è®°ç»“æ„ä½“ï¼Œæ¯”å¦‚ä¸€ä¸ªdequeçš„è¿­ä»£å™¨çš„å®ç°å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;...&gt;   // æ¨¡æ¿å‚æ•°çœç•¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class deque {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        class iterator {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                typedef random_access_iterator_tag iterator_category;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è€Œlistçš„æ˜¯åŒå‘è¿­ä»£å™¨ï¼Œä»£ç å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;...&gt;   // æ¨¡æ¿å‚æ•°çœç•¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class list {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        class iterator {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                typedef bidirectional_iterator_tag iterator_category;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>iterator_traitsç±»ä»…ä»…å°±æ˜¯é‡å¤ç±»ä¸­åµŒå¥—çš„é‡å‘½åï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// ä½¿ç”¨typenameçš„åŸå› å›é¡¾Item42</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct iterator_traits {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typedef typename IterT::iterator_category iterator_category;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><strong>ä»¥ä¸Šå®ç°æ–¹å¼é€‚ç”¨äºç”¨æˆ·å®šä¹‰ç±»ï¼Œä½†æ˜¯å¯¹è¿­ä»£å™¨å°±æ˜¯æŒ‡é’ˆä¸èµ·ä½œç”¨ï¼Œå› ä¸ºæŒ‡é’ˆé‡Œé¢ä¸å¯èƒ½åµŒå¥—é‡å‘½å</strong>ï¼Œè€Œiterator_traitsçš„ç¬¬äºŒéƒ¨åˆ†å°±æ˜¯ç”¨äºå¤„ç†è¿™ç§æƒ…å†µï¼Œiterator_traitsä¼šä¸ºæŒ‡é’ˆæä¾›ä¸€ä¸ªéƒ¨åˆ†ç‰¹å‹åŒ–æ¨¡æ¿ï¼ŒæŒ‡é’ˆä¼šè¡¨ç°å¾—åƒéšæœºè¿­ä»£å™¨ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct iterator_traits&lt;IterT*&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typedef random_access_iterator_tag iterator_category;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è‡³æ­¤ï¼Œä½ å·²ç»çŸ¥é“äº†å¦‚ä½•è®¾è®¡å¹¶å®ç°ç‰¹æ€§ç±»ï¼š</p><ul><li>ç¡®å®šæƒ³è¦æä¾›çš„ç±»å‹ä¿¡æ¯(æ¯”å¦‚å¯¹è¿­ä»£å™¨æ¥è¯´å°±æ˜¯å®ƒä»¬çš„ç§ç±»)</li><li>é€‰æ‹©ä¸€ä¸ªæ ‡è®°ç±»å‹ä¿¡æ¯çš„åç§°(æ¯”å¦‚iterator_category)</li><li>æä¾›åŒ…å«ç±»å‹ä¿¡æ¯çš„æ¨¡æ¿ä»¥åŠä¸€äº›ç‰¹å‹æ¨¡æ¿(æ¯”å¦‚iterator_traits)</li></ul><p>é‰´äºiterator_traitså°±æ˜¯std::iterator_traitsï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å®Œå–„ä¸€å¼€å§‹å†™çš„advanceå‡½æ•°ä¼ªä»£ç ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT, typename DistT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void advance(IterT&amp; iter, DistT d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(typeid(typename std::iterator_traits&lt;IterT&gt;::iterator_category) == </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       typeid(std::random_access_iterator_tag))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è¿™æ ·çš„ä»£ç çœ‹ä¸Šå»å¥½åƒå¤Ÿäº†ï¼Œä½†è¿˜æ˜¯ä¸è¡Œã€‚é¦–å…ˆå®ƒä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œè¿™ä¸ªé—®é¢˜å°†åœ¨Item48ä¸­è®¨è®ºï¼Œå…¶æ¬¡æœ‰ä¸ªæ›´åŸºç¡€çš„é—®é¢˜ï¼šIterTçš„ç±»å‹åœ¨ç¼–è¯‘æ—¶å°±çŸ¥é“äº†ï¼Œä¹Ÿå°±æ˜¯<code>iterator_traits&lt;IterT&gt;::iterator_category</code>åœ¨ç¼–è¯‘æ—¶å°±å¯ä»¥ç¡®å®šäº†ï¼Œç„¶è€Œifè¯­å¥æ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œæ¡ä»¶é€‰æ‹©ï¼Œä¸ºä»€ä¹ˆæœ¬åœ¨ç¼–è¯‘æ—¶å¯ä»¥åšçš„äº‹è¦æ”¾åœ¨è¿è¡Œæ—¶æ¥åšï¼Ÿå®é™…ä¸Šå¯ä»¥ä½¿ç”¨å‡½æ•°é‡è½½æ¥å®Œæˆè¿™ä»¶äº‹æƒ…ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT, typename DistT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void doAdvance(IterT&amp; iter, DistT d,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               std::random_access_iterator_tag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{ iter += d; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT, typename DistT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void doAdvance(IterT&amp; iter, DistT d,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               std::bidirectional_iterator_tag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(d &gt;= 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while(d--) ++iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while(d++) --iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT, typename DistT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void doAdvance(IterT&amp; iter, DistT d,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               std::input_iterator_tag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(d &lt; 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw std::out_of_range(&quot;Negative distance&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    while(d--) ++iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å› ä¸ºforward_iterator_tagç»§æ‰¿è‡ªinput_iterator_tagï¼Œæ‰€ä»¥doAdvanceçš„input_iterator_tagé‡è½½ç‰ˆæœ¬ä¹Ÿé€‚ç”¨äºforward_iterator_tagï¼Œæ³¨æ„å®ƒçš„è·ç¦»å‚æ•°dä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œå¦åˆ™<code>while(d--)</code>å°†æ˜¯ä¸ªå¾ˆé•¿çš„å¾ªç¯ã€‚ç°åœ¨åªéœ€è¦advanceå‡½æ•°è°ƒç”¨doAdvanceå‡½æ•°å³å¯ï¼Œé‡è½½ä¼šåŒ¹é…æœ€é€‚åˆçš„ç‰ˆæœ¬ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT, typename DistT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void advance(IterT&amp; iter, DistT d) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    doAdvance(iter, d, typename std::iterator_traits&lt;IterT&gt;::iterator_category());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>ç°åœ¨æ€»ç»“å¦‚ä½•ä½¿ç”¨ç‰¹æ€§ç±»ï¼š</p><ul><li>åˆ›å»ºä¸€ç³»åˆ—çš„workerå‡½æ•°æˆ–å‡½æ•°æ¨¡æ¿ï¼Œæ¯”å¦‚doAdvanceï¼Œè¿™äº›å‡½æ•°çš„å‚æ•°æ¥å—ä¸åŒç‰¹æ€§ç±»ï¼Œæ ¹æ®æ¯ç§ç‰¹æ€§ç±»åŒ…å«çš„ä¿¡æ¯å®ç°å‡½æ•°</li><li>åˆ›å»ºè°ƒç”¨workerå‡½æ•°çš„masterå‡½æ•°ï¼Œæ¯”å¦‚advanceï¼Œå°†ç”±ç‰¹æ€§ç±»æä¾›çš„ç±»å‹ä¿¡æ¯ä½œä¸ºå®å‚ä¼ é€’</li></ul><p>ç‰¹æ€§ç±»å¹¿æ³›ä½¿ç”¨äºæ ‡å‡†åº“ä¸­ï¼Œæœ‰è·Ÿè¿­ä»£å™¨ç±»åˆ«ç›¸å…³çš„iterator_traitsç±»ï¼Œå®ƒä»¬æä¾›å…¶ä»–å…³äºè¿­ä»£å™¨çš„ç±»å‹ä¿¡æ¯ï¼Œæ¯”å¦‚åœ¨Item42ä¸­ç”¨åˆ°çš„value_typeå­—æ®µï¼Œä¹Ÿæœ‰char_traitsç±»ï¼ŒåŒ…å«å­—èŠ‚ç±»å‹ä¿¡æ¯ï¼Œä»¥åŠnumeric_limitsç±»(è¿™ä¸ªåå­—æœ‰ç‚¹å¥‡æ€ªï¼Œå…¶ä»–çš„éƒ½æ˜¯traitsç»“å°¾)ï¼ŒåŒ…å«æ•°å­—ç±»å‹ä¿¡æ¯å’Œå®ƒä»¬çš„æœ€å¤§å€¼/æœ€å°å€¼ï¼Œç­‰ç­‰</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ€»ç»“</h5></div><div class="admonition-content"><p>ç‰¹æ€§ç±»åœ¨ç¼–è¯‘æœŸæä¾›ç±»å‹ä¿¡æ¯ï¼Œå®ƒä»¬ç”±æ¨¡æ¿å’Œç‰¹å‹åŒ–æ¨¡æ¿å®ç°ï¼›é…åˆä½¿ç”¨å‡½æ•°é‡è½½ï¼Œç‰¹æ€§ç±»å¯ä»¥å®ç°ç¼–è¯‘å™¨çš„if-elseç±»å‹æµ‹è¯•</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="item48çŸ¥é“æ¨¡æ¿å…ƒç¨‹åº">Item48:çŸ¥é“æ¨¡æ¿å…ƒç¨‹åº<a class="hash-link" href="#item48çŸ¥é“æ¨¡æ¿å…ƒç¨‹åº" title="Direct link to heading">â€‹</a></h2><p>æ¨¡æ¿å…ƒç¨‹åº(TMP)æ˜¯å°±æ˜¯åŸºäºæ¨¡æ¿ç¼–å†™C++ç¨‹åºçš„è¿‡ç¨‹ï¼ŒC++ä¸€å¼€å§‹å¹¶æ²¡æœ‰è®¾è®¡æ¨¡æ¿ï¼Œä½†æ˜¯è‡ª90å¹´ä»£æ—©æœŸå‡ºç°TMPåï¼Œç”±äºå…¶å®ç”¨æ€§å°±è¢«åŠ å…¥C++è¯­è¨€ç‰¹æ€§ä¸­ï¼Œå¹¶å®æ–½åˆ°æ ‡å‡†åº“ä¸­ã€‚TMPæœ‰ä¸¤ç‚¹ä¼˜åŠ¿ï¼šç¬¬ä¸€ï¼Œè®©åŸæ¥å›°éš¾ç”šè‡³ä¸å¯å®ç°çš„ç¼–ç¨‹å˜å¾—ç®€å•ï¼›ç¬¬äºŒï¼ŒTMPåœ¨C++ç¼–è¯‘æœŸæ‰§è¡Œï¼ŒæŠŠè¿è¡Œæ—¶çš„å·¥ä½œè½¬ç§»åˆ°ç¼–è¯‘æ—¶ã€‚TMPçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯è®©è¿è¡Œæ—¶çš„é”™è¯¯èƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶è¢«æ£€æµ‹å‡ºï¼Œè¿˜æœ‰å°±æ˜¯åœ¨å‡ ä¹ä»»ä½•æ–¹é¢æå‡æ•ˆç‡ï¼šæ›´å°çš„å¯æ‰§è¡Œç¨‹åºï¼Œæ›´çŸ­çš„è¿è¡Œæ—¶é—´ï¼Œæ›´å°‘çš„å†…å­˜éœ€æ±‚ï¼Œä½†å°±æ˜¯æ¯”éTMPçš„ç¨‹åºè¦èŠ±æ›´å¤šçš„æ—¶é—´ã€‚å›é¡¾Item47ä¸­çš„advanceå‡½æ•°æ¨¡æ¿ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;typename IterT, typename DistT&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void advance(IterT&amp; iter, DistT d) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(typeid(typename std::iterator_traits&lt;IterT&gt;::iterator_category) == </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       typeid(std::random_access_iterator_tag))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        iter += d;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(d &gt;= 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while(d--) ++iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while(d++) --iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æˆ‘ä»¬è¯´è¿‡ä»¥ä¸ŠåŸºäºtypeidçš„æ–¹å¼æ•ˆç‡æ›´ä½äº›ï¼Œç¬¬ä¸€ç±»å‹æ£€æµ‹å‡ºç°åœ¨è¿è¡Œæ—¶è€Œä¸æ˜¯ç¼–è¯‘æ—¶ï¼Œå…¶æ¬¡æ‰§è¡Œè¿è¡Œæ—¶ç±»å‹æµ‹è¯•çš„ä»£ç å¿…é¡»å‡ºç°åœ¨äºŒè¿›åˆ¶ç¨‹åºä¸­ï¼Œå®é™…ä¸Šè¿™ä¸ªä¾‹å­å±•ç¤ºäº†TMPå¦‚ä½•æ¯”â€œæ­£å¸¸â€C++ç¨‹åºæ›´åŠ é«˜æ•ˆï¼Œå› ä¸ºæœ€åä½¿ç”¨çš„ç‰¹æ€§ç±»å°±æ˜¯TMPï¼Œæˆ‘ä»¬è¿˜æåˆ°è¿‡ä½¿ç”¨typeidçš„å®ç°æ–¹å¼ä¼šå‡ºç°ç¼–è¯‘é—®é¢˜ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">std::list&lt;int&gt;::iterator iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">advance(iter, 10);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>è®¾æƒ³å¦‚ä¸Šå‡½æ•°è°ƒç”¨å°†ä¼šç”Ÿæˆçš„ä»£ç ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">void advance(std::list&lt;int&gt;::iterator&amp; iter, int d) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(typeid(typename std::iterator_traits&lt;std::list&lt;int&gt;::iterator&gt;::iterator_category) == </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       typeid(std::random_access_iterator_tag))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        iter += d;      // å‡ºé”™ï¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(d &gt;= 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while(d--) ++iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while(d++) --iter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>åªæœ‰éšæœºè¿­ä»£å™¨æ”¯æŒ<code>+=</code>æ“ä½œç¬¦ï¼Œè€Œ<code>list&lt;int&gt;::iterator</code>å±äºåŒå‘è¿­ä»£å™¨ï¼Œå› æ­¤ifåˆ¤æ–­æ˜¯falseä¸ä¼šæ‰§è¡Œ<code>iter += d</code>ï¼Œä½†æ˜¯ç¼–è¯‘å™¨æœ‰ä¹‰åŠ¡ç¡®ä¿æ‰€æœ‰çš„ä»£ç éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå³ä½¿è¯¥ä»£ç ä¸æ‰§è¡Œã€‚TMPçš„å¾ªç¯å¹¶æ²¡æœ‰çœŸæ­£çš„å¾ªç¯ç»“æ„ï¼Œè€Œæ˜¯é€’å½’ï¼Œå¹¶ä¸”æ˜¯é€’å½’æ¨¡æ¿å®ä¾‹åŒ–ï¼Œå¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç åœ¨ç¼–è¯‘æ—¶è®¡ç®—é˜¶ä¹˜ï¼š</p><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;unsigned n&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Factorial {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enum { value = n * Factorial&lt;n-1&gt;::value };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">template&lt;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Factorial&lt;0&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enum { value = 1 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std::cout&lt;&lt;Factorial&lt;5&gt;::value;     // 120</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std::cout&lt;&lt;Factorial&lt;10&gt;::value;    // 3628800</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>å®ä¾‹åŒ–<code>Factorial&lt;n&gt;</code>ç»“æ„ä½“æ¨¡æ¿éƒ½ä¼šå†æ¬¡å¼•ç”¨åˆ°<code>Factorial&lt;n-1&gt;</code>ï¼Œå½¢æˆé€’å½’çš„å®ä¾‹åŒ–ï¼Œæœ€åæ¥åˆ°ç‰¹å‹åŒ–æ¨¡æ¿<code>Factorial&lt;0&gt;</code>ï¼Œå¦‚æœTMPæœ‰çœŸæ­£çš„å¾ªç¯ç»“æ„ï¼Œé‚£ä¹ˆvalueçš„å€¼æ¯æ¬¡éƒ½ä¼šæ›´æ–°ï¼Œè€Œå®é™…ä¸Šæ˜¯æ¯æ¬¡å®ä¾‹åŒ–äº§ç”Ÿvalueçš„å‰¯æœ¬ï¼Œæ ¹æ®ä¸‹ä¸€è½®é€’å½’çš„ç»“æœç¡®å®švalueçš„å€¼ã€‚Factorialåªæ˜¯å±•ç¤ºTMPä½¿ç”¨çš„ç®€å•ä¾‹å­ï¼Œä¸ºäº†æ›´å¥½çš„äº†è§£TMPçš„æ„ä¹‰ï¼Œæœ€å¥½ç†Ÿæ‚‰å®ƒå¯ä»¥å®Œæˆçš„ä»»åŠ¡ï¼š</p><ul><li>ç¡®ä¿é‡çº²å•ä½æ­£ç¡®æ€§ã€‚åœ¨ç§‘å­¦å’Œå·¥ç¨‹åº”ç”¨ä¸­ï¼Œç¡®ä¿é‡çº²å•ä½(å¦‚è´¨é‡ï¼Œè·ç¦»ï¼Œæ—¶é—´ç­‰)çš„æ­£ç¡®ç»„åˆååˆ†é‡è¦ï¼ŒæŠŠè´¨é‡å•ä½å˜é‡èµ‹å€¼ç»™é€Ÿåº¦å•ä½å˜é‡æ˜¯é”™è¯¯çš„ï¼Œä½†æ˜¯æŠŠè·ç¦»å˜é‡é™¤ä»¥æ—¶é—´å˜é‡çš„ç»“æœèµ‹å€¼ç»™é€Ÿåº¦å•ä½æ˜¯æ­£ç¡®çš„ï¼Œä½¿ç”¨TMPå¯ä»¥ä¿è¯è¿™äº›æ­£ç¡®æ€§ï¼Œä¸¾ä¸ªä¾‹å­ï¼ŒTMPæ”¯æŒåœ¨ç¼–è¯‘æœŸå°±å¯ä»¥ç¡®è®¤<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>i</mi><mi>m</mi><msup><mi>e</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">time^{1/2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></span>å°±ç­‰äº<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>i</mi><mi>m</mi><msup><mi>e</mi><mrow><mn>2</mn><mi mathvariant="normal">/</mi><mn>4</mn></mrow></msup></mrow><annotation encoding="application/x-tex">time^{2/4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">/</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></span></li><li>ä¼˜åŒ–çŸ©é˜µæ“ä½œã€‚Item21è§£é‡Šäº†åŒ…æ‹¬<code>operator*</code>åœ¨å†…çš„å‡½æ•°å¿…é¡»è¿”å›æ–°å¯¹è±¡ï¼Œåœ¨Item44ä¸­å¼•å…¥äº†<code>SquareMatrix</code>ï¼Œè€ƒè™‘å¦‚ä¸‹ä»£ç ï¼š</li></ul><div class="codeBlockContainer_I0IT language-c++ theme-code-block"><div class="codeBlockContent_wNvx c++"><pre tabindex="0" class="prism-code language-c++ codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">typename SuqareMatrix&lt;double, 1000&gt; BigMatrix;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BigMatrix m1, m2, m3, m4, m5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BigMatrix result = m1 * m2 * m3 * m4 * m5;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æ­£å¸¸åœ°è®¡ç®—resultéœ€è¦ç”Ÿæˆ4ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œä½¿ç”¨TMPçš„è¡¨è¾¾å¼æ¨¡æ¿æŠ€æœ¯å¯ä»¥å‡å°‘äº§ç”Ÿçš„ä¸´æ—¶å˜é‡ï¼Œå‡å°‘å†…å­˜ä½¿ç”¨å¹¶æé«˜é€Ÿåº¦</p><ul><li>ç”Ÿæˆå®šåˆ¶è®¾è®¡æ¨¡å‹å®ç°ã€‚åƒStrategy(è§Item35)ï¼ŒObserverï¼ŒVistorç­‰çš„è®¾è®¡æ¨¡å¼å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼Œä½¿ç”¨TMPçš„æŠ€æœ¯è¢«ç§°ä¸º<em>åŸºäºç­–ç•¥è®¾è®¡(policy-based design)</em>ï¼Œç”¨äºåˆ›å»ºè¡¨ç¤ºç‹¬ç«‹è®¾è®¡æ–¹å¼(â€œç­–ç•¥â€)çš„æ¨¡æ¿ï¼Œè¿™äº›ç­–ç•¥ä»»æ„ç»„åˆç”Ÿæˆå®šåˆ¶è¡Œä¸ºçš„æ¨¡å¼ï¼Œæ¯”å¦‚ä½¿ç”¨å‡ ä¸ªæ¨¡æ¿å®ç°æ™ºèƒ½æŒ‡é’ˆè¡Œä¸ºç­–ç•¥ï¼Œç”¨äºç”Ÿæˆå‡ ç™¾ç§ä¸åŒçš„æ™ºèƒ½æŒ‡é’ˆç±»å‹ï¼Œè¿™é¡¹æŠ€æœ¯å°±æ˜¯æ³›å‹ç¼–ç¨‹çš„åŸºç¡€</li></ul><p>TMPå¹¶ä¸é€‚åˆæ¯ä¸€ä¸ªäººï¼Œå®ƒçš„å¥æ³•ä¸ç›´è§‚ï¼Œå·¥å…·æ”¯æŒè–„å¼±(ç»™æ¨¡æ¿å…ƒç¨‹åºè°ƒè¯•ï¼ŸHaï¼)ï¼Œä½†æ˜¯å¯¹ç¨‹åºå‘˜å°¤å…¶æ˜¯åº“å¼€å‘äººå‘˜ï¼Œå®ƒå°†ä¼šæˆä¸ºä¸»è¦æŠ€æœ¯</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æ€»ç»“</h5></div><div class="admonition-content"><p>æ¨¡æ¿å…ƒç¼–ç¨‹å¯ä»¥å°†å·¥ä½œä»è¿è¡Œæ—¶è½¬ç§»åˆ°ç¼–è¯‘æ—¶ï¼Œä½¿å¾—æ›´æ—©å‘ç°é”™è¯¯ä»¥åŠæé«˜è¿è¡Œæ€§èƒ½ï¼›TMPå¯ä»¥åŸºäºä¸åŒç­–ç•¥ç»„åˆç”Ÿæˆå®šåˆ¶ä»£ç ï¼Œä¹Ÿå¯ä»¥ç”¨äºé¿å…ç”Ÿæˆå¯¹ç‰¹å®šç±»å‹ä¸åˆé€‚çš„ä»£ç </p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/docs/tags/effective-c">Effective-C++</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/docs/tags/reading-notes">ReadingNotes</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/docs/tags/c">C++</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/kayhaw/kayhaw.github.io/edit/master/website/docs/EffectiveC++/Effective-C++-Chap7.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/EffectiveC++/Effective-C++-Chap6"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ç»§æ‰¿å’Œé¢å‘å¯¹è±¡è®¾è®¡</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/EffectiveC++/Effective-C++-Chap8"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">è‡ªå®šä¹‰newå’Œdelete</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#item41ç†è§£éšå¼æ¥å£å’Œç¼–è¯‘æ—¶å¤šæ€" class="table-of-contents__link toc-highlight">Item41:ç†è§£éšå¼æ¥å£å’Œç¼–è¯‘æ—¶å¤šæ€</a></li><li><a href="#item42ç†è§£typenameçš„ä¸¤ç§å«ä¹‰" class="table-of-contents__link toc-highlight">Item42:ç†è§£typenameçš„ä¸¤ç§å«ä¹‰</a></li><li><a href="#item43çŸ¥é“å¦‚ä½•è®¿é—®æ¨¡æ¿åŸºç±»çš„åç§°" class="table-of-contents__link toc-highlight">Item43:çŸ¥é“å¦‚ä½•è®¿é—®æ¨¡æ¿åŸºç±»çš„åç§°</a></li><li><a href="#item44å°†ç±»å‹å‚æ•°æ— å…³çš„ä»£ç ä»æ¨¡æ¿ä¸­åˆ†ç¦»" class="table-of-contents__link toc-highlight">Item44:å°†ç±»å‹å‚æ•°æ— å…³çš„ä»£ç ä»æ¨¡æ¿ä¸­åˆ†ç¦»</a></li><li><a href="#item45ä½¿ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥æ¥å—æ‰€æœ‰çš„å…¼å®¹ç±»å‹" class="table-of-contents__link toc-highlight">Item45:ä½¿ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥æ¥å—æ‰€æœ‰çš„â€œå…¼å®¹ç±»å‹â€</a></li><li><a href="#item46å½“éœ€è¦ç±»å‹è½¬æ¢æ—¶åœ¨æ¨¡æ¿å†…å®šä¹‰å‹å…ƒå‡½æ•°" class="table-of-contents__link toc-highlight">Item46:å½“éœ€è¦ç±»å‹è½¬æ¢æ—¶åœ¨æ¨¡æ¿å†…å®šä¹‰å‹å…ƒå‡½æ•°</a></li><li><a href="#item47éœ€è¦ç±»å‹ä¿¡æ¯æ—¶ä½¿ç”¨ç‰¹æ€§ç±»" class="table-of-contents__link toc-highlight">Item47:éœ€è¦ç±»å‹ä¿¡æ¯æ—¶ä½¿ç”¨ç‰¹æ€§ç±»</a></li><li><a href="#item48çŸ¥é“æ¨¡æ¿å…ƒç¨‹åº" class="table-of-contents__link toc-highlight">Item48:çŸ¥é“æ¨¡æ¿å…ƒç¨‹åº</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">è¯»ä¹¦ç¬”è®°</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://www.zhihu.com/people/xiao-ke-dou-7" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>çŸ¥ä¹<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kayhaw" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://gitee.com/kayhaw" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 ä½•è½²(Kay Haw). Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b8f66f99.js"></script>
<script src="/assets/js/main.a8d1eeac.js"></script>
</body>
</html>