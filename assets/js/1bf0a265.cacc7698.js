"use strict";(self.webpackChunkkayhaw_github_io=self.webpackChunkkayhaw_github_io||[]).push([[5720],{3905:function(e,t,a){a.d(t,{Zo:function(){return T},kt:function(){return c}});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=n.createContext({}),m=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},T=function(e){var t=m(e.components);return n.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},E=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,p=e.parentName,T=o(e,["components","mdxType","originalType","parentName"]),E=m(a),c=l,u=E["".concat(p,".").concat(c)]||E[c]||s[c]||r;return a?n.createElement(u,i(i({ref:t},T),{},{components:a})):n.createElement(u,i({ref:t},T))}));function c(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=E;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var m=2;m<r;m++)i[m]=a[m];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}E.displayName="MDXCreateElement"},5985:function(e,t,a){a.r(t),a.d(t,{assets:function(){return T},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return o},metadata:function(){return m},toc:function(){return s}});var n=a(3117),l=a(102),r=(a(7294),a(3905)),i=["components"],o={title:"Hive 3.x\u5b66\u4e60\u7b14\u8bb0(3)",author:"\u4f55\u8f72",author_title:"Never settle down",author_url:"https://github.com/kayhaw",author_image_url:"https://avatars.githubusercontent.com/u/16892835?v=4",tags:["Hive","BigData"],description:"Hive 3.1.2\u5b66\u4e60\u7b14\u8bb0(3)\uff1aHive SQL",hide_table_of_contents:!1},p=void 0,m={permalink:"/blog/2022/02/21/Learning-Hive3.x-03",editUrl:"https://github.com/kayhaw/kayhaw.github.io/edit/master/website/blog/blog/2022/02/21-Learning-Hive3.x-03.md",source:"@site/blog/2022/02/21-Learning-Hive3.x-03.md",title:"Hive 3.x\u5b66\u4e60\u7b14\u8bb0(3)",description:"Hive 3.1.2\u5b66\u4e60\u7b14\u8bb0(3)\uff1aHive SQL",date:"2022-02-21T00:00:00.000Z",formattedDate:"February 21, 2022",tags:[{label:"Hive",permalink:"/blog/tags/hive"},{label:"BigData",permalink:"/blog/tags/big-data"}],readingTime:7.275,truncated:!0,authors:[{name:"\u4f55\u8f72",title:"Never settle down",url:"https://github.com/kayhaw",imageURL:"https://avatars.githubusercontent.com/u/16892835?v=4"}],frontMatter:{title:"Hive 3.x\u5b66\u4e60\u7b14\u8bb0(3)",author:"\u4f55\u8f72",author_title:"Never settle down",author_url:"https://github.com/kayhaw",author_image_url:"https://avatars.githubusercontent.com/u/16892835?v=4",tags:["Hive","BigData"],description:"Hive 3.1.2\u5b66\u4e60\u7b14\u8bb0(3)\uff1aHive SQL",hide_table_of_contents:!1},prevItem:{title:"Hive 3.x\u5b66\u4e60\u7b14\u8bb0(4)",permalink:"/blog/2022/02/22/Learning-Hive3.x-04"},nextItem:{title:"Hive 3.x\u5b66\u4e60\u7b14\u8bb0(2)",permalink:"/blog/2022/02/20/Learning-Hive3.x-02"}},T={authorsImageUrls:[void 0]},s=[{value:"DDL",id:"ddl",level:2},{value:"\u5916\u90e8\u8868\u548c\u7ba1\u7406\u8868",id:"\u5916\u90e8\u8868\u548c\u7ba1\u7406\u8868",level:3},{value:"DML",id:"dml",level:2},{value:"\u6570\u636e\u5bfc\u5165",id:"\u6570\u636e\u5bfc\u5165",level:3},{value:"\u6587\u4ef6\u5bfc\u5165",id:"\u6587\u4ef6\u5bfc\u5165",level:4},{value:"\u7b80\u5355\u63d2\u5165",id:"\u7b80\u5355\u63d2\u5165",level:4},{value:"\u67e5\u8be2SQL\u63d2\u5165",id:"\u67e5\u8be2sql\u63d2\u5165",level:4},{value:"\u5176\u4ed6\u65b9\u5f0f",id:"\u5176\u4ed6\u65b9\u5f0f",level:4},{value:"\u6570\u636e\u5bfc\u51fa",id:"\u6570\u636e\u5bfc\u51fa",level:3},{value:"INSERT\u5bfc\u51fa",id:"insert\u5bfc\u51fa",level:4},{value:"Hadoop\u547d\u4ee4\u5bfc\u51fa",id:"hadoop\u547d\u4ee4\u5bfc\u51fa",level:4},{value:"Hive Shell\u547d\u4ee4\u5bfc\u51fa",id:"hive-shell\u547d\u4ee4\u5bfc\u51fa",level:4},{value:"EXPORT",id:"export",level:4},{value:"\u6570\u636e\u6e05\u9664",id:"\u6570\u636e\u6e05\u9664",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}],E={toc:s};function c(e){var t=e.components,a=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},E,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"\ud83d\udcddHive 3.1.2\u5b66\u4e60\u7b14\u8bb0\u7b2c3\u7bc7\uff1aHive SQL\u3002"),(0,r.kt)("p",null,"Hive SQL(HQL)\u5206\u4e3aDDL(\u6570\u636e\u5b9a\u4e49\u8bed\u8a00\uff0cData Definition Language)\u3001\u6570\u636e\u67e5\u8be2\u548cDML(\u6570\u636e\u64cd\u63a7\u8bed\u8a00\uff0cData Manipulation Language)\uff0c\u66f4\u591a\u5185\u5bb9\u8be6\u89c1",(0,r.kt)("a",{parentName:"p",href:"https://cwiki.apache.org/confluence/display/Hive/LanguageManual"},"Hive SQL Language Manual"),"\u3002"),(0,r.kt)("h2",{id:"ddl"},"DDL"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u521b\u5efa\u6570\u636e\u5e93\uff1a")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE DATABASE [IF NOT EXISTS] database_name\n[COMMENT database_comment]\n[LOCATION hdfs_path]\n[WITH DBPROPERTIES (property_name=property_value, ...)];\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u663e\u793a\u6570\u636e\u5e93\u4fe1\u606f(\u52a0extended\u663e\u793a\u8be6\u60c5)\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"desc database [extended] <dbname>"),"\uff1b")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"\u521b\u5efa\u8868"),"\uff1a"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name    -- (Note: TEMPORARY available in Hive 0.14.0 and later)\n  [(col_name data_type [column_constraint_specification] [COMMENT col_comment], ... [constraint_specification])]\n  [COMMENT table_comment]\n  [PARTITIONED BY (col_name data_type [COMMENT col_comment], ...)]\n  [CLUSTERED BY (col_name, col_name, ...) [SORTED BY (col_name [ASC|DESC], ...)] INTO num_buckets BUCKETS]\n  [SKEWED BY (col_name, col_name, ...)                  -- (Note: Available in Hive 0.10.0 and later)]\n     ON ((col_value, col_value, ...), (col_value, col_value, ...), ...)\n     [STORED AS DIRECTORIES]\n  [\n   [ROW FORMAT row_format] \n   [STORED AS file_format]\n     | STORED BY 'storage.handler.class.name' [WITH SERDEPROPERTIES (...)]  -- (Note: Available in Hive 0.6.0 and later)\n  ]\n  [LOCATION hdfs_path]\n  [TBLPROPERTIES (property_name=property_value, ...)]   -- (Note: Available in Hive 0.6.0 and later)\n  [AS select_statement];   -- (Note: Available in Hive 0.5.0 and later; not supported for external tables)\n \nCREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name\n  LIKE existing_table_or_view_name\n  [LOCATION hdfs_path];\n")),(0,r.kt)("h3",{id:"\u5916\u90e8\u8868\u548c\u7ba1\u7406\u8868"},"\u5916\u90e8\u8868\u548c\u7ba1\u7406\u8868"),(0,r.kt)("p",null,"Hive\u9ed8\u8ba4\u521b\u5efa\u7684\u8868\u90fd\u662f\u7ba1\u7406\u8868(Managed Table\uff0c\u4e5f\u79f0\u5185\u90e8\u8868)\uff0c\u9ed8\u8ba4\u5c06\u8868\u6570\u636e\u653e\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"hive.metastore.warehouse.dir"),"\u914d\u7f6e\u9879\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u3002",(0,r.kt)("strong",{parentName:"p"},"\u5f53\u5220\u9664\u7ba1\u7406\u8868\u65f6\uff0cHive\u4f1a\u5220\u9664\u8868\u6570\u636e\u800c\u5220\u9664\u5916\u90e8\u8868\u65f6\u4e0d\u4f1a\u5220\u9664\u8868\u6570\u636e\uff0c\u4ec5\u4ec5\u5220\u9664\u8868\u5143\u4fe1\u606f"),"\u3002"),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u8be5\u4f7f\u7528\u54ea\u79cd\u8868\uff1f")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"\u539f\u59cb\u6570\u636e\u5148\u4fdd\u5b58\u5230\u5916\u90e8\u8868\uff0c\u5728\u6b64\u57fa\u7840\u4e0a\u7edf\u8ba1\u5206\u6790\u4ea7\u751f\u7684\u7ed3\u679c\u4fdd\u5b58\u5230\u5185\u90e8\u8868"))),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"ALTER TABLE <tablename> SET TBLPROPERTIES('EXTERNAL'='TRUE');"),"\u6216\u8005",(0,r.kt)("inlineCode",{parentName:"p"},"ALTER TABLE <tablename> SET TBLPROPERTIES('EXTERNAL'='FALSE');"),"\u6765\u8f6c\u6362\u7ba1\u7406\u8868\u548c\u5185\u90e8\u8868\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a('EXTERNAL'='TRUE')\u548c('EXTERNAL'='FALSE')\u4e3a\u56fa\u5b9a\u5199\u6cd5\uff0c\u533a\u5206\u5927\u5c0f\u5199"),"\u3002"),(0,r.kt)("h2",{id:"dml"},"DML"),(0,r.kt)("p",null,"\u6839\u636e",(0,r.kt)("a",{parentName:"p",href:"https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML"},"Hive DML Wiki"),"\u5206\u4e3a\uff1a\u6570\u636e\u5bfc\u5165\u3001\u6570\u636e\u5bfc\u51fa\u3001\u6570\u636e\u6e05\u9664\u3001\u6570\u636e\u66f4\u65b0\u548c\u6570\u636e\u5408\u5e765\u4e2a\u90e8\u5206\uff0c\u5176\u4e2d\u6570\u636eDELETE\u6e05\u9664\u3001\u6570\u636e\u66f4\u65b0UPDATE\u548c\u6570\u636e\u5408\u5e76MERGE\u4ec5\u9002\u7528\u4e8e\u4e8b\u52a1\u8868\u3002"),(0,r.kt)("h3",{id:"\u6570\u636e\u5bfc\u5165"},"\u6570\u636e\u5bfc\u5165"),(0,r.kt)("h4",{id:"\u6587\u4ef6\u5bfc\u5165"},"\u6587\u4ef6\u5bfc\u5165"),(0,r.kt)("p",null,"\u901a\u8fc7\u6587\u4ef6\u5bfc\u5165\u6570\u636e\u5230\u8868\uff0c\u8bed\u6cd5\u5982\u4e0b\u3002\u52a0LOCAL\u8868\u793a\u4ece\u672c\u5730\u6587\u4ef6\u5bfc\u5165(",(0,r.kt)("strong",{parentName:"p"},"\u62f7\u8d1d\u5230HDFS\uff0c\u539f\u6587\u4ef6\u8fd8\u5728"),")\uff0c\u5426\u5219\u4eceHDFS\u4e2d\u5bfc\u5165(",(0,r.kt)("strong",{parentName:"p"},"\u79fb\u52a8\u5230\u8868\u6570\u636e\u76ee\u5f55\uff0c\u539f\u6587\u4ef6\u201c\u5220\u9664\u201d"),")\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"LOAD DATA [LOCAL] INPATH 'filepath' [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 ...)]\n \nLOAD DATA [LOCAL] INPATH 'filepath' [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 ...)] [INPUTFORMAT 'inputformat' SERDE 'serde'] (3.0 or later)\n")),(0,r.kt)("h4",{id:"\u7b80\u5355\u63d2\u5165"},"\u7b80\u5355\u63d2\u5165"),(0,r.kt)("p",null,"\u7b80\u5355\u63d2\u5165\u6570\u636e\u5230\u8868\uff0c\u8bed\u6cd5\u5982\u4e0b\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"INTO"),"\u8ffd\u52a0\u5199\u6570\u636e\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"OVERWRITE"),"\u8986\u76d6\u5199\u6570\u636e\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO[OVERWRITE] TABLE tablename [PARTITION (partcol1[=val1], partcol2[=val2] ...)] VALUES values_row [, values_row ...]\n# \u5176\u4e2dvalues_row := ( value [, value ...] )\uff0c\u800cvalue\u8981\u4e48\u662fnull\u6216\u8005\u4efb\u4f55\u6709\u6548\u7684SQL\u5b57\u9762\u91cf\n")),(0,r.kt)("h4",{id:"\u67e5\u8be2sql\u63d2\u5165"},"\u67e5\u8be2SQL\u63d2\u5165"),(0,r.kt)("p",null,"\u5c06SQL\u67e5\u8be2\u7ed3\u679c\u63d2\u5165\u5230\u8868\uff0c\u8bed\u6cd5\u5982\u4e0b\u3002",(0,r.kt)("strong",{parentName:"p"},"\u6ce8\u610f\u53ea\u6709",(0,r.kt)("inlineCode",{parentName:"strong"},"INSERT OVERWRITE"),"\u65f6\u624d\u80fd\u642d\u914d",(0,r.kt)("inlineCode",{parentName:"strong"},"IF NOT EXISTS"),"\uff0c\u8868\u793a\u63d2\u5165\u65f6\u521b\u5efa\u4e0d\u5b58\u5728\u7684\u5206\u533a\uff1b\u5f53\u8868\u5c5e\u6027",(0,r.kt)("inlineCode",{parentName:"strong"},"auto.purge"),"\u4e3atrue\u5e76\u4e14\u4e3a\u7ba1\u7406\u8868\u65f6\uff0c\u8986\u76d6\u5199\u4f1a\u5c06\u65e7\u6570\u636e\u76f4\u63a5\u5220\u9664\u800c\u4e0d\u662f\u79fb\u5230Trash"),"\u3002\u6807\u51c6\u63d2\u5165\u548c\u52a8\u6001\u5206\u533a\u63d2\u5165\u7684\u533a\u522b\u5728\u4e8e\u5206\u533a\u5b57\u6bb5\u4e0d\u8981\u6c42\u63d0\u4f9b\u503c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"# 1. \u6807\u51c6\u8bed\u6cd5\nINSERT OVERWRITE TABLE tablename1 [PARTITION (partcol1=val1, partcol2=val2 ...) [IF NOT EXISTS]] select_statement1 FROM from_statement;\n\nINSERT INTO TABLE tablename1 [PARTITION (partcol1=val1, partcol2=val2 ...)] select_statement1 FROM from_statement;\n\n# 2. \u591a\u6761\u63d2\u5165\nFROM from_statement\nINSERT OVERWRITE TABLE tablename1 [PARTITION (partcol1=val1, partcol2=val2 ...) [IF NOT EXISTS]] select_statement1\n[INSERT OVERWRITE TABLE tablename2 [PARTITION ... [IF NOT EXISTS]] select_statement2]\n[INSERT INTO TABLE tablename2 [PARTITION ...] select_statement2] ...;\n\nFROM from_statement\nINSERT INTO TABLE tablename1 [PARTITION (partcol1=val1, partcol2=val2 ...)] select_statement1\n[INSERT INTO TABLE tablename2 [PARTITION ...] select_statement2]\n[INSERT OVERWRITE TABLE tablename2 [PARTITION ... [IF NOT EXISTS]] select_statement2] ...;\n\n# 3. \u52a8\u6001\u5206\u533a\u63d2\u5165\nINSERT OVERWRITE TABLE tablename PARTITION (partcol1[=val1], partcol2[=val2] ...) select_statement FROM from_statement;\n\nINSERT INTO TABLE tablename PARTITION (partcol1[=val1], partcol2[=val2] ...) select_statement FROM from_statement;\n")),(0,r.kt)("h4",{id:"\u5176\u4ed6\u65b9\u5f0f"},"\u5176\u4ed6\u65b9\u5f0f"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u6839\u636e\u67e5\u8be2SQL\u7ed3\u679c\u521b\u5efa\u8868\u5e76\u63d2\u5165\u6570\u636e\uff0c\u7528\u4e8e\u751f\u6210\u4e2d\u95f4\u8868\uff0c\u8bed\u6cd5\u4e3a",(0,r.kt)("inlineCode",{parentName:"li"},"CREATE TABLE IF NOT EXISTS tablename AS select_statement FROM from_statement"),"\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u6307\u5b9a\u52a0\u8f7d\u6570\u636e\u8def\u5f84\u521b\u5efa\u8868\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"IMPORT"),"\u5c06\u6570\u636e\u5bfc\u5165\u5230\u8868\uff0c\u53ea\u80fd\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"EXPORT"),"\u8f93\u51fa\u7684\u5185\u5bb9\u5bfc\u5165\uff01")),(0,r.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"LOAD\u3001INSERT\u548cIMPORT\u5bfc\u5165\u6570\u636e\u7684\u533a\u522b")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},"LOAD\u4ec5\u4ec5\u662f\u6dfb\u52a0\u3001\u79fb\u52a8HDFS\u6587\u4ef6\uff0c\u4e0d\u521b\u5efa\u8868\u548c\u5206\u533a"),(0,r.kt)("li",{parentName:"ul"},"INSERT\u9700\u8981\u6267\u884cMR\u7a0b\u5e8f\uff0c\u5728\u5411\u5206\u6876\u8868\u63d2\u5165\u6570\u636e\u65f6\u5fc5\u987b\u4f7f\u7528\uff0c\u4e0d\u521b\u5efa\u8868\u4f46\u4f1a\u521b\u5efa\u5206\u533a"),(0,r.kt)("li",{parentName:"ul"},"IMPORT\u53ea\u80fd\u5bfc\u5165EXPORT\u8f93\u51fa\u7684\u5185\u5bb9\uff0c\u81ea\u52a8\u521b\u5efa\u8868/\u5206\u533a\u3002\u5982\u679c\u8868\u5b58\u5728\uff0c\u975e\u5206\u533a\u8868\u8981\u6c42\u4e3a\u7a7a\uff0c\u5206\u533a\u8868\u8981\u6c42\u63d2\u5165\u5206\u533a\u4e0d\u5b58\u5728\u3002")))),(0,r.kt)("h3",{id:"\u6570\u636e\u5bfc\u51fa"},"\u6570\u636e\u5bfc\u51fa"),(0,r.kt)("h4",{id:"insert\u5bfc\u51fa"},"INSERT\u5bfc\u51fa"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"# 1. \u6807\u51c6\u8bed\u6cd5\nINSERT OVERWRITE [LOCAL] DIRECTORY directory1\n  [ROW FORMAT row_format] [STORED AS file_format] (Note: Only available starting with Hive 0.11.0)\n  SELECT ... FROM ...\n\n# 2. \u591a\u6761\u63d2\u5165\nFROM from_statement\nINSERT OVERWRITE [LOCAL] DIRECTORY directory1 select_statement1\n[INSERT OVERWRITE [LOCAL] DIRECTORY directory2 select_statement2] ...\n\nrow_format\n  : DELIMITED [FIELDS TERMINATED BY char [ESCAPED BY char]] [COLLECTION ITEMS TERMINATED BY char]\n        [MAP KEYS TERMINATED BY char] [LINES TERMINATED BY char]\n        [NULL DEFINED AS char] (Note: Only available starting with Hive 0.13)\n")),(0,r.kt)("h4",{id:"hadoop\u547d\u4ee4\u5bfc\u51fa"},"Hadoop\u547d\u4ee4\u5bfc\u51fa"),(0,r.kt)("p",null,"\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"hadoop fs -get"),"\u547d\u4ee4\u4e0b\u8f7d\u8868\u6570\u636e\u6587\u4ef6\u5230\u672c\u5730\u3002"),(0,r.kt)("h4",{id:"hive-shell\u547d\u4ee4\u5bfc\u51fa"},"Hive Shell\u547d\u4ee4\u5bfc\u51fa"),(0,r.kt)("p",null,"\u4f7f\u7528\u683c\u5f0f\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"hive -e[-f] \u6267\u884csql\u6216\u8005\u811a\u672c\u540d > \u8f93\u51fa\u6587\u4ef6"),"\u3002"),(0,r.kt)("h4",{id:"export"},"EXPORT"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"EXPORT"),"\u547d\u4ee4\u7528\u4e8e\u5c06\u8868\u6570\u636e",(0,r.kt)("strong",{parentName:"p"},"\u8fde\u540c\u5143\u6570\u636e"),"\u4e00\u5757\u5bfc\u51fa\u5230\u7279\u5b9a\u8f93\u51fa\u4f4d\u7f6e\uff0c\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"IMPORT"),"\u642d\u914d\u4f7f\u7528\u5728\u4e24\u4e2aHadoop\u96c6\u7fa4\u4e4b\u95f4\u8fc1\u79fbHive\u8868(\u5143\u6570\u636e\u5e93\u53ef\u4ee5\u4e0d\u540c)\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"EXPORT TABLE tablename [PARTITION (part_column=\"value\"[, ...])]\n  TO 'export_target_path' [ FOR replication('eventid') ]\n")),(0,r.kt)("h3",{id:"\u6570\u636e\u6e05\u9664"},"\u6570\u636e\u6e05\u9664"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"DELETE"),"\u5220\u9664\u8868\u6570\u636e\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"DELETE FROM tablename [WHERE expression]"),"\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"TRUNCATE"),"\u5220\u9664\u8868\u6216\u5206\u533a\u6570\u636e\uff0c",(0,r.kt)("strong",{parentName:"li"},"\u53ea\u9002\u7528\u4e8e\u7ba1\u7406\u8868"),"\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"# \u4eceHive 4.0\u5f00\u59cbTABLE\u5173\u952e\u5b57\u53ef\u7701\u7565\uff0c\u4e0d\u6307\u5b9a\u5206\u533a\u5219\u5220\u9664\u6240\u6709\u5206\u533a\nTRUNCATE [TABLE] table_name [PARTITION partition_spec];\n \npartition_spec:\n  : (partition_column = partition_col_value, partition_column = partition_col_value, ...)\n")),(0,r.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"DELETE\u3001TRUNCATE\u548cDROP\u7684\u533a\u522b")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("ol",{parentName:"div"},(0,r.kt)("li",{parentName:"ol"},"\u7c7b\u578b\uff1aDELETE\u5c5e\u4e8eDML\uff0c\u800cTRUNCATE\u548cDROP\u5c5e\u4e8eDDL\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u662f\u5426\u4fdd\u7559\u5143\u6570\u636e\uff1aDELETE\u548cTRUNCATE\u4ec5\u5220\u9664\u8868\u6570\u636e\uff0c\u8868\u7ed3\u6784\u4f9d\u7136\u5b58\u5728\uff0c\u4f46DROP\u5220\u9664\u8868\u6570\u636e\u540c\u65f6\u5220\u9664\u8868\u7ed3\u6784\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u5bf9\u76ee\u6807\u8868\u8981\u6c42\uff1aDELETE\u4ec5\u7528\u4e8e\u4e8b\u52a1\u8868\uff0cTRUNCATE\u4ec5\u7528\u4e8e\u7ba1\u7406\u8868\u3002")))),(0,r.kt)("h2",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"LOCAL\u52a0\u8f7d\u6570\u636e\u590d\u5236\u6587\u4ef6\uff0c\u4e0d\u52a0LOCAL\u5219\u79fb\u52a8\u6587\u4ef6\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u63d2\u5165\u6570\u636eLOAD\u3001INSERT\u548cIMPORT\u7684\u533a\u522b\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u6e05\u9664\u6570\u636eDELETE\u3001TRUNCATE\u548cDROP\u7684\u533a\u522b\uff1b"),(0,r.kt)("li",{parentName:"ol"},"DELETE\u3001UPDATE\u548cMERGE\u4ec5\u9002\u7528\u4e8e\u4e8b\u52a1\u8868\u3002")))}c.isMDXComponent=!0}}]);