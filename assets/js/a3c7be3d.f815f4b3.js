"use strict";(self.webpackChunkkayhaw_github_io=self.webpackChunkkayhaw_github_io||[]).push([[2122],{1052:function(e,n,t){t.r(n),t.d(n,{assets:function(){return s},contentTitle:function(){return i},default:function(){return h},frontMatter:function(){return p},metadata:function(){return d},toc:function(){return m}});var a=t(3117),o=t(102),r=(t(7294),t(3905)),l=["components"],p={title:"Hadoop 3.x\u5b66\u4e60\u7b14\u8bb0(1)",author:"\u4f55\u8f72",author_title:"Never settle down",author_url:"https://github.com/kayhaw",author_image_url:"https://avatars.githubusercontent.com/u/16892835?v=4",tags:["Hadoop","BigData"],description:"Hadoop 3.1.3\u5b66\u4e60\u7b14\u8bb0(1)",hide_table_of_contents:!1},i=void 0,d={permalink:"/blog/2022/01/29/Learning-Hadoop3.x-01",editUrl:"https://github.com/kayhaw/kayhaw.github.io/edit/master/website/blog/blog/2022-01-29-Learning-Hadoop3.x-01.md",source:"@site/blog/2022-01-29-Learning-Hadoop3.x-01.md",title:"Hadoop 3.x\u5b66\u4e60\u7b14\u8bb0(1)",description:"Hadoop 3.1.3\u5b66\u4e60\u7b14\u8bb0(1)",date:"2022-01-29T00:00:00.000Z",formattedDate:"January 29, 2022",tags:[{label:"Hadoop",permalink:"/blog/tags/hadoop"},{label:"BigData",permalink:"/blog/tags/big-data"}],readingTime:8.805,truncated:!0,authors:[{name:"\u4f55\u8f72",title:"Never settle down",url:"https://github.com/kayhaw",imageURL:"https://avatars.githubusercontent.com/u/16892835?v=4"}],frontMatter:{title:"Hadoop 3.x\u5b66\u4e60\u7b14\u8bb0(1)",author:"\u4f55\u8f72",author_title:"Never settle down",author_url:"https://github.com/kayhaw",author_image_url:"https://avatars.githubusercontent.com/u/16892835?v=4",tags:["Hadoop","BigData"],description:"Hadoop 3.1.3\u5b66\u4e60\u7b14\u8bb0(1)",hide_table_of_contents:!1},prevItem:{title:"Hadoop 3.x\u5b66\u4e60\u7b14\u8bb0(2)",permalink:"/blog/2022/01/30/Learning-Hadoop3.x-02"},nextItem:{title:"FlinkX\u6e90\u7801\u5256\u6790(2)",permalink:"/blog/2022/01/17/FlinkX-Source-Code-Dissection-02"}},s={authorsImageUrls:[void 0]},m=[{value:"\u57fa\u7840\u73af\u5883\u51c6\u5907",id:"\u57fa\u7840\u73af\u5883\u51c6\u5907",level:2},{value:"\u538b\u7f29\u5305\u4e0b\u8f7d\u4e0e\u7cfb\u7edf\u73af\u5883",id:"\u538b\u7f29\u5305\u4e0b\u8f7d\u4e0e\u7cfb\u7edf\u73af\u5883",level:3},{value:"\u6587\u4ef6\u540c\u6b65\u811a\u672c",id:"\u6587\u4ef6\u540c\u6b65\u811a\u672c",level:3},{value:"\u514d\u5bc6\u767b\u5f55",id:"\u514d\u5bc6\u767b\u5f55",level:3},{value:"Hadoop\u914d\u7f6e\u4e0e\u542f\u52a8",id:"hadoop\u914d\u7f6e\u4e0e\u542f\u52a8",level:2},{value:"\u8282\u70b9\u89c4\u5212",id:"\u8282\u70b9\u89c4\u5212",level:3},{value:"\u914d\u7f6e\u6587\u4ef6",id:"\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u542f\u52a8\u96c6\u7fa4",id:"\u542f\u52a8\u96c6\u7fa4",level:3},{value:"\u811a\u672c\u5de5\u5177",id:"\u811a\u672c\u5de5\u5177",level:2},{value:"\u5f02\u5e38\u5904\u7406",id:"\u5f02\u5e38\u5904\u7406",level:2},{value:"\u65f6\u95f4\u540c\u6b65[\u53ef\u9009]",id:"\u65f6\u95f4\u540c\u6b65\u53ef\u9009",level:2},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}],u={toc:m};function h(e){var n=e.components,t=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"\ud83d\udcddHadoop 3.1.3\u5b66\u4e60\u7b14\u8bb0\u7b2c1\u7bc7\uff1a\u57fa\u4e8eVMWare\u865a\u62df\u673a\u7684Hadoop\u96c6\u7fa4\u73af\u5883\u642d\u5efa\u3002"),(0,r.kt)("h2",{id:"\u57fa\u7840\u73af\u5883\u51c6\u5907"},"\u57fa\u7840\u73af\u5883\u51c6\u5907"),(0,r.kt)("h3",{id:"\u538b\u7f29\u5305\u4e0b\u8f7d\u4e0e\u7cfb\u7edf\u73af\u5883"},"\u538b\u7f29\u5305\u4e0b\u8f7d\u4e0e\u7cfb\u7edf\u73af\u5883"),(0,r.kt)("p",null,"\u4ece",(0,r.kt)("a",{parentName:"p",href:"http://archive.apache.org/dist/hadoop/common/"},"Hadoop Releases"),"\u4e0b\u8f7dHadoop 3.1.3\u538b\u7f29\u5305\u5e76\u62f7\u8d1d\u5230\u865a\u62df\u673a\u4e2d\uff0c\u7136\u540e\u89e3\u538b\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"/opt/module"),"\u76ee\u5f55\u3002\u4ece",(0,r.kt)("a",{parentName:"p",href:"https://www.oracle.com/java/technologies/javase/javase8-archive-downloads.html"},"Java SE 8 Archive Downloads"),"\u4e0b\u8f7dJDk 8\u538b\u7f29\u5305\u5e76\u62f7\u8d1d\u5230\u865a\u62df\u673a\u4e2d\uff0c\u540c\u6837\u89e3\u538b\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"/opt/module"),"\u76ee\u5f55\u3002"),(0,r.kt)("p",null,"\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/profile.d"),"\u6587\u4ef6\u5939\u4e0b\u521b\u5efamy_env.sh\u6587\u4ef6\uff0c\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u6267\u884c\u547d\u4ee4",(0,r.kt)("inlineCode",{parentName:"strong"},"source /etc/profile"),"\u4f7f\u73af\u5883\u53d8\u91cf\u751f\u6548"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# JAVA_HOME\nexport JAVA_HOME=/opt/module/jdk1.8.0_212\nexport PATH=$PATH:$JAVA_HOME/bin\n\n# HADOOP_HOME\nexport HADOOP_HOME=/opt/module/hadoop-3.1.3\nexport PATH=$PATH:$HADOOP_HOME/bin\nexport PATH=$PATH:$HADOOP_HOME/sbin\n")),(0,r.kt)("h3",{id:"\u6587\u4ef6\u540c\u6b65\u811a\u672c"},"\u6587\u4ef6\u540c\u6b65\u811a\u672c"),(0,r.kt)("p",null,"\u4e3a\u4e86\u65b9\u4fbf\u5728\u96c6\u7fa4\u4e0a\u7684\u5404\u4e2a\u8282\u70b9\u95f4\u540c\u6b65\u914d\u7f6e\u6587\u4ef6\uff0c\u7f16\u5199xsync\u811a\u672c\u5982\u4e0b\u6240\u793a\u3002\u8be5\u811a\u672c\u5b9e\u9645\u662f\u5bf9rsync\u547d\u4ee4\u7684\u5c01\u88c5\uff0c\u4e0escp\u76f8\u6bd4\uff0crsync\u53ea\u540c\u6b65\u5dee\u5f02\u6587\u4ef6\u800cscp\u540c\u6b65\u6240\u6709\u6587\u4ef6\u3002\u6ce8\u610f\u540c\u6b65\u6587\u4ef6\u7684\u53cc\u65b9\u90fd\u5b89\u88c5rsync\uff0c\u5e76",(0,r.kt)("strong",{parentName:"p"},"\u5c06xysnc\u811a\u672c\u653e\u5728${HOME}/bin\u76ee\u5f55\u4e0b"),"\u4ee5\u4fbf\u968f\u5904\u8c03\u7528\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title=xsync.sh",title:"xsync.sh"},'#!/bin/bash\n#1. \u5224\u65ad\u53c2\u6570\u4e2a\u6570\nif [ $# -lt 1 ]\nthen\n  echo Not Enough Arguement!\n  exit;\nfi\n\n#2. \u904d\u5386\u96c6\u7fa4\u6240\u6709\u673a\u5668\nfor host in hadoop102 hadoop103 hadoop104\ndo\n  echo ==================== $host ====================\n  #3. \u904d\u5386\u6240\u6709\u76ee\u5f55\uff0c\u6328\u4e2a\u53d1\u9001\n  for file in $@\n  do\n  #4. \u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728\n  if [ -e $file ]\n  then\n  #5. \u83b7\u53d6\u7236\u76ee\u5f55\n  # dirname\u662fshell\u547d\u4ee4\uff0c\u5217\u51fa\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\uff0ccd -P\uff1a\u5bf9\u4e8e\u8f6f\u8fde\u63a5\u8fdb\u5165\u5b9e\u9645\u76ee\u5f55\n  pdir=$(cd -P $(dirname $file); pwd)\n  #6. \u83b7\u53d6\u5f53\u524d\u6587\u4ef6\u7684\u540d\u79f0\n  fname=$(basename $file)\n  ssh $host "mkdir -p $pdir"         # mkdir -p \u5728\u6587\u4ef6\u5939\u5df2\u7ecf\u5b58\u5728\u65f6\u4e0d\u62a5\u9519\n  rsync -av $pdir/$fname $host:$pdir\n  else\n  echo $file does not exists!\n  fi\n  done\ndone\n')),(0,r.kt)("h3",{id:"\u514d\u5bc6\u767b\u5f55"},"\u514d\u5bc6\u767b\u5f55"),(0,r.kt)("p",null,"\u5728xsync\u811a\u672c\u4e2d\u4f7f\u7528ssh\u767b\u5f55\u76ee\u6807\u7aef\u5e76\u521b\u5efa\u76ee\u5f55\uff0c\u4e3a\u4e86\u5b9e\u73b0\u514d\u5bc6\u767b\u5f55\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ssh-genkey -t rsa        # \u751f\u6210\u672c\u673a\u5bc6\u94a5\u5bf9\nssh-copy-id hadoop103    # \u672c\u673a\u516c\u94a5\u4f20\u5230hadoop103\uff0c\u5b9e\u73b0\u514d\u5bc6\u767b\u5f55\n")),(0,r.kt)("h2",{id:"hadoop\u914d\u7f6e\u4e0e\u542f\u52a8"},"Hadoop\u914d\u7f6e\u4e0e\u542f\u52a8"),(0,r.kt)("h3",{id:"\u8282\u70b9\u89c4\u5212"},"\u8282\u70b9\u89c4\u5212"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u8282\u70b9\u89d2\u8272"),(0,r.kt)("th",{parentName:"tr",align:null},"hadoop102"),(0,r.kt)("th",{parentName:"tr",align:null},"hadoop103"),(0,r.kt)("th",{parentName:"tr",align:null},"hadoop104"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"HDFS"),(0,r.kt)("td",{parentName:"tr",align:null},"NameNode DataNode"),(0,r.kt)("td",{parentName:"tr",align:null},"DataNode"),(0,r.kt)("td",{parentName:"tr",align:null},"SecondaryNameNode DataNode")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"YARN"),(0,r.kt)("td",{parentName:"tr",align:null},"NodeManager"),(0,r.kt)("td",{parentName:"tr",align:null},"ResourceManager NodeManager"),(0,r.kt)("td",{parentName:"tr",align:null},"NodeManager")))),(0,r.kt)("p",null,"\u6ce8\u610fNameNode\u548cSecondaryNameNode\u4e0d\u80fd\u5728\u76f8\u540c\u8282\u70b9\uff0cResourceManager\u5f00\u9500\u9ad8\uff0c\u4e0d\u80fd\u548cNameNode\u3001SecondaryNameNode\u5728\u76f8\u540c\u8282\u70b9\u3002"),(0,r.kt)("h3",{id:"\u914d\u7f6e\u6587\u4ef6"},"\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("p",null,"Hadoop\u914d\u7f6e\u6587\u4ef6\u90fd\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"${HADOOP_HOME}/etc/hadoop"),"\u76ee\u5f55\u4e0b\uff0c\u642d\u5efa\u96c6\u7fa4\u73af\u5883\u9700\u8981\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6\u6709core-site.xml\u3001hdfs-site.xml\u3001yarn-site.xml\u3001mapred-site.xml\u548cworkers\uff0c\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml",metastring:"title=core-site.xml",title:"core-site.xml"},"<configuration>\n  \x3c!-- \u6307\u5b9aNameNode\u5730\u5740(Hadoop\u5185\u90e8\u901a\u4fe1\u7528) --\x3e\n  <property>\n    <name>fs.defaultFS</name>\n    <value>hdfs://hadoop102:8020</value>\n  </property>\n  \x3c!-- \u6307\u5b9aHadoop\u6570\u636e\u7684\u5b58\u50a8\u76ee\u5f55 --\x3e\n  <property>\n    <name>hadoop.tmp.dir</name>\n    <value>/opt/module/hadoop-3.1.3/data</value>\n  </property>\n  \x3c!-- \u6307\u5b9aHDFS\u7f51\u9875\u767b\u5f55\u4f7f\u7528\u7684\u9759\u6001\u7528\u6237\u4e3akayhaw --\x3e\n  <property>\n    <name>hadoop.http.staticuser.user</name>\n    <value>kayhaw</value>\n  </property>\n</configuration>\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml",metastring:"title=hdfs-site.xml",title:"hdfs-site.xml"},"<configuration>\n  \x3c!-- nn web\u7aef\u8bbf\u95ee\u5730\u5740(\u5916\u90e8\u8bbf\u95ee\u7528) --\x3e\n  <property>\n  <name>dfs.namenode.http-address</name>\n    <value>hadoop102:9870</value>\n  </property>\n  \x3c!-- 2nn web\u7aef\u8bbf\u95ee\u5730\u5740 --\x3e\n  <property>\n    <name>dfs.namenode.secondary.http-address</name>\n    <value>hadoop104:9868</value>\n  </property>\n</configuration>\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml",metastring:"title=yarn-site.xml",title:"yarn-site.xml"},"<configuration>\n  \x3c!-- \u6307\u5b9aMR\u8d70shuffle --\x3e\n  <property>\n    <name>yarn.nodemanager.aux-services</name>\n    <value>mapreduce_shuffle</value>\n  </property>\n  \x3c!-- \u6307\u5b9aResourceManager\u7684\u5730\u5740 --\x3e\n  <property>\n    <name>yarn.resourcemanager.hostname</name>\n    <value>hadoop103</value>\n  </property>\n  \x3c!-- \u73af\u5883\u53d8\u91cf\u7684\u7ee7\u627f --\x3e\n  <property>\n    <name>yarn.nodemanager.env-whitelist</name> \n    <value>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CO\nNF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAP\nRED_HOME</value>\n  </property>\n  \x3c!-- \u5f00\u542f\u65e5\u5fd7\u805a\u96c6\u529f\u80fd --\x3e\n  <property>\n    <name>yarn.log-aggregation-enable</name>\n    <value>true</value>\n  </property>\n  \x3c!-- \u8bbe\u7f6e\u65e5\u5fd7\u805a\u96c6\u670d\u52a1\u5668\u5730\u5740 --\x3e\n  <property> \n    <name>yarn.log.server.url</name> \n    <value>http://hadoop102:19888/jobhistory/logs</value>\n  </property>\n  \x3c!-- \u8bbe\u7f6e\u65e5\u5fd7\u4fdd\u7559\u65f6\u95f4\u4e3a7\u5929 --\x3e\n  <property>\n    <name>yarn.log-aggregation.retain-seconds</name>\n    <value>604800</value>\n  </property>\n  \x3c!-- \u8bbe\u7f6e\u865a\u62df/\u7269\u7406\u5185\u5b58\u6bd4\u4f8b --\x3e\n  <property>\n    <name>yarn.nodemanager.vmem-pmem-ratio</name>\n    <value>3</value>\n  </property>\n</configuration>\n")),(0,r.kt)("p",null,"\u5176\u4e2d\uff0c\u8bbe\u7f6e\u865a\u62df/\u7269\u7406\u5185\u5b58\u6bd4\u4f8b\u662f\u56e0\u4e3a\u5728\u8fd0\u884cmr\u4efb\u52a1\u4e2d\u51fa\u73b0\u5982\u4e0b\u60c5\u51b5\uff1aHadoop\u6839\u636e\u9ed8\u8ba4\u914d\u7f6e\u7684\u6240\u9700\u7269\u7406\u5185\u5b58\u5927\u5c0f(1GB)\u6309\u7167\u6bd4\u4f8b2.1(\u9ed8\u8ba4)\u5206\u914d\u865a\u62df\u5185\u5b582.1GB\uff0c\u5b9e\u9645\u7a0b\u5e8f\u7528\u52302.4GB\u8d85\u8fc7\u5206\u914d\u5927\u5c0f\uff0c\u56e0\u6b64\u8fd9\u91cc\u5c06\u6bd4\u4f8b\u589e\u81f33\u3002\u65e5\u5fd7\u805a\u96c6\u5c06\u5e94\u7528\u65e5\u5fd7\u4fdd\u5b58\u5230HDFS\u4e0a\uff0c\u65b9\u4fbf\u67e5\u770b\u7a0b\u5e8f\u8fd0\u884c\u8be6\u60c5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"2022-01-29 12:45:55,708 INFO mapreduce.Job: Task Id : attempt_1643428629319_0003_m_000000_2, Status : FAILED\n[2022-01-29 12:45:55.069]Container [pid=5003,containerID=container_1643428629319_0003_01_000004] is running 299792896B beyond the 'VIRTUAL' memory limit. Current usage: 137.7 MB of 1 GB physical memory used; 2.4 GB of 2.1 GB virtual memory used. Killing container.\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml",metastring:"title=mapred-site.xml",title:"mapred-site.xml"},"<configuration>\n  \x3c!-- \u6307\u5b9aMapReduce\u7a0b\u5e8f\u8fd0\u884c\u5728Yarn\u4e0a --\x3e\n  <property>\n    <name>mapreduce.framework.name</name>\n    <value>yarn</value>\n  </property>\n  \x3c!-- \u6307\u5b9aMR\u73af\u5883\u53d8\u91cf --\x3e\n  <property>\n    <name>yarn.app.mapreduce.am.env</name>\n    <value>HADOOP_MAPRED_HOME=/opt/module/hadoop-3.1.3/</value>\n    </property>\n  <property>\n    <name>mapreduce.map.env</name>\n    <value>HADOOP_MAPRED_HOME=/opt/module/hadoop-3.1.3/</value>\n  </property>\n  <property>\n    <name>mapreduce.reduce.env</name>\n    <value>HADOOP_MAPRED_HOME=/opt/module/hadoop-3.1.3/</value>\n  </property>\n  \x3c!-- \u5386\u53f2\u670d\u52a1\u5668\u7aef\u5730\u5740 --\x3e\n  <property>\n    <name>mapreduce.jobhistory.address</name>\n    <value>hadoop102:10020</value>\n  </property>\n  \x3c!-- \u5386\u53f2\u670d\u52a1\u5668web\u7aef\u5730\u5740 --\x3e\n  <property>\n    <name>mapreduce.jobhistory.webapp.address</name>\n    <value>hadoop102:19888</value>\n  </property>\n</configuration>\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5386\u53f2\u65e5\u5fd7\u670d\u52a1\u9700\u8981\u624b\u52a8\u8f93\u5165\u547d\u4ee4",(0,r.kt)("inlineCode",{parentName:"strong"},"mapred --daemon start historyserver"),"\u542f\u52a8"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"title=workers",title:"workers"},"# \u6ce8\u610f\u4e0d\u5141\u8bb8\u51fa\u73b0\u7a7a\u884c\u6216\u884c\u5c3e\u7a7a\u683c\nhadoop102\nhadoop103\nhadoop104\n")),(0,r.kt)("p",null,"\u5b8c\u6210\u5982\u4e0a\u914d\u7f6e\u540e\uff0c\u4e00\u5b9a\u8981\u8bb0\u5f97",(0,r.kt)("strong",{parentName:"p"},"\u4f7f\u7528xsync\u5de5\u5177\u5c06\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u540c\u6b65\u5230\u5404\u4e2a\u8282\u70b9"),"\u3002"),(0,r.kt)("h3",{id:"\u542f\u52a8\u96c6\u7fa4"},"\u542f\u52a8\u96c6\u7fa4"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u683c\u5f0f\u5316namenode\u8282\u70b9\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"hdfs namenode -format"),"\uff0c",(0,r.kt)("strong",{parentName:"li"},"\u4ec5\u7b2c\u4e00\u6b21\u542f\u52a8Hadoop\u73af\u5883\u9700\u8981"),"\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u5728namenode\u8282\u70b9\u4e0a\u542f\u52a8HDFS\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"start-dfs.sh"),"\uff0c\u6ce8\u610f\u4e0d\u662fhdfs\ud83d\ude0f\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u5728resourcemanager\u8282\u70b9\u4e0a\u542f\u52a8YARN\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"start-yarn.sh"),"\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u6d4f\u89c8\u5668\u8f93\u5165\u5730\u5740",(0,r.kt)("inlineCode",{parentName:"li"},"http://hadoop102:9870"),"\u548c",(0,r.kt)("inlineCode",{parentName:"li"},"http://hadoop103}:8088"),"\u5206\u522b\u67e5\u770bHDFS\u548cYARN\u60c5\u51b5\u3002")),(0,r.kt)("h2",{id:"\u811a\u672c\u5de5\u5177"},"\u811a\u672c\u5de5\u5177"),(0,r.kt)("p",null,"\u4e3a\u4e86\u65b9\u4fbf\u5728\u4e0d\u540c\u8282\u70b9\u4e0a\u542f\u52a8\u3001\u5173\u95ed\u96c6\u7fa4\uff0c\u7f16\u5199\u5982\u4e0b\u811a\u672c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title=myhadoop.sh",title:"myhadoop.sh"},'#!/bin/bash\nif [ $# -lt 1 ]\nthen\n  echo "No Args Input..."\n  exit ;\nfi\ncase $1 in\n"start")\n  echo " =================== \u542f\u52a8 hadoop \u96c6\u7fa4 ==================="\n  echo " --------------- \u542f\u52a8 hdfs ---------------"\n  ssh hadoop102 "/opt/module/hadoop-3.1.3/sbin/start-dfs.sh"\n  echo " --------------- \u542f\u52a8 yarn ---------------"\n  ssh hadoop103 "/opt/module/hadoop-3.1.3/sbin/start-yarn.sh"\n  echo " --------------- \u542f\u52a8 historyserver ---------------"\n  ssh hadoop102 "/opt/module/hadoop-3.1.3/bin/mapred --daemon start historyserver"\n;;\n"stop")\n  echo " =================== \u5173\u95ed hadoop \u96c6\u7fa4 ==================="\n  echo " --------------- \u5173\u95ed historyserver ---------------"\n  ssh hadoop102 "/opt/module/hadoop-3.1.3/bin/mapred --daemon stop historyserver"\n  echo " --------------- \u5173\u95ed yarn ---------------"\n  ssh hadoop103 "/opt/module/hadoop-3.1.3/sbin/stop-yarn.sh"\n  echo " --------------- \u5173\u95ed hdfs ---------------"\n  ssh hadoop102 "/opt/module/hadoop-3.1.3/sbin/stop-dfs.sh"\n;;\n*)\n  echo "Input Args Error..."\n;;\nesac\n')),(0,r.kt)("p",null,"\u4e3a\u4e86\u67e5\u770b\u5404\u8282\u70b9java\u8fdb\u7a0b\uff0c\u7f16\u5199\u5982\u4e0b\u811a\u672c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title=jpsall.sh",title:"jpsall.sh"},"#!/bin/bash\nfor host in hadoop102 hadoop103 hadoop104\ndo\n  echo =============== $host ===============\n  ssh $host jps \ndone\n")),(0,r.kt)("p",null,"\u6700\u540e\u5c06myhadoop.sh\u548cjpsall.sh\u653e\u5728${HOME}/bin\u76ee\u5f55\u4e0b\uff0c\u4ee5\u4fbf\u968f\u5904\u53ef\u7528\u3002"),(0,r.kt)("h2",{id:"\u5f02\u5e38\u5904\u7406"},"\u5f02\u5e38\u5904\u7406"),(0,r.kt)("p",null,"\u683c\u5f0f\u5316NameNode\u4f1a\u4ea7\u751f\u65b0\u96c6\u7fa4id\uff0c\u5bfc\u81f4NameNode\u548cDataNode\u7684\u96c6\u7fa4id\u4e0d\u4e00\u81f4\uff0c\u4ece\u800c\u51fa\u73b0\u5f02\u5e38(DataNode\u4e2a\u6570\u4e3a0)\uff0c\u6b64\u65f6\u53ef\u4ee5\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u505c\u6b62\u96c6\u7fa4\u670d\u52a1\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u5220\u9664\u6240\u6709\u8282\u70b9\u4e0a\u7684data\u548clogs\u76ee\u5f55\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u91cd\u65b0\u683c\u5f0f\u5316nn\u8282\u70b9\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u91cd\u542f\u96c6\u7fa4\u670d\u52a1\u3002")),(0,r.kt)("h2",{id:"\u65f6\u95f4\u540c\u6b65\u53ef\u9009"},"\u65f6\u95f4\u540c\u6b65","[","\u53ef\u9009","]"),(0,r.kt)("p",null,"\u5f53\u90e8\u7f72\u5728\u5185\u7f51\u65f6\uff0cHadoop\u96c6\u7fa4\u9700\u8981\u914d\u7f6e\u65f6\u95f4\u540c\u6b65\u670d\u52a1\uff0c\u5426\u5219\u4ea7\u751f\u8282\u70b9\u65f6\u95f4\u504f\u5dee\uff0c\u5bfc\u81f4\u96c6\u7fa4\u6267\u884c\u4efb\u52a1\u65f6\u95f4\u4e0d\u4e00\u81f4\u3002\u5982\u4e0b\u64cd\u4f5c\u4ee5hadoop102\u4e3a\u65f6\u95f4\u670d\u52a1\u5668\uff0c\u8ba9hadoop103\u3001hadoop104\u6bcf\u96941s\u5411\u5176\u5bf9\u51c6\u65f6\u95f4\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5728\u6240\u6709\u8282\u70b9\u4e0a\u5b89\u88c5ntp\u670d\u52a1\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"yum -y install ntp"),"\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u5728hadoop102\u4e0a\u8bbe\u7f6e\u5f00\u673a\u81ea\u542fntpd\u670d\u52a1\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"systemctl start ntpd"),"\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"systemctl enable ntpd"),"\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u4fee\u6539",(0,r.kt)("inlineCode",{parentName:"li"},"/etc/ntp.conf"),"\u6587\u4ef6\uff1a",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u5c06restrict\u4e00\u884c\u4e2d\u7684192.168.1.0\u6539\u4e3ahadoop10x\u7684\u7f51\u5173192.168.10.0\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u6ce8\u91ca4\u884c",(0,r.kt)("inlineCode",{parentName:"li"},"server 0[1,2,3].centos.pool.ntp.org iburst"),"\uff0c\u4e0d\u4e0e\u5916\u7f51\u65f6\u95f4\u540c\u6b65\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u672b\u5c3e\u6dfb\u52a0",(0,r.kt)("inlineCode",{parentName:"li"},"server 127.127.1.0"),"\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u672b\u5c3e\u6dfb\u52a0",(0,r.kt)("inlineCode",{parentName:"li"},"fudge 127.127.1.0 stratum 10"),"\uff1b"))),(0,r.kt)("li",{parentName:"ol"},"\u4fee\u6539hadoop102\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"/etc/sysconf/ntpd"),"\u6587\u4ef6\uff0c\u6dfb\u52a0",(0,r.kt)("inlineCode",{parentName:"li"},"SYNC_HWCLOCK=yes"),"\uff1b"),(0,r.kt)("li",{parentName:"ol"},"hadoop102\u91cd\u542fntpd\u670d\u52a1\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"systemctl restart ntpd"),"\uff1b"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u5176\u4ed6\u8282\u70b9\u5173\u95edntpd\u670d\u52a1"),"\uff0c\u901a\u8fc7\u547d\u4ee4",(0,r.kt)("inlineCode",{parentName:"li"},"sudo crontab -e"),"\u6253\u5f00\u914d\u7f6e\u6587\u4ef6\u5e76\u6dfb\u52a0\u4e00\u884c",(0,r.kt)("inlineCode",{parentName:"li"},"*/1 * * * * /usr/sbin/ntpdate hadoop102"),"\u3002")),(0,r.kt)("h2",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u96c6\u7fa4\u670d\u52a1\u7684\u542f\u52a8/\u7ec8\u6b62\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"start[stop]-dfs.sh"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"start[stop]-yarn.sh"),"\uff1b\u8282\u70b9\u670d\u52a1\u7684\u542f\u52a8/\u7ec8\u6b62\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"hdfs --daemon start[stop] namenode[datanode][secondarynode]"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"yarn --daemon start[stop] resourcemanager[nodemanager]"),"\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u540e\u8981\u91cd\u542f\u96c6\u7fa4\u670d\u52a1\uff0c\u4fee\u6539\u73af\u5883\u53d8\u91cf\u8981source\u4e00\u4e0b\u4f7f\u5176\u751f\u6548\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u96c6\u7fa4\u5f02\u5e38\u60c5\u51b5\u5206\u6790\uff1a",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u683c\u5f0f\u5316NameNode\u751f\u6210\u96c6\u7fa4id\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u542f\u52a8HDFS\u540eDataNode\u751f\u6210\u548cNameNode\u76f8\u540c\u7684\u96c6\u7fa4id\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u518d\u6b21\u683c\u5f0f\u5316NameNode\u751f\u6210\u53e6\u4e00\u4e2a\u96c6\u7fa4id\uff0c\u4e0e\u672a\u5220\u9664DataNode\u7684id\u4e0d\u4e00\u81f4\uff1b"),(0,r.kt)("li",{parentName:"ol"},"\u89e3\u51b3\u65b9\u6cd5\u662f\u5728\u7b2c2\u6b21\u683c\u5f0f\u5316\u4e4b\u524d\u5220\u9664DataNode\u4e2d\u7684\u4fe1\u606f(data\u76ee\u5f55)\u3002")))))}h.isMDXComponent=!0},3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return h}});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var i=a.createContext({}),d=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},s=function(e){var n=d(e.components);return a.createElement(i.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),u=d(t),h=o,c=u["".concat(i,".").concat(h)]||u[h]||m[h]||r;return t?a.createElement(c,l(l({ref:n},s),{},{components:t})):a.createElement(c,l({ref:n},s))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,l=new Array(r);l[0]=u;var p={};for(var i in n)hasOwnProperty.call(n,i)&&(p[i]=n[i]);p.originalType=e,p.mdxType="string"==typeof e?e:o,l[1]=p;for(var d=2;d<r;d++)l[d]=t[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"}}]);